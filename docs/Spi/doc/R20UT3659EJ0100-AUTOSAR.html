---
layout: default
title: R20UT3659EJ0100-AUTOSAR
nav_order: 1
parent: SPI Handler Driver
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>AUTOSAR MCAL R4.0.3</p>
<p> </p>
<p>User's Manual </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>SPI Driver Component Ver.1.0.2 </p>
<p>Embedded User's Manual</p>
<p> </p>
<p> </p>
<p> </p>
<p>Target Device: </p>
<p>RH850/P1x-C </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>All information contained in these materials, including products and product specifications, </p>
<p>represents information on the product at the time of publication and is subject to change by </p>
<p>Renesas Electronics Corp. without notice. Please review the latest information published by </p>
<p>Renesas Electronics Corp. through various means, including the Renesas Electronics Corp. </p>
<p>website (http://www.renesas.com). </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>www.renesas.com </p>
<p>Rev.1.00 Feb 2017</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>2</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>3 </p>
<p>Notice </p>
<p>1.</p>
<p> </p>
<p>Descriptions of circuits, software and other related information in this document are provided only to illustrate the operation of </p>
<p>semiconductor products and application examples. You are fully responsible for the incorporation or any other use of the circuits, </p>
<p>software, and information in the design of your product or system. Renesas Electronics disclaims any and all liability for any losses and </p>
<p>damages incurred by you or third parties arising from the use of these circuits, software, or information. </p>
<p>2.</p>
<p> </p>
<p>Renesas Electronics hereby expressly disclaims any warranties against and liability for infringement or any other disputes involving patents, </p>
<p>copyrights, or other intellectual property rights of third parties, by or arising from the use of Renesas Electronics products or technical information </p>
<p>described in this document, including but not limited to, the product data, drawing, chart, program, algorithm, application examples. </p>
<p>3.</p>
<p> </p>
<p>No license, express, implied or otherwise, is granted hereby under any patents, copyrights or other intellectual property rights of Renesas </p>
<p>Electronics or others. </p>
<p>4.</p>
<p> </p>
<p>You shall not alter, modify, copy, or otherwise misappropriate any Renesas Electronics product, whether in whole or in part. Renesas Electronics </p>
<p>disclaims any and all liability for any losses or damages incurred by you or third parties arising from such alteration, modification, copy or </p>
<p>otherwise misappropriation of Renesas Electronics products. </p>
<p>5.</p>
<p> </p>
<p>Renesas Electronics products are classified according to the following two quality grades: &quot;Standard&quot; and &quot;High Quality&quot;. The intended </p>
<p>applications for each Renesas Electronics product depends on the product’s quality grade, as indicated below.  </p>
<p>&quot;Standard&quot;:          Computers; office equipment; communications equipment; test and measurement equipment; audio and visual equipment; </p>
<p>home electronic appliances; machine tools; personal electronic equipment; and industrial robots etc. </p>
<p>&quot;High Quality&quot;:   Transportation equipment (automobiles, trains, ships, etc.); traffic control (traffic lights); large-scale communication </p>
<p>equipment; key financial terminal systems; safety control equipment; etc. </p>
<p>Renesas Electronics products are neither intended nor authorized for use in products or systems that may pose a direct threat to human life or </p>
<p>bodily injury (artificial life support devices or systems, surgical implantations etc.), or may cause serious property damages (space and undersea </p>
<p>repeaters; nuclear power control systems; aircraft control systems; key plant systems; military equipment; etc.). Renesas Electronics disclaims any </p>
<p>and all liability for any damages or losses incurred by you or third parties arising from the use of any Renesas Electronics product for which the </p>
<p>product is not intended by Renesas Electronics. </p>
<p>6.</p>
<p> </p>
<p>When using the Renesas Electronics products, refer to the latest product information (data sheets, user's manuals, application notes, &quot;General </p>
<p>Notes for Handling and Using Semiconductor Devices&quot; in the reliability handbook, etc.), and ensure that usage conditions are within the ranges </p>
<p>specified by Renesas Electronics with respect to maximum ratings, operating power supply voltage range, heat radiation characteristics, </p>
<p>installation, etc. Renesas Electronics disclaims any and all liability for any malfunctions or failure or accident arising out of the use of Renesas </p>
<p>Electronics products beyond such specified ranges. </p>
<p>7.</p>
<p> </p>
<p>Although Renesas Electronics endeavors to improve the quality and reliability of Renesas Electronics products, semiconductor products have </p>
<p>specific characteristics such as the occurrence of failure at a certain rate and malfunctions under certain use conditions. Further, Renesas </p>
<p>Electronics products are not subject to radiation resistance design. Please ensure to implement safety measures to guard them against the </p>
<p>possibility of bodily injury, injury or damage caused by fire, and social damage in the event of failure or malfunction of Renesas Electronics </p>
<p>products, such as safety design for hardware and software including but not limited to redundancy, fire control and malfunction prevention, </p>
<p>appropriate treatment for aging degradation or any other appropriate measures by your own responsibility as warranty for your products/system. </p>
<p>Because the evaluation of microcomputer software alone is very difficult and not practical, please evaluate the safety of the final products or </p>
<p>systems manufactured by you. </p>
<p>8.</p>
<p> </p>
<p>Please contact a Renesas Electronics sales office for details as to environmental matters such as the environmental compatibility of each Renesas </p>
<p>Electronics product. Please investigate applicable laws and regulations that regulate the inclusion or use of controlled substances, including </p>
<p>without limitation, the EU RoHS Directive carefully and sufficiently and use Renesas Electronics products in compliance with all these applicable </p>
<p>laws and regulations. Renesas Electronics disclaims any and all liability for damages or losses occurring as a result of your noncompliance with </p>
<p>applicable laws and regulations. </p>
<p>9.</p>
<p> </p>
<p>Renesas Electronics products and technologies shall not be used for or incorporated into any products or systems whose manufacture, use, or sale </p>
<p>is prohibited under any applicable domestic or foreign laws or regulations. You shall not use Renesas Electronics products or technologies for (1) </p>
<p>any purpose relating to the development, design, manufacture, use, stockpiling, etc., of weapons of mass destruction, such as nuclear weapons, </p>
<p>chemical weapons, or biological weapons, or missiles (including unmanned aerial vehicles (UAVs)) for delivering such weapons, (2) any purpose </p>
<p>relating to the development, design, manufacture, or use of conventional weapons, or (3) any other purpose of disturbing international peace and </p>
<p>security, and you shall not sell, export, lease, transfer, or release Renesas Electronics products or technologies to any third party whether directly </p>
<p>or indirectly with knowledge or reason to know that the third party or any other party will engage in the activities described above. When </p>
<p>exporting, selling, transferring, etc., Renesas Electronics products or technologies, you shall comply with any applicable export control laws and </p>
<p>regulations promulgated and administered by the governments of the countries asserting jurisdiction over the parties or transactions. </p>
<p>10.</p>
<p> </p>
<p>Please acknowledge and agree that you shall bear all the losses and damages which are incurred from the misuse or violation of the terms and </p>
<p>conditions described in this document, including this notice, and hold Renesas Electronics harmless, if such misuse or violation results from your </p>
<p>resale or making Renesas Electronics products available any third party. </p>
<p>11.</p>
<p> </p>
<p>This document shall not be reprinted, reproduced or duplicated in any form, in whole or in part, without prior written consent of Renesas </p>
<p>Electronics. </p>
<p>12.</p>
<p> </p>
<p>Please contact a Renesas Electronics sales office if you have any questions regarding the information contained in this document or Renesas </p>
<p>Electronics products. </p>
<p> </p>
<p>(Note 1)   &quot;Renesas Electronics&quot; as used in this document means Renesas Electronics Corporation and also includes its majority-owned </p>
<p>subsidiaries. </p>
<p>(Note 2)   &quot;Renesas Electronics product(s)&quot; means any product developed or manufactured by or for Renesas Electronics. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>4 </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>5 </p>
<p><b>Abbreviations and Acronyms </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Abbreviation / Acronym</b></p>
<p> </p>
<p><b>Description</b></p>
<p> </p>
<p>ANSI</p>
<p> </p>
<p>American National Standards Institute</p>
<p> </p>
<p>API</p>
<p> </p>
<p>Application Programming Interface</p>
<p> </p>
<p>ARXML/arxml</p>
<p> </p>
<p>AutosaR eXtensible Mark-up Language</p>
<p> </p>
<p>ASIC</p>
<p> </p>
<p>Application Specific Integration Circuit</p>
<p> </p>
<p>AUTOSAR</p>
<p> </p>
<p>AUTomotive Open System Architecture</p>
<p> </p>
<p>BSW</p>
<p> </p>
<p>Basic SoftWare</p>
<p> </p>
<p>CPU</p>
<p> </p>
<p>Central Processing Unit</p>
<p> </p>
<p>CSIH/CSIG, CSIG</p>
<p> </p>
<p>Enhanced Queued Clocked Serial Interface.</p>
<p> </p>
<p>DEM</p>
<p> </p>
<p>Diagnostic Event Manager</p>
<p> </p>
<p>DET/Det</p>
<p> </p>
<p>Development Error Tracer</p>
<p> </p>
<p>DIO</p>
<p> </p>
<p>Digital Input Output</p>
<p> </p>
<p>DMA</p>
<p> </p>
<p>Direct Memory Access</p>
<p> </p>
<p>EB</p>
<p> </p>
<p>External Buffer</p>
<p> </p>
<p>ECU</p>
<p> </p>
<p>Electronic Control Unit</p>
<p> </p>
<p>EDL</p>
<p> </p>
<p>Extended Data Length</p>
<p> </p>
<p>EEPROM</p>
<p> </p>
<p>Electrically Erasable Programmable Read-Only Memory</p>
<p> </p>
<p>GNU</p>
<p> </p>
<p>GNU’s Not Unix</p>
<p> </p>
<p>GPT</p>
<p> </p>
<p>General Purpose Timer</p>
<p> </p>
<p>HW</p>
<p> </p>
<p>HardWare</p>
<p> </p>
<p>IB</p>
<p> </p>
<p>Internal Buffer</p>
<p> </p>
<p>Id</p>
<p> </p>
<p>Identifier</p>
<p> </p>
<p>I/O</p>
<p> </p>
<p>Input/Output</p>
<p> </p>
<p>ISR</p>
<p> </p>
<p>Interrupt Service Routine</p>
<p> </p>
<p>MCAL</p>
<p> </p>
<p>Microcontroller Abstraction Layer</p>
<p> </p>
<p>MHz</p>
<p> </p>
<p>Mega Hertz</p>
<p> </p>
<p>NA</p>
<p> </p>
<p>Not Applicable</p>
<p> </p>
<p>PLL</p>
<p> </p>
<p>Phase Locked Loop</p>
<p> </p>
<p>RAM</p>
<p> </p>
<p>Random Access Memory</p>
<p> </p>
<p>ROM</p>
<p> </p>
<p>Read Only Memory</p>
<p> </p>
<p>RTE</p>
<p> </p>
<p>Run Time Environment</p>
<p> </p>
<p>SPI</p>
<p> </p>
<p>Serial Peripheral Interface</p>
<p> </p>
<p>µs</p>
<p> </p>
<p>Micro Seconds</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Definitions </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Term</b></p>
<p> </p>
<p><b>Represented by</b></p>
<p> </p>
<p>Sl. No.</p>
<p> </p>
<p>Serial Number</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>6 </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>7 </p>
<p><b>Table Of Contents </b></p>
<p> </p>
<p><b>Chapter 1</b></p>
<p> </p>
<p><b>Introduction ....................................................................... 11</b></p>
<p> </p>
<p><b>1.1.</b></p>
<p> </p>
<p><b>Document Overview ................................................................................................................ 13</b></p>
<p> </p>
<p><b>Chapter 2</b></p>
<p> </p>
<p><b>Reference Documents ...................................................... 15</b></p>
<p> </p>
<p><b>Chapter 3</b></p>
<p> </p>
<p><b>Integration And Build Process ......................................... 17</b></p>
<p> </p>
<p><b>3.1.</b></p>
<p> </p>
<p><b>SPI Driver Component Makefile ............................................................................................. 17</b></p>
<p> </p>
<p><b>Chapter 4</b></p>
<p> </p>
<p><b>Forethoughts ..................................................................... 19</b></p>
<p> </p>
<p><b>4.1.</b></p>
<p> </p>
<p><b>General...................................................................................................................................... 19</b></p>
<p> </p>
<p><b>4.2.</b></p>
<p> </p>
<p><b>Preconditions ........................................................................................................................... 22</b></p>
<p> </p>
<p><b>4.3.</b></p>
<p> </p>
<p><b>User Mode and Supervisor Mode ........................................................................................... 23</b></p>
<p> </p>
<p><b>4.4.</b></p>
<p> </p>
<p><b>Memory modes ........................................................................................................................ 25</b></p>
<p> </p>
<p><b>4.5.</b></p>
<p> </p>
<p><b>Data Consistency ..................................................................................................................... 25</b></p>
<p> </p>
<p><b>4.6.</b></p>
<p> </p>
<p><b>Deviation List ........................................................................................................................... 26</b></p>
<p> </p>
<p><b>Chapter 5</b></p>
<p> </p>
<p><b>Architecture Details .......................................................... 29</b></p>
<p> </p>
<p><b>Chapter 6</b></p>
<p> </p>
<p><b>Registers Details ............................................................... 33</b></p>
<p> </p>
<p><b>Chapter 7</b></p>
<p> </p>
<p><b>Interaction Between The User And SPI Driver Component </b></p>
<p><b> </b></p>
<p><b> ............................................................................................ 41</b></p>
<p> </p>
<p><b>7.1.</b></p>
<p> </p>
<p><b>Services Provided By SPI Driver Component To The User................................................. 41</b></p>
<p> </p>
<p><b>Chapter 8</b></p>
<p> </p>
<p><b>SPI Driver Component Header And Source File </b></p>
<p><b>Description  ............................................................................................ 43</b></p>
<p> </p>
<p><b>Chapter 9</b></p>
<p> </p>
<p><b>Generation Tool Guide ...................................................... 47</b></p>
<p> </p>
<p><b>Chapter 10</b></p>
<p> </p>
<p><b>Application Programming Interface ................................. 49</b></p>
<p> </p>
<p><b>10.1.</b></p>
<p> </p>
<p><b>Imported Types ........................................................................................................................ 49</b></p>
<p> </p>
<p>10.1.1.</p>
<p> </p>
<p>Standard Types .......................................................................................................... 49</p>
<p> </p>
<p>10.1.2.</p>
<p> </p>
<p>Other Module Types ................................................................................................... 49</p>
<p> </p>
<p><b>10.2.</b></p>
<p> </p>
<p><b>Type Definitions ....................................................................................................................... 49</b></p>
<p> </p>
<p>10.2.1.</p>
<p> </p>
<p>Spi_ConfigType ........................................................................................................... 49</p>
<p> </p>
<p>10.2.2.</p>
<p> </p>
<p>Spi_StatusType .......................................................................................................... 49</p>
<p> </p>
<p>10.2.3.</p>
<p> </p>
<p>Spi_JobResultType..................................................................................................... 50</p>
<p> </p>
<p>10.2.4.</p>
<p> </p>
<p>Spi_SeqResultType .................................................................................................... 50</p>
<p> </p>
<p>10.2.5.</p>
<p> </p>
<p>Spi_DataType ............................................................................................................. 50</p>
<p> </p>
<p>10.2.6.</p>
<p> </p>
<p>Spi_NumberOfDataType ............................................................................................ 50</p>
<p> </p>
<p>10.2.7.</p>
<p> </p>
<p>Spi_ChannelType ....................................................................................................... 51</p>
<p> </p>
<p>10.2.8.</p>
<p> </p>
<p>Spi_JobType ............................................................................................................... 51</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>8 </p>
<p>10.2.9.</p>
<p> </p>
<p>Spi_SequenceType .................................................................................................... 51</p>
<p> </p>
<p>10.2.10.</p>
<p> </p>
<p>Spi_HWUnitType ........................................................................................................ 51</p>
<p> </p>
<p>10.2.11.</p>
<p> </p>
<p>Spi_AsyncModeType .................................................................................................. 51</p>
<p> </p>
<p>10.2.12.</p>
<p> </p>
<p>Spi_CommErrorType .................................................................................................. 52</p>
<p> </p>
<p>10.2.13.</p>
<p> </p>
<p>Spi_HWErrorsType ..................................................................................................... 52</p>
<p> </p>
<p>10.2.14.</p>
<p> </p>
<p>Spi_SelfTestType ....................................................................................................... 52</p>
<p> </p>
<p>10.2.15.</p>
<p> </p>
<p>Spi_ReturnStatus ........................................................................................................ 52</p>
<p> </p>
<p><b>10.3.</b></p>
<p> </p>
<p><b>Function Definitions ................................................................................................................ 53</b></p>
<p> </p>
<p><b>Chapter 11</b></p>
<p> </p>
<p><b>Development And Production Errors .............................. 55</b></p>
<p> </p>
<p><b>11.1.</b></p>
<p> </p>
<p><b>SPI Driver Component Development Errors ......................................................................... 55</b></p>
<p> </p>
<p><b>11.2.</b></p>
<p> </p>
<p><b>SPI Driver Component Production Errors............................................................................. 56</b></p>
<p> </p>
<p><b>Chapter 12</b></p>
<p> </p>
<p><b>Memory Organization ....................................................... 59</b></p>
<p> </p>
<p><b>Chapter 13</b></p>
<p> </p>
<p><b>P1x-C Specific Information ............................................... 61</b></p>
<p> </p>
<p><b>13.1.</b></p>
<p> </p>
<p><b>Interaction Between The User And SPI Driver Component ................................................. 61</b></p>
<p> </p>
<p>13.1.1. ISR Function .................................................................................................................. 61</p>
<p> </p>
<p><b>13.2.</b></p>
<p> </p>
<p><b>Sample Application ................................................................................................................. 63</b></p>
<p> </p>
<p>13.2.1. Sample Application Structure ........................................................................................ 63</p>
<p> </p>
<p>13.2.2. Building Sample Application .......................................................................................... 64</p>
<p> </p>
<p>13.2.2.1. Configuration Example ................................................................................ 64</p>
<p> </p>
<p>13.2.2.2. Debugging The Sample Application ............................................................ 64</p>
<p> </p>
<p><b>13.3.</b></p>
<p> </p>
<p><b>Memory And Throughput ........................................................................................................ 65</b></p>
<p> </p>
<p>13.3.1. ROM/RAM Usage .......................................................................................................... 65</p>
<p> </p>
<p>13.3.2. Stack Depth ................................................................................................................... 66</p>
<p> </p>
<p>13.3.3. Throughput Details ........................................................................................................ 66</p>
<p> </p>
<p><b>Chapter 14</b></p>
<p> </p>
<p><b>Release Details .................................................................. 69</b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>9 </p>
<p><b>List Of Figures </b></p>
<p><b> </b></p>
<p>Figure 1-1</p>
<p> </p>
<p>System Overview Of AUTOSAR Architecture ....................................................... 11</p>
<p> </p>
<p>Figure 1-2</p>
<p> </p>
<p>System Overview Of The SPI Driver In AUTOSAR MCAL Layer .......................... 12</p>
<p> </p>
<p>Figure 5-1</p>
<p> </p>
<p>SPI Driver Architecture .......................................................................................... 29</p>
<p> </p>
<p>Figure 5-2</p>
<p> </p>
<p>Component Overview Of SPI Driver Component .................................................. 30</p>
<p> </p>
<p>Figure 12-1</p>
<p> </p>
<p>SPI Driver Component Driver Organization ........................................................... 59</p>
<p> </p>
<p>Figure 13-1</p>
<p> </p>
<p>Overview Of SPI Driver Sample Application .......................................................... 63</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>List Of Tables </b></p>
<p><b> </b></p>
<p>Table 4-1</p>
<p> </p>
<p>Registers to be Configured for Static Configuration .............................................. 21</p>
<p> </p>
<p>Table 4-2</p>
<p> </p>
<p>Channel container parameters .............................................................................. 21</p>
<p> </p>
<p>Table 4-3</p>
<p> </p>
<p>Job container parameters ...................................................................................... 21</p>
<p> </p>
<p>Table 4-4</p>
<p> </p>
<p>User Mode and Supervisory Mode ........................................................................ 23</p>
<p> </p>
<p>Table 4-5</p>
<p> </p>
<p>HW unit and Memory Mode Selection ................................................................... 25</p>
<p> </p>
<p>Table 4-6</p>
<p> </p>
<p>SPI Driver Critical section protection List .............................................................. 25</p>
<p> </p>
<p>Table 4-7</p>
<p> </p>
<p>SPI Driver Deviation List ........................................................................................ 26</p>
<p> </p>
<p>Table 6-1  </p>
<p> </p>
<p>Register Details...................................................................................................... 33</p>
<p> </p>
<p>Table 8-1</p>
<p> </p>
<p>Description Of The SPI Driver Component Files ................................................... 44</p>
<p> </p>
<p>Table 10-1</p>
<p> </p>
<p>The APIs provided by the SPI Driver Component ................................................. 53</p>
<p> </p>
<p>Table 11-1</p>
<p> </p>
<p>DET Errors Of SPI Driver Component ................................................................... 55</p>
<p> </p>
<p>Table 11-2</p>
<p> </p>
<p>DEM Errors Of SPI Driver Component .................................................................. 57</p>
<p> </p>
<p>Table 13-1</p>
<p> </p>
<p>Interrupt Vector Table ............................................................................................ 61</p>
<p> </p>
<p>Table 13-2</p>
<p> </p>
<p>ROM/RAM Details Without DET ............................................................................ 65</p>
<p> </p>
<p>Table 13-3</p>
<p> </p>
<p>ROM/RAM Details With DET ................................................................................. 66</p>
<p> </p>
<p>Table 13-4</p>
<p> </p>
<p>Throughput Details Of The APIs ............................................................................ 67</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>10 </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Introduction                                                                                                                             Chapter 1 </b></p>
<p> </p>
<p>11 </p>
<p><b>Chapter 1 </b></p>
<p><b>Introduction </b></p>
<p> </p>
<p> </p>
<p>The purpose of this document is to describe the information related to SPI </p>
<p>Driver Component for Renesas P1x-C microcontrollers. </p>
<p> </p>
<p>This document shall be used as reference by the users of SPI Driver </p>
<p>Component. The system overview of complete AUTOSAR architecture is </p>
<p>shown in the below Figure: </p>
<p> </p>
<p> </p>
<p> </p>
<p>Application Layer </p>
<p> </p>
<p> </p>
<p> </p>
<p>AUTOSAR  RTE</p>
<p> </p>
<p> </p>
<p> </p>
<p>System Services </p>
<p> </p>
<p> </p>
<p> </p>
<p>On board Device Abstraction </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>SPI Driver </b></p>
<p> </p>
<p> </p>
<p> </p>
<p>Microcontroller </p>
<p> </p>
<p> </p>
<p><b>Figure 1-1 </b></p>
<p><b>System Overview Of AUTOSAR Architecture </b></p>
<p> </p>
<p>The SPI Driver is part of the Microcontroller Abstraction Layer (MCAL), the </p>
<p>lowest layer of Basic Software in the AUTOSAR environment. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 1                                                                                                                             Introduction                                                                                                                              </b></p>
<p> </p>
<p>12 </p>
<p>PORT Driver </p>
<p>DIO </p>
<p>DIO Driver </p>
<p>ADC </p>
<p>ADC Driver </p>
<p>PWM Driver </p>
<p>ICU </p>
<p>ICU Driver </p>
<p>FlexRay Driver </p>
<p>CAN </p>
<p>CAN Driver </p>
<p>LIN Driver </p>
<p><b>SPI Handler Driver </b></p>
<p>SPI </p>
<p>internal EEPROM Driver </p>
<p>internal Flash Driver </p>
<p>external Flash Driver </p>
<p>RAM Test </p>
<p>PWM </p>
<p>Core Test </p>
<p>LIN or </p>
<p>SCI </p>
<p>MCU Driver </p>
<p>EEPRO </p>
<p>M </p>
<p>Watchdog Driver </p>
<p>FLASH </p>
<p>GPT Driver </p>
<p>Ext. BUS </p>
<p>MCU </p>
<p>Power &amp; </p>
<p>Clock   </p>
<p>Unit </p>
<p> </p>
<p>N </p>
<p>Unit </p>
<p>GPT </p>
<p>WDT </p>
<p> </p>
<p>The Figure in the following page depicts the SPI Driver as part of layered </p>
<p>AUTOSAR MCAL Layer:</p>
<p> </p>
<p> </p>
<p> </p>
<p>M icrocont roller Drivers </p>
<p>Me mo r y Drivers </p>
<p>Communication  Drivers </p>
<p>I/O  Drivers </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Micro - </b></p>
<p><b>controller </b></p>
<p> </p>
<p> </p>
<p><b>Figure 1-2 </b></p>
<p><b>System Overview Of The SPI Driver In AUTOSAR MCAL Layer </b></p>
<p> </p>
<p> </p>
<p>The SPI Driver Component comprises Embedded software and the </p>
<p>Configuration Tool to achieve scalability and configurability. </p>
<p> </p>
<p>The SPI Driver component code Generation Tool is a command line tool that </p>
<p>accepts ECU configuration description files as input and generates source </p>
<p>and header files. The configuration description is an ARXML file that contains </p>
<p>information about the configuration for SPI Driver. The tool generates the </p>
<p>Spi_PBcfg.c, Spi_Lcfg.c, Spi_Hardware.c,</p>
<p> </p>
<p>Spi_Hardware.h, Spi_Cfg.h and </p>
<p>Spi_Cbk.h. </p>
<p> </p>
<p>The SPI driver provides services for reading from and writing to devices </p>
<p>connected through SPI buses. It provides access to SPI communication to </p>
<p>several users (For example, EEPROM, I/O ASICs). It also provides the </p>
<p>required mechanism to configure the on-chip SPI peripheral. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Introduction                                                                                                                             Chapter 1 </b></p>
<p> </p>
<p>13 </p>
<p><b>1.1. </b></p>
<p><b>Document Overview </b></p>
<p> </p>
<p> </p>
<p>The document has been segmented for easy reference. The table below </p>
<p>provides user with an overview of the contents of each section: </p>
<p> </p>
<p> </p>
<p><b>Section</b></p>
<p> </p>
<p><b>Contents</b></p>
<p> </p>
<p>Section 1 (Introduction)</p>
<p> </p>
<p>This section provides an introduction and overview of SPI Driver </p>
<p>Component.</p>
<p> </p>
<p>Section 2 (Reference Documents)</p>
<p> </p>
<p>This section lists the documents referred for developing this document.</p>
<p> </p>
<p>Section 3 (Integration And Build </p>
<p>Process)</p>
<p> </p>
<p>This section explains the folder structure, Makefile structure for SPI </p>
<p>Driver Component. This section also explains about the Makefile </p>
<p>descriptions, Integration of SPI Driver Component with other </p>
<p>components, building the SPI Driver Component along with a </p>
<p>sample application.</p>
<p> </p>
<p>Section 4 (Forethoughts)</p>
<p> </p>
<p>This section provides brief information about the SPI Driver </p>
<p>Component, the preconditions that should be known to the user before </p>
<p>it is used, memory modes, data consistency details, deviation list and </p>
<p>Support For Different Interrupt Categories.</p>
<p> </p>
<p>Section 5 (Architecture Details)</p>
<p> </p>
<p>This section describes the layered architectural details of the SPI Driver </p>
<p>Component.</p>
<p> </p>
<p>Section 6 (Register Details)</p>
<p> </p>
<p>This section describes the register details of SPI Driver Component.</p>
<p> </p>
<p>Section 7 (Interaction Between </p>
<p>User And SPI Driver Component)</p>
<p> </p>
<p>This section describes interaction of the SPI Driver Component with </p>
<p>the upper layers.</p>
<p> </p>
<p>Section 8 (SPI Driver Component </p>
<p>Header And Source File </p>
<p>Description)</p>
<p> </p>
<p>This section provides information about the SPI Driver Component </p>
<p>source files is mentioned. This section also contains the brief note on </p>
<p>the tool generated output file.</p>
<p> </p>
<p>Section 9 (Generation Tool Guide)</p>
<p> </p>
<p>This section provides information on the SPI Driver Component Code </p>
<p>Generation Tool.</p>
<p> </p>
<p>Section 10 (Application </p>
<p>Programming Interface)</p>
<p> </p>
<p>This section explains all the APIs provided by the SPI Driver </p>
<p>Component.</p>
<p> </p>
<p>Section 11 (Development And </p>
<p>Production Errors)</p>
<p> </p>
<p>This section lists the DET and DEM errors.</p>
<p> </p>
<p>Section 12 (Memory </p>
<p>Organization)</p>
<p> </p>
<p>This section provides the typical memory organization, which must </p>
<p>be met for proper functioning of component.</p>
<p> </p>
<p>Section 13(P1X-C </p>
<p>Specific information)</p>
<p> </p>
<p>This section provides P1x-C specific information like ISR Function, the </p>
<p>details of the P1x-C Sample Application and its folder structure and the </p>
<p>information about RAM/ROM usage, stack depth and throughput </p>
<p>details.</p>
<p> </p>
<p>Section 14 (Release Details)</p>
<p> </p>
<p>This section provides release details with version name and </p>
<p>base version.</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 1                                                                                                                             Introduction                                                                                                                              </b></p>
<p> </p>
<p>14 </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Reference Documents </b></p>
<p><b>Chapter 2</b></p>
<p> </p>
<p> </p>
<p>15 </p>
<p> </p>
<p><b>Chapter 2 </b></p>
<p><b>Reference Documents </b></p>
<p> </p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>Title</b></p>
<p> </p>
<p><b>Version</b></p>
<p> </p>
<p>1.</p>
<p> </p>
<p>AUTOSAR_SWS_SPIHandlerDriver.pdf</p>
<p> </p>
<p>  3.2.0</p>
<p> </p>
<p>2.</p>
<p> </p>
<p>AUTOSAR BUGZILLA (http://www.autosar.org/bugzilla) </p>
<p>Note: AUTOSAR BUGZILLA is a database, which contains concerns raised </p>
<p>against information present in AUTOSAR Specifications.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>3.</p>
<p> </p>
<p>r01uh0517ej0070_rh850p1x-c_Open.pdf</p>
<p> </p>
<p>Rev.1.00</p>
<p> </p>
<p>4. </p>
<p>Specification of Compiler Abstraction </p>
<p>  (AUTOSAR_SWS_CompilerAbstraction.pdf) </p>
<p>  3.2.0 </p>
<p> 5. </p>
<p>Specification of Memory Mapping  </p>
<p>  (AUTOSAR_SWS_MemoryMapping.pdf) </p>
<p>  1.4.0 </p>
<p>6. </p>
<p>Specification of Platform Types  </p>
<p>  (AUTOSAR_SWS_PlatformTypes.pdf) </p>
<p>  2.5.0 </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 2                                                                                                             Reference Documents </b></p>
<p> </p>
<p>16 </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Integration And Build Process  </b></p>
<p><b> </b></p>
<p><b>Chapter 3</b></p>
<p> </p>
<p>17 </p>
<p><b>Chapter 3 </b></p>
<p><b>Integration And Build Process </b></p>
<p> </p>
<p> </p>
<p>In this section the folder structure of the SPI Driver Component is explained. </p>
<p>Description of the Makefiles along with samples is provided in this section. </p>
<p> </p>
<p> </p>
<p><b>Remark </b></p>
<p>The details about the C Source and Header files that are generated by the </p>
<p>SPI Driver Generation Tool are mentioned in the  </p>
<p><b>                 </b>“R20UT3660EJ0100-AUTOSAR.pdf”. </p>
<p> </p>
<p><b>3.1. </b></p>
<p><b>SPI Driver Component Makefile </b></p>
<p> </p>
<p> </p>
<p>The Makefile provided with the SPI Driver Component consists of the GNU </p>
<p>Make compatible script to build the SPI Driver Component in case of any </p>
<p>change in the configuration. This can be used in the upper level Makefile (of </p>
<p>the application) to link and build the final application executable. </p>
<p> </p>
<p> </p>
<p><b>3.1.1.   Folder Structure </b></p>
<p> </p>
<p>The files are organized in the following folders: </p>
<p> </p>
<p><b>                 Remark </b>Trailing slash ‘\’ at the end indicates a folder </p>
<p> </p>
<p>X1X\common_platform\modules\spi\src\Spi_Driver.c </p>
<p> </p>
<p>\Spi.c </p>
<p> </p>
<p>\Spi_Scheduler.c </p>
<p> </p>
<p>\Spi_Irq.c </p>
<p> </p>
<p>\Spi_Ram.c </p>
<p> </p>
<p>\Spi_Version.c</p>
<p> </p>
<p> </p>
<p>X1X\common_platform\modules\spi\include\Spi_Driver.h </p>
<p> </p>
<p>\Spi.h </p>
<p>  </p>
<p>\Spi_Scheduler.h </p>
<p> </p>
<p>\Spi_Irq.h </p>
<p> </p>
<p>\Spi_LTTypes.h </p>
<p> </p>
<p>\Spi_PBTypes.h </p>
<p> </p>
<p>\Spi_Ram.h </p>
<p> </p>
<p>\Spi_Version.h </p>
<p> </p>
<p>\Spi_Types.h </p>
<p> </p>
<p>\Spi_RegWrite.h </p>
<p> </p>
<p>X1X\P1x-C\modules\spi\sample_application\&lt;SubVariant&gt;\make\ghs </p>
<p>\App_Spi_P1x-C_Sample.mak </p>
<p>\App_Spi_P1x-C_Sample.ld </p>
<p> </p>
<p>                                         X1X\P1x-C\modules\spi\generator </p>
<p>\R403_SPI_P1x-C_BSWMDT.arxml </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 3                                                                                             Integration And Build Process </b></p>
<p> </p>
<p>18 </p>
<p>X1X\P1x-C\modules\spi\user_manual </p>
<p> </p>
<p>(User manuals will be available in this folder) </p>
<p> </p>
<p>  Note: 1.</p>
<p> </p>
<p>&lt;AUTOSAR_version&gt; should be 4.0.3</p>
<p>  </p>
<p>            2. &lt;SubVariant&gt; can be P1H-C, P1H-CE, P1M-C. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Forethoughts                                                                                                                          Chapter 4 </b></p>
<p>19 </p>
<p><b>Chapter 4 </b></p>
<p><b>Forethoughts </b></p>
<p> </p>
<p><b>4.1. </b></p>
<p><b>General </b></p>
<p> </p>
<p>Following information will aid the user to use the SPI Driver Component </p>
<p>software efficiently: </p>
<p> </p>
<p>• </p>
<p>SPI Driver component does not take care of setting the registers which </p>
<p>configure clock, prescaler and PLL. </p>
<p> </p>
<p>• </p>
<p>SPI Driver component handles only the Master mode. </p>
<p> </p>
<p>• </p>
<p>SPI Driver component supports full-duplex mode. </p>
<p> </p>
<p>• </p>
<p>The chip select is implemented using the microcontroller pins and it is </p>
<p>configurable. </p>
<p> </p>
<p> </p>
<p>• </p>
<p>The microcontroller pins used for chip select is directly accessed by the </p>
<p>SPI Driver component without using the APIs of DIO module. </p>
<p> </p>
<p>• </p>
<p>Maximum number of channels and jobs configurable is 65536. </p>
<p> </p>
<p>• </p>
<p>The scope is restricted to post-build with multiple configuration sets. </p>
<p> </p>
<p>• </p>
<p>The identifiers for channels, jobs and sequences entered by the user </p>
<p>should start from 0 and should be continuous. </p>
<p> </p>
<p>• </p>
<p>The width of the transmitted data unit is configurable and the valid values </p>
<p>are 8 bits to 32 bits. </p>
<p> </p>
<p>• </p>
<p>The number of channels, jobs and sequences should be same across </p>
<p>multiple configuration sets. </p>
<p> </p>
<p>• </p>
<p>The channels, jobs and sequences cannot be deleted or added at post-</p>
<p>build time. </p>
<p> </p>
<p>• </p>
<p>The SPI hardware unit cannot be deleted or added at post–build time. But, </p>
<p>the reassignment of the SPI hardware units to different jobs is possible at </p>
<p>post-build time. </p>
<p> </p>
<p>• </p>
<p>The DMA unit cannot be deleted or added at post–build time. But, the </p>
<p>reassignment of DMA units to the SPI hardware units is possible at post- </p>
<p>build time. </p>
<p> </p>
<p>• </p>
<p>When the level of scalable functionality is configured as 2, then two SPI </p>
<p>buses using separate hardware units are required. In this case, the SPI </p>
<p>bus dedicated for synchronous transmission is configurable. </p>
<p> </p>
<p>• </p>
<p>When the level of scalable functionality is configured as 2, two modes of </p>
<p>asynchronous communication using polling or interrupt mechanism are </p>
<p>possible. These modes are selectable during execution time. </p>
<p> </p>
<p>• </p>
<p>When the level of scalable functionality is configured as 1 or 2, If interrupt </p>
<p>mechanism is selected during execution time, the transmission and </p>
<p>reception will be performed using the on-chip DMA unit only if the DMA </p>
<p>mode is enabled through the configuration. </p>
<p> </p>
<p>• </p>
<p>The LEVEL 2 SPI Handler is specified for microcontrollers that have to </p>
<p>provide at least two SPI busses using separated hardware units. Otherwise, </p>
<p>using this level of functionality makes no sense. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Chapter 4                                                                                                                           Forethoughts </b></p>
<p>20 </p>
<p>• </p>
<p>When Level Delivered is 0 and 2, the memory mode configured for jobs </p>
<p>linked for the synchronous sequence shall be always Direct Access Mode </p>
<p>only. </p>
<p> </p>
<p>• </p>
<p>If user configures 32 bit IB and EB channels and additionally configures </p>
<p>DMA in direct access mode there will be a generator error message. </p>
<p> </p>
<p>• </p>
<p>When the SPI driver is configured in Level 2 (SpiLevelDelivered) and the </p>
<p>DMA is also configured (SpiDmaMode), then the asynchronous mode </p>
<p>needs to be set for interrupt mode using the API Spi_SetAsyncMode </p>
<p> </p>
<p>• </p>
<p>Direct Access mode can be effectively used in case of sequence having </p>
<p>channels and buffers of significantly different properties. </p>
<p> </p>
<p>• </p>
<p>Double Buffer mode can be effectively used in case of sequence having </p>
<p>more number of jobs, channels and buffers with same hardware properties </p>
<p>for continuous transmission of data. For double buffer mode only usage of </p>
<p>internal buffers is allowed. FIFO mode can be effectively used at the time of </p>
<p>transmit/receive of large amount of data. FIFO mode can also be used in </p>
<p>case of sequence having lesser number of jobs and having more channels </p>
<p>and buffers. </p>
<p> </p>
<p>• </p>
<p>In a particular configurations where CSIH HW units are configured, Spi_Init </p>
<p>function must be called before Port_Init function. </p>
<p> </p>
<p>• </p>
<p>Only if &quot;SpiCsInactive&quot; parameter is set to &quot;true&quot;, the PWR bit in CSI </p>
<p>hardware will be cleared for that hardware unit, so setting &quot;false&quot; value can </p>
<p>lead to unnecessary power consumption. </p>
<p> </p>
<p>• </p>
<p>When “SpiCsIdleEnforcement” is set to true for the jobs configured for CSIH </p>
<p>Hw units, the value configured for &quot;SpiCsInactive&quot; will not have any impact </p>
<p>in actual Chip Select behavior&quot;. </p>
<p> </p>
<p>• </p>
<p>The parameter &quot;SpiCsIdleEnforcement&quot; influences the behaviour of idle </p>
<p>level of the chip select during data transfer and after the transmission of a </p>
<p>job. </p>
<p> </p>
<p>When the parameter 'SpiCsIdleEnforcement' is configured as false, the </p>
<p>corresponding chip select is deactivated before every channel transmission </p>
<p>and stays active after transmission until another job with different CS is </p>
<p>transmitted. </p>
<p> </p>
<p>When the parameter 'SpiCsIdleEnforcement' is configured as true, the chip </p>
<p>select is deactivated after job transmission. An idle phase of CS is inserted </p>
<p>between transmissions of two data buffers.The duration of idle state of the </p>
<p>chip select between the channels transmissions will be less than duration </p>
<p>of idle state of the chip select between single data of each channel. </p>
<p> </p>
<p>This information is valid only for DIRECT ACCES MODE. </p>
<p> </p>
<p>• </p>
<p>For availability of Data Consistency Check on the port pins, please refer </p>
<p>respective microcontroller user manual. </p>
<p> </p>
<p>• </p>
<p>Sequences assigned to a hardware channel (CSIHx) which is configured to </p>
<p>work with transmit only memory mode can be an interruptible or non- </p>
<p>interruptible sequence (specified by the parameter </p>
<p>SpiInterruptibleSequence). However, even if the sequence is non- </p>
<p>interruptible, it can still be interrupted by CPU-controlled high priority </p>
<p>communication functionality. i.e. the parameter SpiInterruptibleSequence is </p>
<p>valid only for software interruption. </p>
<p> </p>
<p>• </p>
<p>Each of the high priority sequences shall refer to a unique chip select line. </p>
<p> </p>
<p> </p>
<p> </p>
<p>        These lines shall not be referred by any of the low priority sequences too. </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Forethoughts                                                                                                                            Chapter 4 </b></p>
<p>21 </p>
<p>• </p>
<p>In order to support DEEPSTOP functionality without resetting the </p>
<p>microcontroller, the re initialization of the Driver using Spi_Init API is </p>
<p>supported. To achieve this functionality the </p>
<p>'SPI_E_ALREADY_INITIALIZED' Det error check is to be suppressedusing </p>
<p>‘SpiAlreadyInitDetCheck’ parameter when DET is enabled.When DET is </p>
<p>disabled there is no impact of “SpiAlreadyInitDetCheck” parameter. </p>
<p> </p>
<p>• </p>
<p>Hardware high priority sequence mechanism is not supported for P1x-C </p>
<p>devices. </p>
<p>  </p>
<p>• </p>
<p>The parameter SpiPersistentHWConfiguration decides whether Hardware </p>
<p>configuration is static or dynamic. This is applicable for both CSIG and CSIH </p>
<p>and both Synchronous and Asynchronous communication and all memory </p>
<p>modes. </p>
<p> </p>
<p>• </p>
<p>If  SpiPersistentHWConfiguration  is  “True”,  then  HW configuration  is  Static </p>
<p>(configuration is performed in the function Spi_Init()), else it is dynamic. </p>
<p>• </p>
<p>SpiTimeOut  has  been  added  to  have  the  hold  on  functions  and  ongoing </p>
<p>process of APIs, SpiTimeOut keeps the track of time and breaks loop if it is </p>
<p>exceeds the defined time.  </p>
<p> </p>
<p><b>Table 4-1 </b></p>
<p><b>Registers to be Configured for Static Configuration </b></p>
<p> </p>
<p><b>             CSIH HW Unit</b></p>
<p> </p>
<p>CSIHnCTL0</p>
<p> </p>
<p>CSIHnCTL1 </p>
<p> </p>
<p>CSIHnCTL2 </p>
<p> </p>
<p>CSIHnCFGx </p>
<p> </p>
<p>CSIHnBRSy </p>
<p> </p>
<p><b> </b></p>
<p><b>Table 4-2 </b></p>
<p><b>Channel container parameters </b></p>
<p> </p>
<p><b>Parameter in </b></p>
<p><b>channel container </b></p>
<p><b>Registers linked </b></p>
<p>SpiDataWidth</p>
<p> </p>
<p>CSIHnCFGx.CSIHnDLSx</p>
<p> </p>
<p>SpiTransferStart</p>
<p> </p>
<p>CSIHnCFGx.CSIHnDIRx</p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b>Table 4-3 </b></p>
<p><b>Job container parameters </b></p>
<p> </p>
<p><b>Parameter in job </b></p>
<p><b>container </b></p>
<p><b>Registers linked</b></p>
<p> </p>
<p>SpiPortPinSelect</p>
<p> </p>
<p>CSIHnTXOW.CSIHnCSx </p>
<p>CSIHnCTL1.CSIHnCSx</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>• </p>
<p>Table 4-1 contains the registers that must be configured inside Spi_Init() </p>
<p>function. </p>
<p> </p>
<p>• </p>
<p>All  the  parameters  in  channel/job/external  devices  containers  linked  to  a </p>
<p>hardware  unit  mentioned  in  Table  4-2  and  4-3  should  be  same  for  Static </p>
<p>Configuration. </p>
<p> </p>
<p>• </p>
<p>MCTL1, MCTL2 and CSIHnMRWP0 registers are allowed to be accessed </p>
<p>when there is an ongoing communication only when PWR is set. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Chapter 4                                                                                                                           Forethoughts </b></p>
<p>22 </p>
<p> </p>
<p>• </p>
<p>Manual transmission is possible only in Direct Access and FIFO modes. </p>
<p>However user has to implement his own ISRs for SPI. In case he wants to </p>
<p>use Renesas SPI driver transmission in parallel, he has to call Renesas SPI </p>
<p>ISRs functions from his custom ISRs (e.g. use different interrupt category </p>
<p>mode). </p>
<p> </p>
<p>• </p>
<p>When configuring DMA mode, the number of buffers configured shall be </p>
<p>greater than 1 in the case of Direct Access Mode and Fifo Mode.  </p>
<p> </p>
<p> </p>
<p>• </p>
<p>The notifications should be called from user’s complex driver ISRs. </p>
<p> </p>
<p>• </p>
<p>When using DMA, 'SpiDataWidthSelection' in 'General' container shall be </p>
<p>'BITS_16', the user shall setup the buffer(EB or IB) in the application as </p>
<p>type 'Spi_DataType' for channels that are configured for DMA and fill </p>
<p>required data(8 or 16) as configured in 'SpiDataWidth' in 'SpiChannel'. </p>
<p> </p>
<p>• </p>
<p>The SPI DMA type is specified by the parameter SPI_DMA_TYPE_USED. </p>
<p> </p>
<p>• </p>
<p>The Buffers used for transmission/reception using DMA shall be initialized </p>
<p>and configured in Retention RAM or Global RAM. </p>
<p> </p>
<p><b>Note: </b>The DMA will work whenever the DMA access for the LOCAL RAM, </p>
<p>which  is  having  PE  guard  protection  is  enabled  (this  can  be  done  by </p>
<p>configuring the PE guard registers.) </p>
<p> </p>
<p> </p>
<p><b>4.2. </b></p>
<p><b>Preconditions </b></p>
<p> </p>
<p>Following preconditions have to be adhered by the user, for proper </p>
<p>functioning of the SPI Driver Component: </p>
<p> </p>
<p>• </p>
<p>The Spi_Lcfg.c, Spi_PBcfg.c, Spi_Hardware.c,</p>
<p> </p>
<p>Spi_Hardware.h, </p>
<p>Spi_Cbk.h and Spi_Cfg.h files generated by the SPI Driver Component </p>
<p>Code Generation Tool must be compiled and linked along with SPI Driver </p>
<p>Component source files. </p>
<p> </p>
<p>• </p>
<p>The application has to be rebuilt, if there is any change in the Spi_Lcfg.c, </p>
<p>Spi_PBcfg.c, Spi_Hardware.c,</p>
<p> </p>
<p>Spi_Hardware.h,Spi_Cbk.h and Spi_Cfg.h </p>
<p>files generated by the SPI Driver Component Generation Tool. </p>
<p> </p>
<p>• </p>
<p>File Spi_PBcfg.c generated for single configuration set or multiple </p>
<p>configuration sets using SPI Driver Component Generation Tool can be </p>
<p>compiled and linked independently. </p>
<p> </p>
<p>• </p>
<p>The authorization of the user for calling the software triggering of a </p>
<p>hardware reset is not checked in the SPI Driver. This is the responsibility of </p>
<p>the upper layer. </p>
<p> </p>
<p>• </p>
<p>The SPI Driver Component needs to be initialized before accepting any </p>
<p>request. The API Spi_Init should be invoked to initialize SPI Driver </p>
<p>Component. </p>
<p> </p>
<p>• </p>
<p>The  user  should  ensure  that  SPI  Driver  Component  API  requests  are </p>
<p>invoked  in  the  correct  and  expected  sequence  and  with  correct  input </p>
<p>arguments. </p>
<p> </p>
<p>• </p>
<p>Input parameters are validated only when the static configuration </p>
<p>parameter SPI_DEV_ERROR_DETECT is enabled. Application should </p>
<p>ensure that the right parameters are passed while invoking the APIs when </p>
<p>SPI_DEV_ERROR_DETECT is disabled. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Forethoughts                                                                                                                            Chapter 4 </b></p>
<p>23 </p>
<p>• </p>
<p>A mismatch in the version numbers of header and the source files results </p>
<p>in  compilation  error.  User  should  ensure  that  the  correct  versions  of  the </p>
<p>header and the source files are used. </p>
<p> </p>
<p> </p>
<p>• </p>
<p>The ISR functions and the corresponding handler addresses are provided </p>
<p>in Table ISR Handler Addresses. User should ensure that Interrupt Vector </p>
<p>table configuration is done as per the information provided in the table. </p>
<p> </p>
<p>• </p>
<p>The user shall configure the exact Module Short Name Spi in </p>
<p>configurations when reloading, as specified in config.xml file and the same </p>
<p>shall be given in command line. </p>
<p> </p>
<p>• </p>
<p>Within the callback notification functions only following APIs are allowed. </p>
<p> </p>
<p>Spi_ReadIB  </p>
<p>Spi_WriteIB </p>
<p>Spi_SetupEB </p>
<p>Spi_GetJobResult </p>
<p>Spi_GetSequenceResult </p>
<p>Spi_GetHWUnitStatus </p>
<p>Spi_Cancel </p>
<p>All other SPI Handler/Driver API calls are not allowed. </p>
<p> </p>
<p>• </p>
<p>User have the responsibility to enable or disable the critical protection </p>
<p>using the parameter SpiCriticalSectionProtection. By enabling parameter </p>
<p>SpiCriticalSectionProtection, Microcontroller HW registers which suffer </p>
<p>from concurrent access by multiple tasks are protected. </p>
<p> </p>
<p> </p>
<p><b>4.3. </b></p>
<p><b> User Mode and Supervisor Mode </b></p>
<p> </p>
<p>The below table specifies the APIs which can run in user mode, supervisor </p>
<p>mode or both modes: </p>
<p> </p>
<p><b> Table 4-4 </b></p>
<p><b>User Mode and Supervisory Mode </b></p>
<p>  </p>
<p>S</p>
<p>l. </p>
<p>N</p>
<p>o</p>
<p>. </p>
<p>  </p>
<p>API name </p>
<p>Interrupt mode </p>
<p>Polling mode </p>
<p> </p>
<p>Known limitation </p>
<p>in User Mode </p>
<p>user </p>
<p>mode  </p>
<p>supervisor </p>
<p>mode </p>
<p>user </p>
<p>mode </p>
<p>supervisor </p>
<p>mode </p>
<p>1</p>
<p>. </p>
<p>Spi_Init </p>
<p>   - </p>
<p>x </p>
<p>   - </p>
<p>          x </p>
<p>The IMR and INTC </p>
<p>registers are </p>
<p>accessed inside </p>
<p>this function. Hence </p>
<p>it should not be </p>
<p>invoked in User </p>
<p>mode. </p>
<p>2. </p>
<p>Spi_DeInit </p>
<p>- </p>
<p>x </p>
<p>- </p>
<p>x </p>
<p>3. </p>
<p>Spi_WriteIB </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<p>4. </p>
<p>Spi_AsyncTransmit </p>
<p>- </p>
<p>x </p>
<p>- </p>
<p>x </p>
<p>The IMR and INTC </p>
<p>registers are </p>
<p>accessed inside </p>
<p>this function. Hence </p>
<p>it should not be </p>
<p>invoked in User </p>
<p>mode. </p>
<p>5. </p>
<p>Spi_ReadIB </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Chapter 4                                                                                                                           Forethoughts </b></p>
<p>24 </p>
<p>  </p>
<p>S</p>
<p>l. </p>
<p>N</p>
<p>o</p>
<p>. </p>
<p>  </p>
<p>API name </p>
<p>Interrupt mode </p>
<p>Polling mode </p>
<p> </p>
<p>Known limitation </p>
<p>in User Mode </p>
<p>user </p>
<p>mode  </p>
<p>supervisor </p>
<p>mode </p>
<p>user </p>
<p>mode </p>
<p>supervisor </p>
<p>mode </p>
<p>6. </p>
<p>Spi_SetupEB </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<p>7. </p>
<p>Spi_GetStatus </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<p>8. </p>
<p>Spi_GetJobResult </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<p>9. </p>
<p>Spi_GetSequenceResult </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<p>10. </p>
<p>Spi_GetVersionInfo </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<p>11. </p>
<p>Spi_SyncTransmit </p>
<p>- </p>
<p>x </p>
<p>- </p>
<p>x </p>
<p>The IMR and INTC </p>
<p>registers are </p>
<p>accessed inside </p>
<p>this function. Hence </p>
<p>it should not be </p>
<p>invoked in User </p>
<p>mode. </p>
<p>12. </p>
<p>Spi_Cancel </p>
<p>- </p>
<p>x </p>
<p>- </p>
<p>x </p>
<p>The IMR and INTC </p>
<p>registers are </p>
<p>accessed inside </p>
<p>this function. Hence </p>
<p>it should not be </p>
<p>invoked in User </p>
<p>mode. </p>
<p>13. </p>
<p>Spi_SetAsyncMode </p>
<p>- </p>
<p>x </p>
<p>- </p>
<p>x </p>
<p>The IMR and INTC </p>
<p>registers are </p>
<p>accessed inside </p>
<p>this function. Hence </p>
<p>it should not be </p>
<p>invoked in User </p>
<p>mode. </p>
<p>14. </p>
<p>Spi_MainFunction_Handl</p>
<p>ing </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>x </p>
<p>The IMR and INTC </p>
<p>registers are </p>
<p>accessed inside </p>
<p>this function. Hence </p>
<p>it should not be </p>
<p>invoked in User </p>
<p>mode </p>
<p>15. </p>
<p>Spi_GetHWUnitStatus </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<p>16. </p>
<p>Spi_GetErrorInfo </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p>x </p>
<p> </p>
<p>17. </p>
<p>Spi_SelfTest </p>
<p>- </p>
<p>x </p>
<p>- </p>
<p>x </p>
<p>The IMR and </p>
<p>INTC registers </p>
<p>are accessed </p>
<p>inside this </p>
<p>function. Hence it </p>
<p>should not be </p>
<p>invoked in User </p>
<p>mode </p>
<p>18. </p>
<p>All ISRs </p>
<p>- </p>
<p>x </p>
<p>- </p>
<p>- </p>
<p>The IMR and INTC </p>
<p>registers are </p>
<p>accessed inside </p>
<p>this function. Hence </p>
<p>it should not be </p>
<p>invoked in User </p>
<p>mode </p>
<p> </p>
<p>Note: Implementation of Critical Section is not dependent on MCAL. Hence </p>
<p>Critical Section is not considered to the entries for User mode in the above </p>
<p>table. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Forethoughts                                                                                                                            Chapter 4 </b></p>
<p>25 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>4.4. </b></p>
<p><b>Memory modes </b></p>
<p> </p>
<p>The SPI Driver will use different memory modes. The following four modes </p>
<p>can be configured. </p>
<p> </p>
<p><b>Table 4-5 </b></p>
<p><b>HW unit and Memory Mode Selection </b></p>
<p><b> </b></p>
<p><b>HW unit</b></p>
<p> </p>
<p><b>Memory </b></p>
<p><b>mode</b></p>
<p> </p>
<p>CSIH(0-3)</p>
<p> </p>
<p>Direct Access Mode</p>
<p> </p>
<p>FIFO Mode </p>
<p> </p>
<p>Dual Buffer mode </p>
<p> </p>
<p>Transmit Only Mode </p>
<p> </p>
<p><b>4.5. </b></p>
<p><b>Data Consistency </b></p>
<p> </p>
<p>To </p>
<p>support </p>
<p>the </p>
<p>re-entrance </p>
<p>and </p>
<p>interrupt </p>
<p>services, </p>
<p>the </p>
<p>AUTOSAR </p>
<p>SPI </p>
<p>component  will  ensure  the  data  consistency  while  accessing  its  own  RAM </p>
<p>storage </p>
<p>or </p>
<p>hardware </p>
<p>registers. </p>
<p>The </p>
<p>SPI </p>
<p>component </p>
<p>will </p>
<p>use </p>
<p>SchM_Enter_Spi_&lt;Exclusive  Area&gt;  and  SchM_Exit_Spi_&lt;Exclusive  Area&gt; </p>
<p>functions.  The  SchM_Enter_Spi_&lt;Exclusive  Area&gt;  function  is  called  before </p>
<p>the </p>
<p>data </p>
<p>needs </p>
<p>to </p>
<p>be </p>
<p>protected </p>
<p>and </p>
<p>SchM_Exit_Spi_&lt;Exclusive </p>
<p>Area&gt; </p>
<p>function is called after the data is accessed. </p>
<p> </p>
<p>The following exclusive area along with scheduler services is used to provide </p>
<p>data integrity for shared resources: </p>
<p> </p>
<p> </p>
<p>• </p>
<p>RAM_DATA_PROTECTION </p>
<p> </p>
<p>The </p>
<p>functions </p>
<p>SchM_Enter_Spi_&lt;Exclusive </p>
<p>Area&gt; </p>
<p>and </p>
<p>SchM_Exit_Spi_&lt;Exclusive </p>
<p>Area&gt; </p>
<p>can </p>
<p>be </p>
<p>disabled </p>
<p>by </p>
<p>disabling </p>
<p>the </p>
<p>configuration  parameter  'Spi_CriticalSectionProtection'.  The  flowchart  will </p>
<p>indicate the flow with the pre-compile option 'Spi_CriticalSectionProtection' </p>
<p>enabled. </p>
<p> </p>
<p>The information about the API’s and the protected resources by the critical </p>
<p>section are given in the following table. </p>
<p> </p>
<p><b>Table 4-6 </b></p>
<p><b>SPI Driver Critical section protection List </b></p>
<p> </p>
<p> </p>
<p><b>API Name</b></p>
<p> </p>
<p> </p>
<p><b>Exclusive Area Type</b></p>
<p> </p>
<p> </p>
<p><b>Protected </b></p>
<p><b>Resources</b></p>
<p> </p>
<p>Spi_AsyncTransmit</p>
<p> </p>
<p>SPI_RAM_DATA_PROTECTION </p>
<p>During communication the </p>
<p>status of sequence, job, </p>
<p>corresponding hardware unit </p>
<p>and communicating data are </p>
<p>protected.</p>
<p> </p>
<p>Spi_SyncTransmit</p>
<p> </p>
<p>SPI_RAM_DATA_PROTECTION </p>
<p>During communication the </p>
<p>status of sequence, job, </p>
<p>corresponding hardware unit </p>
<p>and communicating data are </p>
<p>protected</p>
<p>. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Chapter 4                                                                                                                           Forethoughts </b></p>
<p>26 </p>
<p> </p>
<p><b>API Name</b></p>
<p> </p>
<p> </p>
<p><b>Exclusive Area Type</b></p>
<p> </p>
<p> </p>
<p><b>Protected </b></p>
<p><b>Resources</b></p>
<p> </p>
<p>Spi_Cancel</p>
<p> </p>
<p>SPI_RAM_DATA_PROTECTION </p>
<p>During cancelling the status </p>
<p>of sequence are protected.</p>
<p> </p>
<p> </p>
<p><b>Note:   </b>The highest measured duration of a critical section was 1.162 micro   </p>
<p>seconds measured for </p>
<p><b>Spi_AsyncTransmit </b></p>
<p>API.  </p>
<p> </p>
<p> </p>
<p><b>4.6. </b></p>
<p><b>Deviation List </b></p>
<p> </p>
<p><b>Table 4-7 </b></p>
<p><b>SPI Driver Deviation List </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>Description</b></p>
<p> </p>
<p><b>AUTOSAR Bugzilla</b></p>
<p> </p>
<p>1</p>
<p> </p>
<p>The parameter </p>
<p>&quot;SpiHwUnitSynchronous&quot; is moved </p>
<p>to SpiJob container from </p>
<p>SpiChannel container.</p>
<p> </p>
<p>48763</p>
<p> </p>
<p>2</p>
<p> </p>
<p>The total number of SPI Hardware </p>
<p>Units is published as </p>
<p>“SPI_MAX_HW_UNIT”.</p>
<p> </p>
<p>24328</p>
<p> </p>
<p>3</p>
<p> </p>
<p>The parameter “SPI_BAUDRATE” </p>
<p>is not used since the value </p>
<p>configured for this parameter </p>
<p>cannot be mapped directly to the </p>
<p>register value. Hence, a parameter </p>
<p>”SpiBaudrateSelection” is used to </p>
<p>select input frequency source.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>4</p>
<p> </p>
<p>The parameter 'SpiTimeClk2Cs' is </p>
<p>not used since the value of this </p>
<p>parameter is configured as count </p>
<p>value. Hence, the parameter </p>
<p>'SpiClk2CsCount' is provided to </p>
<p>configure the wait loop count to add </p>
<p>delay between clock and chip </p>
<p>select.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>5</p>
<p> </p>
<p>Type of the parameter SpiHwUnit is </p>
<p>ENUMERATION-PARAM-DEF with </p>
<p>a list of all possible hardware units.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>6</p>
<p> </p>
<p>The inclusion or deletion of the </p>
<p>hardware units will not be possible </p>
<p>in the post-build time. But the </p>
<p>reassignment of configured HW </p>
<p>unit for different jobs is possible.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>7</p>
<p> </p>
<p>Type of the parameter SpiCs is </p>
<p>ENUMERATION-PARAM-DEF with </p>
<p>a list of all possible port lines.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>8</p>
<p> </p>
<p>If the parameter &quot;DataBufferPtr&quot; </p>
<p>passed through the API </p>
<p>“Spi_ReadIB” is null pointer, then </p>
<p>the error </p>
<p>SPI_E_PARAM_POINTER will be </p>
<p>reported to DET.</p>
<p> </p>
<p>-</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Forethoughts                                                                                                                            Chapter 4 </b></p>
<p>27 </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>Description</b></p>
<p> </p>
<p><b>AUTOSAR Bugzilla</b></p>
<p> </p>
<p>9</p>
<p> </p>
<p>The channel parameters </p>
<p>“SpiChannelType”, “SpiIbNBuffers” </p>
<p>and “SpiEbMaxLength” are pre- </p>
<p>compile time parameters.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>10</p>
<p> </p>
<p>A queue will be implemented and </p>
<p>maintained if there are more than </p>
<p>one sequence is requested for </p>
<p>transmission. The length of the </p>
<p>queue will be number of configured </p>
<p>jobs minus 1.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>11</p>
<p> </p>
<p>If a sequence is requested for </p>
<p>transmission while already one </p>
<p>uninterruptible sequence is on- </p>
<p>going, the requested sequence will </p>
<p>be put on queue.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>12</p>
<p> </p>
<p>The upper and lower multiplicity of </p>
<p>the parameter ‘SpiCsIdentifier’ is ‘1’ </p>
<p>i.e. mandatory and the default </p>
<p>value is NULL. The upper and </p>
<p>lower multiplicity of the parameter </p>
<p>‘SpiEnableCS’ is ‘1’ i.e. mandatory </p>
<p>and the default value is false.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>13</p>
<p> </p>
<p>The parameters SpiMaxChannel, </p>
<p>SpiMaxJob and SpiMaxSequence </p>
<p>in SpiDriverConfiguration is made </p>
<p>as mandatory in the Parameter </p>
<p>Definition File of SPI Driver </p>
<p>Component.</p>
<p> </p>
<p>-</p>
<p> </p>
<p>14 </p>
<p>From the file Lcfg.c only </p>
<p>notification related structure has </p>
<p>been removed.  </p>
<p>As per mantis #8421 </p>
<p>15 </p>
<p>There will be an inactive state in </p>
<p>between Chip Select during </p>
<p>communication, when channel </p>
<p>properties are different. </p>
<p>As per JIRA ARDAAAF-383 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Chapter 4                                                                                                                           Forethoughts </b></p>
<p>28 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Architecture Details                                                             </b></p>
<p><b> </b></p>
<p><b>     Chapter 5 </b></p>
<p>29 </p>
<p><b>Chapter 5 </b></p>
<p><b>Architecture Details </b></p>
<p> </p>
<p> </p>
<p>To minimize the effort and to optimize the reuse of developed software on </p>
<p>different platforms, the SPI driver is split as High Level Driver and Low Level </p>
<p>Driver. The SPI Driver architecture is shown in the following figure: </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>                                          Figure 5-1 </b></p>
<p><b>SPI Driver Architecture </b></p>
<p> </p>
<p>The High Level Driver exports the AUTOSAR API towards upper modules </p>
<p>and it will be designed to allow the compilation for different platforms without </p>
<p>or only slight modifications, i.e. that no reference to specific microcontroller </p>
<p>features or registers will appear in the High Level Driver. All these references </p>
<p>are moved inside a µC specific Low Level Driver. The Low Level Driver </p>
<p>interface extends the High Level Driver types and methods in order to adapt it </p>
<p>to the specific target microcontroller. </p>
<p> </p>
<p><b>SPI Driver component: </b></p>
<p> </p>
<p>The SPI Driver provides services for reading and writing to devices connected </p>
<p>via SPI busses. It provides access to SPI communication to several users like </p>
<p>EEPROM, Watchdog, I /O ASICs. It also provides the required mechanism to </p>
<p>configure the on chip SPI peripheral. </p>
<p> </p>
<p>The SPI Driver component is divided into the following sub modules based on </p>
<p>the functionality required: </p>
<p> </p>
<p>• </p>
<p>Initialization and De-initialization </p>
<p> </p>
<p>• </p>
<p>Buffer Management </p>
<p> </p>
<p>• </p>
<p>Communication </p>
<p> </p>
<p>• </p>
<p>Status information</p>
<p><b>SPI User </b></p>
<p><b>SPI High-level Driver </b></p>
<p><b> (Microcontroller Independent) </b></p>
<p><b>SPI Low Level Driver</b></p>
<p> </p>
<p><b>MICROCONTROLLER</b></p>
<p> </p>
<p><b>CSIH </b></p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 5 </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Architecture Details                                                                                                                </b></p>
<p> </p>
<p>30 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>- </b></p>
<p><b>I nitiali zation </b></p>
<p><b>DeIniti aliza tion </b></p>
<p><b>Buffer </b></p>
<p><b>Management </b></p>
<p><b>Communication </b></p>
<p><b>Not ification </b></p>
<p><b>Stat us Information </b></p>
<p><b>Version Information </b></p>
<p><b>SPI Driver Layer </b></p>
<p> </p>
<p>• </p>
<p>Module version information </p>
<p> </p>
<p>The basic architecture of the SPI Driver component is illustrated in the </p>
<p>following Figure: </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>AP PL I C AT IO N  L A Y ER </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>SP I  H ig h  Le v e l Dr ive r </b></p>
<p> </p>
<p> </p>
<p>S</p>
<p>etting of </p>
<p>HW  </p>
<p>register  </p>
<p>Disabling  </p>
<p>the </p>
<p>interrupts </p>
<p> </p>
<p>De - </p>
<p>initialization </p>
<p>of SPI HW </p>
<p>units </p>
<p> </p>
<p>Transmit and </p>
<p>receive the jobs </p>
<p> and channels </p>
<p>Sequen </p>
<p>ce and </p>
<p>job </p>
<p>notifica </p>
<p>tion </p>
<p> </p>
<p>Return the </p>
<p>status of </p>
<p>module, job,  </p>
<p>sequence </p>
<p> </p>
<p><b>SP I  L ow  Le v e l Dr ive r </b></p>
<p> </p>
<p> </p>
<p><b>           Figure 5-2 </b></p>
<p><b>Component Overview Of SPI Driver Component </b></p>
<p> </p>
<p><b>SPI Driver Initialization and De-Initialization module </b></p>
<p> </p>
<p>This module initializes and de-Initializes the SPI driver. It provides the </p>
<p>Spi_Init() and Spi_DeInit() APIs. The Spi_Init() API should be invoked before </p>
<p>the usage of any other APIs of Watchdog Driver Module.Spi-Init should be </p>
<p>called prior to Port_Init. De-initialization function puts all microcontroller SPI </p>
<p>peripherals in the same state such as Power On Reset. </p>
<p> </p>
<p><b>Buffer Managemen</b>t  </p>
<p> </p>
<p>This module provides the services for reading and writing the internal buffers </p>
<p>and setting up the external buffer. The type of buffer for each channel is </p>
<p>configurable as either internal or external </p>
<p> </p>
<p>The APIs related to this module are Spi_WriteIB(), Spi_ReadIB() and </p>
<p>Spi_SetupEB(). </p>
<p> </p>
<p><b>Communication </b></p>
<p> </p>
<p>This module provides the services for the transmission of data on the SPI bus </p>
<p>both synchronously and asynchronously, cancelling the ongoing transmission </p>
<p>and setting the asynchronous transfer mode. </p>
<p> </p>
<p>The synchronous mode is based on polling mechanism. But for the </p>
<p>asynchronous mode, the possible mechanisms are Polling and Interrupt </p>
<p>mode. One of these modes is selectable during execution by one of the </p>
<p>services provided by this sub-module. </p>
<p> </p>
<p>The APIs related to this module are Spi_SyncTransmit(), </p>
<p>Spi_AsyncTransmit(), Spi_SetAsyncMode() and Spi_Cancel(). </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Architecture Details                                                                                                                Chapter 5 </b></p>
<p>31 </p>
<p><b>Status Information </b></p>
<p> </p>
<p>This module provides the services for getting the status of the SPI Driver and </p>
<p>hardware unit. It also provides the services for getting the result of the </p>
<p>specified job and specified sequence. </p>
<p> </p>
<p>The APIs related to this module are Spi_GetStatus(), </p>
<p>Spi_GetHWUnitStatus(), Spi_GetJobResult() and Spi_GetSequenceResult(). </p>
<p> </p>
<p><b>Module Version Information </b></p>
<p> </p>
<p>This module provides APIs for reading module Id, vendor Id and vendor </p>
<p>specific version numbers. </p>
<p> </p>
<p>The API related to this module is Spi_GetVersionInfo(). </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 5 </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Architecture Details                                                                                                                </b></p>
<p> </p>
<p>32 </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Registers Details                                                                                                                     Chapter 6 </b></p>
<p>33 </p>
<p><b>Chapter 6 </b></p>
<p><b>Registers Details </b></p>
<p> </p>
<p> </p>
<p>This section describes the register details of SPI Driver Component. </p>
<p> </p>
<p><b>Table 6-1    Register Details </b></p>
<p> </p>
<p> </p>
<p><b>API Name </b></p>
<p> </p>
<p><b>Registers </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p> </p>
<p><b>Macro/Variable </b></p>
<p>Spi_Init </p>
<p> CSIHnCTL0 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>SPI_ZERO </p>
<p> DCSTCn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_STR_CLEAR </p>
<p> DCSTn </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> DCENn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DCEN_DISABLE </p>
<p> DSAn </p>
<p>SpiDma </p>
<p>W </p>
<p>LpDmaConfig-</p>
<p>&gt;ulTxRxRegAddress </p>
<p> DTCTn </p>
<p>SpiTxDmaChannel/ </p>
<p>SpiRxDmaChannel </p>
<p>W </p>
<p>SPI_DMA_16BIT_TX_SETTI</p>
<p>NGS </p>
<p>SPI_DMA_16BIT_RX_SETTI</p>
<p>NGS </p>
<p> </p>
<p> DDAn </p>
<p>SpiDma </p>
<p>W </p>
<p>LpDmaConfig-</p>
<p>&gt;ulTxRxRegAddress </p>
<p> DTFRn </p>
<p>SpiTxDmaChannel/ </p>
<p>SpiRxDmaChannel </p>
<p>W </p>
<p>LpDmaConfig-</p>
<p>&gt;usDmaDtfrRegValue </p>
<p> CSIHnCTL1 </p>
<p>SpiCsInactiveAfterLastDat</p>
<p>a, SpiDataWidth </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p> ICRn </p>
<p>- </p>
<p>W </p>
<p>SPI_CLR_INT_REQ </p>
<p> IMRn </p>
<p>SpiHwUnitSelection </p>
<p>and </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p> </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].usRxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pTxImrAddress, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pErrorImrAddress, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].usRxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pTxImrAddress, </p>
<p>LpHWUnitInfo-</p>
<p>&gt;usTxCancelImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pErrorImrAddress </p>
<p> CSIHnTX0W </p>
<p>- </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p> CSIHnSTCR0 </p>
<p>- </p>
<p>W </p>
<p>SPI_CSIH_CLR_STS_FLAG</p>
<p>S </p>
<p> CSIHnSTR0 </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> CSIHnCTL2 </p>
<p>SpiInputClockSelect </p>
<p>SpiBaudrateConfiguration </p>
<p>W </p>
<p>LpJobConfig-&gt;usCtl2Value </p>
<p>&amp; SPI_CSIH_PRE_MASK </p>
<p> CSIHnMCTL0 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>LpJobConfig-&gt;usMCtl0Value </p>
<p> CSIHnBRSy </p>
<p>SpiInputClockSelect </p>
<p>SpiBaudrateConfiguration </p>
<p>W </p>
<p>(LpJobConfigCSConfig-</p>
<p>&gt;usCtl2Value) &amp; </p>
<p>SPI_CSIH_BRS_MASK </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 6 </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Registers Details                                                                                                              </b></p>
<p> </p>
<p>34 </p>
<p> </p>
<p><b>API Name </b></p>
<p> </p>
<p><b>Registers </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p> </p>
<p><b>Macro/Variable </b></p>
<p> CSIHnCFGx </p>
<p>SpiDataWidth </p>
<p>SpiParitySelection </p>
<p>SpiTransferStart </p>
<p>SpiDataShiftEdge </p>
<p>SpiShiftClockIdleLevel </p>
<p> </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p> ECCCSIHnCTL </p>
<p>SpiECCSelfTest </p>
<p>R/W </p>
<p>SET_EC1EDIC_EC2EDIC </p>
<p>ECC_CTL_ECEMF_SET </p>
<p>ECC_CTL_ECER1F_ECER</p>
<p>2F_CLEAR </p>
<p>CTL_ERRCLR_FLAG </p>
<p>CTL_2BIT_ERRCLR_FLAG </p>
<p>CTL_1BIT_ERR_FLAG </p>
<p> ECCCSIHnTMC </p>
<p>SpiECCSelfTest </p>
<p>W </p>
<p>SET_TMC_BITS </p>
<p>SET_TEST_DISABLE </p>
<p> ECCCSIHnTRC </p>
<p>SpiECCSelfTest </p>
<p>W </p>
<p>TRC_ERDB_INITIALIZE </p>
<p> ECCCSIHnTED </p>
<p>SpiECCSelfTest </p>
<p>R/W </p>
<p>RAM_INITIALIZE, </p>
<p>ALL_ZERO_PATTERN, </p>
<p>ALL_ONE_PATTERN, </p>
<p>TWO_BIT_PATTERN </p>
<p> </p>
<p> </p>
<p> </p>
<p> CSIHnRX0H </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> CSIHnMCTL1 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>SPI_CTL_32BIT_REG_VAL </p>
<p> CSIHnMCTL2 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>SPI_CTL_32BIT_REG_VAL </p>
<p> CSIHnMRWP0 </p>
<p>- </p>
<p>RW </p>
<p>LunDataAccess1.ulRegData </p>
<p>Spi_DeInit </p>
<p> CSIHnCTL0 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>SPI_ZERO </p>
<p> CSIHnCTL1 </p>
<p>- </p>
<p>W </p>
<p>SPI_ZERO </p>
<p> CSIHnCTL2 </p>
<p>- </p>
<p>W </p>
<p>SPI_CTL2_16BIT_REG_DEI</p>
<p>NIT </p>
<p> CSIHnMCTL0 </p>
<p>- </p>
<p>W </p>
<p>SPI_MCTL0_16BIT_REG_D</p>
<p>EINIT </p>
<p> CSIHnMCTL1 </p>
<p>- </p>
<p>W </p>
<p>SPI_CTL_32BIT_REG_MAS</p>
<p>K </p>
<p> CSIHnMCTL2 </p>
<p>- </p>
<p>W </p>
<p>SPI_CTL_32BIT_REG_MAS</p>
<p>K </p>
<p> CSIHnSTCR0 </p>
<p>- </p>
<p>W </p>
<p>SPI_CTL_16BIT_REG_DEIN</p>
<p>IT </p>
<p> CSIHnMRWP0 </p>
<p>- </p>
<p>W </p>
<p>SPI_CTL_32BIT_REG_MAS</p>
<p>K </p>
<p> CSIHnBRSy </p>
<p>- </p>
<p>W </p>
<p>SPI_CTL_16BIT_REG_DEIN</p>
<p>IT </p>
<p> DSAn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DEINIT </p>
<p> DDAn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DEINIT </p>
<p> DCENn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DCEN_DISABLE </p>
<p> DTCTn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DEINIT </p>
<p> DTFRRQCn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DRQ_CLEAR </p>
<p> DCSTCn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_STR_CLEAR </p>
<p> DTFRRQn </p>
<p>- </p>
<p>R </p>
<p>- </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Registers Details                                                                                                                     Chapter 6 </b></p>
<p>35 </p>
<p> </p>
<p><b>API Name </b></p>
<p> </p>
<p><b>Registers </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p> </p>
<p><b>Macro/Variable </b></p>
<p> DCSTn </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> DTFRn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DEINIT </p>
<p> CSIHnCFGx </p>
<p> </p>
<p>W </p>
<p>SPI_CTL_32BIT_REG_VAL </p>
<p> IMRn </p>
<p>SpiHwUnitSelection </p>
<p>and </p>
<p>SpiMemoryModeSelection </p>
<p> W </p>
<p> </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].usRxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pTxImrAddress, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pErrorImrAddress, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].usRxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pTxImrAddress, </p>
<p>LpHWUnitInfo-</p>
<p>&gt;usTxCancelImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pErrorImrAddress </p>
<p> ICRn </p>
<p>- </p>
<p>W </p>
<p>SPI_CLR_INT_REQ </p>
<p> CSIHnSTR0 </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p>Spi_WriteIB </p>
<p> CSIHMCTL0 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>LusMctlData </p>
<p>SPI_TX_ONLY_MODE_SET </p>
<p>SPI_DUAL_BUFFER_MOD</p>
<p>E_SET </p>
<p> CSIHnMRWP0 </p>
<p>- </p>
<p>RW </p>
<p>LunDataAccess1.ulRegData </p>
<p> CSIHnTX0W </p>
<p>- </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p>Spi_AsyncTransmit </p>
<p> </p>
<p> </p>
<p> CSIHnMCTL0 </p>
<p>- </p>
<p>W </p>
<p>LpJobConfig-&gt;usMCtl0Value </p>
<p> CSIHnCTL0 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>W </p>
<p>SPI_RESET_PWR </p>
<p>SPI_SET_DIRECT_ACCES</p>
<p>S </p>
<p>SPI_SET_MEMORY_ACCE</p>
<p>SS </p>
<p> CSIHnSTCR0 </p>
<p>- </p>
<p>W </p>
<p>SPI_CLR_STS_FLAGS </p>
<p> CSIHnSTR0 </p>
<p>- </p>
<p>R  </p>
<p>- </p>
<p> CSIHnCTL1 </p>
<p>SpiCsInactiveAfterLastDat</p>
<p>a, SpiDataWidth </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p>LpJobConfig-</p>
<p>&gt;ulMainCtl1Value </p>
<p>SPI_SET_SLIT </p>
<p> DCSTCn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_STR_CLEAR </p>
<p> DCSTn </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> DCENn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DCEN_DISABLE </p>
<p> DTCTn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_FIXED_TX_SETT</p>
<p>INGS </p>
<p>SPI_DMA_INV_TX_SETTIN</p>
<p>GS </p>
<p>LddNoOfBuffers </p>
<p>SPI_DMA_STR_REQ </p>
<p>SPI_DMA_ONCE </p>
<p>SPI_DMA_FIXED_RX_SET</p>
<p>TINGS </p>
<p>SPI_DMA_INV_RX_SETTIN</p>
<p>GS </p>
<p>SPI_DMA_ONCE </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 6 </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Registers Details                                                                                                              </b></p>
<p> </p>
<p>36 </p>
<p> </p>
<p><b>API Name </b></p>
<p> </p>
<p><b>Registers </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p> </p>
<p><b>Macro/Variable </b></p>
<p> DSAn </p>
<p>- </p>
<p>W </p>
<p>(uint32)LpTxData </p>
<p> DTFRn </p>
<p>- </p>
<p>W </p>
<p>(uint32)SPI_ZERO </p>
<p>(uint32)(LpDmaConfig-&gt; </p>
<p>usDmaDtfrRegValue </p>
<p> DCSTSn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_STR </p>
<p> DTCn </p>
<p>- </p>
<p>W </p>
<p>SPI_ONE </p>
<p> DTFRRQCn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DRQ_CLEAR </p>
<p> DDAn </p>
<p>- </p>
<p>W </p>
<p>(uint32)(&amp;Spi_GddDmaRxD</p>
<p>ata) </p>
<p> CSIHnCTL2 </p>
<p>SpiBaudrateRegisterSelect </p>
<p> </p>
<p>W </p>
<p>LpJobConfig-&gt;usCtl2Value </p>
<p> CSIHnMCTL2 </p>
<p>- </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p> CSIHnTX0W </p>
<p>- </p>
<p>W </p>
<p>LunDataAccess1.ulRegData, </p>
<p>LunDataAccess2.ulRegData, </p>
<p>LpDataAccess-&gt;ulRegData  </p>
<p> CSIHnTX0H </p>
<p>- </p>
<p>W </p>
<p>LddData, </p>
<p>LunDataAccess2.usRegData</p>
<p>5[SPI_ZERO] </p>
<p> CSIHnCFGx </p>
<p>SpiCsIdleTiming, </p>
<p>SpiCsHoldTiming, </p>
<p>SpiCsInterDataDelay, </p>
<p>SpiCsSetupTime, </p>
<p>SpiCsIdleEnforcement </p>
<p> </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p> CSIHnBRSy </p>
<p>SpiBaudrateConfiguration </p>
<p>W </p>
<p> </p>
<p>Csih_BaseAddress[LddHWU</p>
<p>nit]-&gt;BRSy </p>
<p> IMRn </p>
<p>SpiHwUnitSelection </p>
<p>and </p>
<p>SpiMemoryModeSelection </p>
<p> </p>
<p>W </p>
<p> </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulRxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulTxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulErrorImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulTxCancelImrMask </p>
<p> ICRn </p>
<p>- </p>
<p>W </p>
<p>SPI_CLR_INT_REQ  </p>
<p> DTFRRQn </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> CSIHnRX0H </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> CSIHnRX0W </p>
<p>- </p>
<p>R </p>
<p> - </p>
<p>Spi_ReadIB </p>
<p> CSIHnRX0W </p>
<p>- </p>
<p>W </p>
<p>LunDataAccess2.ulRegData </p>
<p> CSIHnRX0H </p>
<p>- </p>
<p>W </p>
<p>LunDataAccess2.usRegData</p>
<p>5[SPI_ONE], </p>
<p>LunDataAccess2.usRegData</p>
<p>5[SPI_ZERO] </p>
<p> CSIHnMRWP0 </p>
<p>- </p>
<p>RW </p>
<p>LunDataAccess1.ulRegData </p>
<p>Spi_SetupEB </p>
<p> - </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Spi_GetStatus </p>
<p> - </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Spi_GetJobResult </p>
<p> - </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Spi_GetSequenceRes</p>
<p>ult </p>
<p> - </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Spi_SyncTransmit </p>
<p> CSIHnMCTL0 </p>
<p>- </p>
<p>W </p>
<p>LpJobConfig-&gt;usMCtl0Value </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Registers Details                                                                                                                     Chapter 6 </b></p>
<p>37 </p>
<p> </p>
<p><b>API Name </b></p>
<p> </p>
<p><b>Registers </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p> </p>
<p><b>Macro/Variable </b></p>
<p> CSIHnCTL0 </p>
<p>- </p>
<p>W </p>
<p>W </p>
<p>SPI_RESET_PWR </p>
<p>SPI_SET_DIRECT_ACCES</p>
<p>S </p>
<p>SPI_SET_PWR </p>
<p>SPI_ZERO </p>
<p> CSIHnRX0H </p>
<p>- </p>
<p>RW </p>
<p>LunDataAccess3.ulRegData, </p>
<p>Spi_GusSynDataAccess </p>
<p> CSIHnSTR0 </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> CSIHnSTCR0 </p>
<p>- </p>
<p>W </p>
<p>SPI_DCE_ERR_CLR, </p>
<p>SPI_PE_ERR_CLR, </p>
<p>SPI_OFE_ERR_CLR </p>
<p> CSIHnCTL1 </p>
<p>SpiCsInactiveAfterLastDat</p>
<p>a, SpiDataWidth </p>
<p>W </p>
<p>LunDataAccess1.ulRegData, </p>
<p>(LpMainOsBaseAddr-</p>
<p>&gt;ulMainCTL1 | </p>
<p>~SPI_CSRI_AND_MASK </p>
<p> CSIHnCTL2 </p>
<p>SpiBaudrateRegisterSelect </p>
<p> </p>
<p>W </p>
<p>LunDataAccess1.ulRegData, </p>
<p>LpJobConfig-&gt;usCtl2Value </p>
<p> CSIHnTX0W </p>
<p>- </p>
<p>W </p>
<p>LpJobConfig-&gt;usCtl2Value, </p>
<p>LunDataAccess3.ulRegData </p>
<p> CSIHnBRSy </p>
<p>SpiBaudrateConfiguration </p>
<p>W </p>
<p> </p>
<p>Csih_BaseAddress[LddHWU</p>
<p>nit]-&gt;BRSy , LpJobConfig-</p>
<p>&gt;usCtl2Value &amp; </p>
<p>SPI_CSIH_BRS_MASK </p>
<p> ICRn </p>
<p>- </p>
<p>W </p>
<p>SPI_CLR_INT_REQ </p>
<p> CSIHnCFGx </p>
<p>SpiCsIdleTiming, </p>
<p>SpiCsHoldTiming, </p>
<p>SpiCsInterDataDelay, </p>
<p>SpiCsSetupTime, </p>
<p>SpiCsIdleEnforcement </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p>Spi_GetHWUnitStatus  CSIHnSTR0 </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p>Spi_Cancel </p>
<p> CSIHnCTL0 </p>
<p>- </p>
<p>       R/W </p>
<p>SPI_SET_JOBE </p>
<p> IMRn </p>
<p>- </p>
<p>W </p>
<p>Spi_GstHWUnitInfo[LddHW</p>
<p>Unit].ulTxCancelImrMask </p>
<p> ICRn </p>
<p>- </p>
<p>W </p>
<p>SPI_CLR_INT_REQ  </p>
<p>Spi_SetAsyncMode </p>
<p> IMRn </p>
<p>SpiHwUnitSelection </p>
<p>and </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulRxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulTxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulErrorImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulTxCancelImrMask </p>
<p> ICRn </p>
<p>- </p>
<p>w </p>
<p>SPI_CLR_INT_REQ  </p>
<p>Spi_MainFunction_Ha</p>
<p>ndling </p>
<p> CSIHnCTL0 </p>
<p>- </p>
<p>W </p>
<p>SPI_SET_PWR </p>
<p> CSIHnRX0H </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> CSIHnTX0W </p>
<p>- </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p> CSIHnTX0H </p>
<p>- </p>
<p>W </p>
<p>LddData </p>
<p>LunDataAccess2.usRegData</p>
<p>5[0] </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 6 </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Registers Details                                                                                                              </b></p>
<p> </p>
<p>38 </p>
<p> </p>
<p><b>API Name </b></p>
<p> </p>
<p><b>Registers </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p> </p>
<p><b>Macro/Variable </b></p>
<p> CSIHnRX0W </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> CSIHnMCTL2 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p> ICRn </p>
<p>- </p>
<p> </p>
<p>W </p>
<p> </p>
<p>SPI_CLR_INT_REQ </p>
<p> </p>
<p> DCSTCn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_STR_CLEAR </p>
<p> DCSTn </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> DCENn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DCEN_DISABLE </p>
<p>SPI_DMA_DCEN_ENABLE </p>
<p> DTCTn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_FIXED_TX_SETT</p>
<p>INGS </p>
<p>SPI_DMA_INV_TX_SETTIN</p>
<p>GS </p>
<p>LddNoOfBuffers </p>
<p>SPI_DMA_STR_REQ </p>
<p>SPI_DMA_ONCE </p>
<p>SPI_DMA_FIXED_RX_SET</p>
<p>TINGS </p>
<p>SPI_DMA_INV_RX_SETTIN</p>
<p>GS </p>
<p>SPI_DMA_ONCE </p>
<p> DSAn </p>
<p>- </p>
<p>W </p>
<p>(uint32)LpTxData </p>
<p> DTFRn </p>
<p>- </p>
<p>W </p>
<p>(uint32)SPI_ZERO </p>
<p>(uint32)(LpDmaConfig-&gt; </p>
<p>usDmaDtfrRegValue </p>
<p> DCSTSn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_STR </p>
<p> DTCn </p>
<p>- </p>
<p>W </p>
<p>SPI_ONE </p>
<p> DTFRRQCn </p>
<p>- </p>
<p>W </p>
<p>SPI_DMA_DRQ_CLEAR </p>
<p> DDAn </p>
<p>- </p>
<p>W </p>
<p>(uint32)(&amp;Spi_GddDmaRxD</p>
<p>ata) </p>
<p> CSIHnSTCR0 </p>
<p>- </p>
<p>W </p>
<p>SPI_CLR_STS_FLAGS </p>
<p> CSIHnSTR0 </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p> CSIHnCTL1 </p>
<p>SpiCsInactiveAfterLastDat</p>
<p>a, SpiDataWidth </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p>LpJobConfig-</p>
<p>&gt;ulMainCtl1Value </p>
<p>SPI_SET_SLIT </p>
<p> CSIHnCTL2 </p>
<p>SpiBaudrateRegisterSelect </p>
<p> </p>
<p>W </p>
<p>LpJobConfig-&gt;usCtl2Value </p>
<p> IMRn </p>
<p>SpiHwUnitSelection </p>
<p>and </p>
<p>SpiMemoryModeSelection </p>
<p> </p>
<p>W </p>
<p> </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulRxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulTxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulErrorImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].ulTxCancelImrMask </p>
<p> CSIHnCFGx </p>
<p>SpiCsIdleTiming, </p>
<p>SpiCsHoldTiming, </p>
<p>SpiCsInterDataDelay, </p>
<p>SpiCsSetupTime, </p>
<p>SpiCsIdleEnforcement </p>
<p> </p>
<p>W </p>
<p>LunDataAccess1.ulRegData </p>
<p> CSIHnBRSy </p>
<p>SpiBaudrateConfiguration </p>
<p>W </p>
<p>Csih_BaseAddress[LddHWU</p>
<p>nit]-&gt;BRSy </p>
<p> CSIHnMCTL0 </p>
<p>- </p>
<p>W </p>
<p>LpJobConfig-&gt;usMCtl0Value </p>
<p> DTFRRQn </p>
<p>- </p>
<p>R </p>
<p>- </p>
<p>Spi_GetVersionInfo </p>
<p> - </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Spi_GetErrorInfo </p>
<p> - </p>
<p>- </p>
<p>- </p>
<p>- </p>
<p>Spi_SelfTest </p>
<p> CSIHnRX0H </p>
<p>- </p>
<p>R </p>
<p>- </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  Registers Details                                                                                                                     Chapter 6 </b></p>
<p>39 </p>
<p> </p>
<p><b>API Name </b></p>
<p> </p>
<p><b>Registers </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p> </p>
<p><b>Macro/Variable </b></p>
<p> CSIHnCTL0 </p>
<p>SpiLoopBackSelfTest </p>
<p>W </p>
<p>SPI_SET_DIRECT_ACCES</p>
<p>S </p>
<p>SPI_ZERO </p>
<p> CSIHnCTL1 </p>
<p>SpiLoopBackSelfTest </p>
<p>W </p>
<p>SPI_LOOPBACK_ENABLE </p>
<p>SPI_ZERO  SPI_SET_SLIT </p>
<p>LunDataAccess1.ulRegData </p>
<p> CSIHnCTL2 </p>
<p>SpiLoopBackSelfTest </p>
<p>W </p>
<p>SPI_LOOPBACK_CSIH_CN</p>
<p>TRL2_VALUE </p>
<p>SPI_ZERO </p>
<p>((LpJobConfig-&gt;usCtl2Value) </p>
<p>&amp; SPI_CSIH_PRE_MASK) </p>
<p> CSIHnSTCR0 </p>
<p>SpiLoopBackSelfTest </p>
<p>W </p>
<p>SPI_CSIH_CLR_STS_FLAG</p>
<p>S </p>
<p>SPI_PE_ERR_CLR </p>
<p>SPI_ZERO </p>
<p> CSIHnCFGx </p>
<p>SpiLoopBackSelfTest </p>
<p>W </p>
<p>SPI_LOOPBACK_DLS_SET</p>
<p>TING SPI_ZERO </p>
<p>LunDataAccess1.ulRegData </p>
<p> CSIHnBRSy </p>
<p>SpiLoopBackSelfTest </p>
<p>W </p>
<p>SPI_LOOPBACK_CSIH_BR</p>
<p>S0_VALUE </p>
<p>SPI_ZERO </p>
<p>((LpJobConfigCSConfig-</p>
<p>&gt;usCtl2Value) &amp; </p>
<p>SPI_CSIH_BRS_MASK) </p>
<p> CSIHnTX0W </p>
<p>SpiLoopBackSelfTest </p>
<p>W </p>
<p>SPI_LOOPBACK_DATA </p>
<p>SPI_ZERO </p>
<p> CSIHnSTR0 </p>
<p>SpiLoopBackSelfTest </p>
<p>R </p>
<p>- </p>
<p> ECCCSIHnCTL </p>
<p>SpiECCSelfTest </p>
<p>R/W </p>
<p>SET_EC1EDIC_EC2EDIC </p>
<p>ECC_CTL_ECEMF_SET </p>
<p>ECC_CTL_ECER1F_ECER</p>
<p>2F_CLEAR </p>
<p>CTL_ERRCLR_FLAG </p>
<p>CTL_2BIT_ERRCLR_FLAG </p>
<p>CTL_1BIT_ERR_FLAG </p>
<p> ECCCSIHnTMC </p>
<p>SpiECCSelfTest </p>
<p>W </p>
<p>SET_TMC_BITS </p>
<p>SET_TEST_DISABLE </p>
<p> ECCCSIHnTRC </p>
<p>SpiECCSelfTest </p>
<p>W </p>
<p>TRC_ERDB_INITIALIZE </p>
<p> ECCCSIHnTED </p>
<p>SpiECCSelfTest </p>
<p>R/W </p>
<p>RAM_INITIALIZE, </p>
<p>ALL_ZERO_PATTERN, </p>
<p>ALL_ONE_PATTERN, </p>
<p>TWO_BIT_PATTERN </p>
<p> IMRn </p>
<p>SpiHwUnitSelection </p>
<p>and </p>
<p>SpiLoopBackSelfTest </p>
<p>W </p>
<p> </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].usRxImrMask, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pTxImrAddress, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].pErrorImrAddress, </p>
<p>Spi_GstHWUnitInfo[LddHWU</p>
<p>nit].usRxImrMask, </p>
<p>LpHWUnitInfo-</p>
<p>&gt;usTxCancelImrMask </p>
<p> ICRn </p>
<p>- </p>
<p>W </p>
<p>SPI_CLR_INT_REQ </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 6 </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Registers Details                                                                                                              </b></p>
<p> </p>
<p>40 </p>
<p> </p>
<p><b>API Name </b></p>
<p> </p>
<p><b>Registers </b></p>
<p><b>Config </b></p>
<p><b>Parameter </b></p>
<p><b>Register </b></p>
<p><b>Access </b></p>
<p><b>R/W/RW </b></p>
<p> </p>
<p><b>Macro/Variable </b></p>
<p> CSIHnMCTL0 </p>
<p>SpiMemoryModeSelection </p>
<p>W </p>
<p>LpJobConfig-&gt;usMCtl0Value </p>
<p> </p>
<p> </p>
<p><b>                    </b></p>
<p> </p>
<p> </p>
<p><b>                 </b></p>
<h1 style="page-break-before:always; "></h1>
<p><b>Interaction Between The User And SPI Driver Component </b></p>
<p><b>Chapter 7 </b></p>
<p> </p>
<p>41 </p>
<p> </p>
<p><b>Chapter 7 </b></p>
<p><b>Interaction Between The User And SPI</b></p>
<p><b> </b></p>
<p><b>Driver Component  </b></p>
<p> </p>
<p> </p>
<p>The details of the services supported by the SPI Driver Component to the </p>
<p>upper layers users and the mapping of the channels to the hardware units is </p>
<p>provided in the following sections: </p>
<p> </p>
<p><b>7.1.  Services Provided By SPI Driver Component To The User </b></p>
<p> </p>
<p> </p>
<p>The SPI Driver Component provides the following functions to upper layer: </p>
<p> </p>
<p>• </p>
<p>To provide the required mechanism to configure the on-chip SPI peripheral </p>
<p> </p>
<p>• </p>
<p>To initialize and de-initialize the SPI driver </p>
<p> </p>
<p>• </p>
<p>To read and write to devices connected through SPI buses </p>
<p> </p>
<p>• </p>
<p>To provide the transmission of data on the SPI bus both synchronously and </p>
<p>asynchronously </p>
<p> </p>
<p>• </p>
<p>To cancel an ongoing transmission </p>
<p> </p>
<p>• </p>
<p>To set the asynchronous transfer mode </p>
<p> </p>
<p>• </p>
<p>To get the status of the SPI Driver and hardware unit </p>
<p> </p>
<p>• </p>
<p>To get the result of the specified job and specified sequence </p>
<p> </p>
<p>• </p>
<p>To provide access to SPI communication to several users(for example, </p>
<p>EEPROM, I/O ASICs) </p>
<p> </p>
<p>• </p>
<p>To read the SPI Driver Component version information. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 7                                                         Interaction Between The User And SPI Driver Component </b></p>
<p> </p>
<p>42 </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>SPI Driver Component Header And Source File Description </b></p>
<p><b>Chapter 8 </b></p>
<p> </p>
<p>43 </p>
<p><b>Chapter 8 </b></p>
<p><b>SPI Driver Component Header And </b></p>
<p><b>Source File Description </b></p>
<p> </p>
<p> </p>
<p>This section explains the SPI Driver Component’s source and header files. </p>
<p>These files have to be included in the project application while integrating with </p>
<p>other modules. </p>
<p> </p>
<p>The C header file generated by SPI Driver Generation Tool: </p>
<p> </p>
<p>• </p>
<p>Spi_Cfg.h </p>
<p>• </p>
<p>Spi_Cbk.h </p>
<p>• </p>
<p>Spi_Hardware.h </p>
<p> </p>
<p>The C source file generated by SPI Driver Generation Tool: </p>
<p> </p>
<p>• </p>
<p>Spi_PBcfg.c </p>
<p>• </p>
<p>Spi_Lcfg.c </p>
<p>• </p>
<p>Spi_Hardware.c </p>
<p> </p>
<p>The SPI Driver Component C header files: </p>
<p> </p>
<p>• </p>
<p>Spi_Driver.h </p>
<p>• </p>
<p>Spi_PBTypes.h </p>
<p>• </p>
<p>Spi_LTTypes.h </p>
<p>• </p>
<p>Spi_Ram.h </p>
<p>• </p>
<p>Spi.h </p>
<p>• </p>
<p>Spi_Irq.h </p>
<p>• </p>
<p>Spi_Scheduler.h </p>
<p>• </p>
<p>Spi_Version.h </p>
<p>• </p>
<p>Spi_Types.h </p>
<p>• </p>
<p>Spi_RegWrite.h </p>
<p> </p>
<p>The SPI Driver Component C source files: </p>
<p> </p>
<p>• </p>
<p>Spi_Driver.c </p>
<p>• </p>
<p>Spi.c </p>
<p>• </p>
<p>Spi_Irq.c </p>
<p>• </p>
<p>Spi_Ram.c </p>
<p>• </p>
<p>Spi_Scheduler.c </p>
<p>• </p>
<p>Spi_Version.c </p>
<p> </p>
<p>The Stub C header files: </p>
<p> </p>
<p>• </p>
<p>Compiler.h </p>
<p>• </p>
<p>Compiler_Cfg.h </p>
<p>• </p>
<p>MemMap.h </p>
<p>• </p>
<p>Platform_Types.h </p>
<p>• </p>
<p>rh850_Types.h </p>
<p>• </p>
<p>Det.h </p>
<p>• </p>
<p>Rte.h </p>
<p>• </p>
<p>SchM.h </p>
<p>• </p>
<p>SchM_Spi.h </p>
<p>• </p>
<p>Dem.h </p>
<p>• </p>
<p>Dem_cfg.h </p>
<p> </p>
<p>The description of the SPI Driver Component files is provided in the table </p>
<p>below: </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 8                                                     SPI Driver Component Header And Source File Description </b></p>
<p> </p>
<p>44 </p>
<p><b>Table 8-1 </b></p>
<p><b>Description Of The SPI Driver Component Files </b></p>
<p> </p>
<p><b>File</b></p>
<p> </p>
<p><b>Details</b></p>
<p> </p>
<p>Spi_Cfg.h</p>
<p> </p>
<p>This file is generated by the SPI Driver Component Code Generation Tool for </p>
<p>various SPI Driver component pre-compile time parameters. This file contains </p>
<p>macro definitions for the configuration elements and exclusive areas for data </p>
<p>protection. The macros and the parameters generated will vary with respect to the </p>
<p>configuration in the input XML file.</p>
<p> </p>
<p> </p>
<p>Spi_Cbk.h</p>
<p> </p>
<p>This file is generated by the SPI Driver Component Code Generation Tool for </p>
<p>provision of function prototype Declarations for SPI callback Notification </p>
<p>Functions.</p>
<p> </p>
<p>Spi_Hardware.h </p>
<p>This file contains the #define macros for the hardware registers to be used by the </p>
<p>driver. </p>
<p>Spi_PBcfg.c</p>
<p> </p>
<p>This file contains post-build configuration data. The structures related to channel </p>
<p>configuration, job configuration and sequence configuration are provided in this </p>
<p>file. Data structures will vary with respect to parameters configured.</p>
<p> </p>
<p>Spi_Lcfg.c</p>
<p> </p>
<p>This file contains provision of SPI Link time Parameters. The structures related to </p>
<p>hardware registers are provided in this file. Data structures will vary with respect </p>
<p>to parameters configured.</p>
<p> </p>
<p>Spi_Hardware.c </p>
<p>This file contains the reference objects for the structures of hardware register which </p>
<p>is defined in device header file. </p>
<p>Spi_Driver.h</p>
<p> </p>
<p>This file contains the Function Prototypes that are defined in Spi_Driver.c file.</p>
<p> </p>
<p>Spi_PBTypes.h</p>
<p> </p>
<p>This file contains the data structure definitions of the channel configuration, </p>
<p>job configuration and sequence configuration</p>
<p> </p>
<p>Spi_LTTypes.h</p>
<p> </p>
<p>This file contains the data structure definitions of CSIH hardware registers, Interrupt </p>
<p>control registers, DMA hardware registers, Hardware unit information, DMA unit </p>
<p>information, storing current status of SPI communication, channel for the link time </p>
<p>parameters, function pointer for Callback notification function for Jobs, processing </p>
<p>sequence, storing external buffer attributes, Scheduler and DMA Address.</p>
<p> </p>
<p>Spi_Ram.h</p>
<p> </p>
<p>This file contains the extern declarations for the global variables that are defined in </p>
<p>Spi_Ram.c file and the version information of the file.</p>
<p> </p>
<p>Spi.h</p>
<p> </p>
<p>This file provides extern declarations for all the SPI Driver Component APIs. This </p>
<p>file provides service Ids of APIs, DET Error codes and type definitions for SPI </p>
<p>Driver initialization structure. This header file shall be included in other modules to </p>
<p>use the features of SPI Driver Component.</p>
<p> </p>
<p>Spi_Irq.h</p>
<p> </p>
<p>This file contains the function prototypes that are defined in Spi_Irq.c file.</p>
<p> </p>
<p>Spi_Scheduler.h</p>
<p> </p>
<p>This file contains the function prototypes that are defined in Spi_Scheduler.c file.</p>
<p> </p>
<p>Spi_Types.h</p>
<p> </p>
<p>This file contains the common macro definitions and the data types required </p>
<p>internally by the SPI software component.</p>
<p> </p>
<p>Spi_Version.h</p>
<p> </p>
<p>This file contains the definitions of AUTOSAR version numbers of all modules </p>
<p>that are interfaced to SPI Driver.</p>
<p> </p>
<p>Spi_Driver.c</p>
<p> </p>
<p>This file contains the SPI Low Level Driver code.</p>
<p> </p>
<p>Spi.c</p>
<p> </p>
<p>This file contains the implementation of all APIs.</p>
<p> </p>
<p>Spi_Irq.c</p>
<p> </p>
<p>This file contains the ISR functions for SPI Driver Component.</p>
<p> </p>
<p>Spi_Ram.c</p>
<p> </p>
<p>This file contains the global variables used by SPI Driver Component.</p>
<p> </p>
<p>Spi_Scheduler.c</p>
<p> </p>
<p>This file contains the SPI Scheduler code. This contains function to schedule </p>
<p>the sequences according to the priority of the jobs.</p>
<p> </p>
<p>Spi_Version.c</p>
<p> </p>
<p>This file contains the code for checking version of all modules that are interfaced to </p>
<p>SPI Driver.</p>
<p> </p>
<p>Compiler.h</p>
<p> </p>
<p>This file Provides compiler specific (non-ANSI) keywords. All mappings of keywords, </p>
<p>which are not standardized, and/or compiler specific are placed and organized in this </p>
<p>compiler specific header.</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>SPI Driver Component Header And Source File Description </b></p>
<p><b>Chapter 8 </b></p>
<p> </p>
<p>45 </p>
<p><b>File</b></p>
<p> </p>
<p><b>Details</b></p>
<p> </p>
<p>Compiler_Cfg.h</p>
<p> </p>
<p>This file contains the memory and pointer classes.</p>
<p> </p>
<p>MemMap.h</p>
<p> </p>
<p>This file allows to map variables, constants and code of modules to individual </p>
<p>memory sections. Memory mapping can be modified as per ECU specific </p>
<p>needs.</p>
<p> </p>
<p>Platform_Types.h</p>
<p> </p>
<p>This file provides provision for defining platform and compiler dependent types.</p>
<p> </p>
<p>Spi_RegWrite.h </p>
<p> This file contains macro for register write verify check. </p>
<p> </p>
<p>rh850_Types.h </p>
<p>This file provides macros to perform supervisor mode (SV) write enabled Register </p>
<p>ICxxx and IMR register writing using OR/AND/Direct operation. </p>
<p>Det.h </p>
<p>This file is a stub for DET Component. </p>
<p>Rte.h </p>
<p>This file is a stub for Rte Component. </p>
<p>SchM.h </p>
<p>This file is a stub for Schm Component. </p>
<p>SchM_Spi.h </p>
<p>Header file information for Schm application. </p>
<p> Dem.h</p>
<p> </p>
<p> This file is a stub for DEM component.</p>
<p> </p>
<p>Dem_cfg.h</p>
<p> </p>
<p>This file contains the stub values for Dem_Cfg.h. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 8                                                     SPI Driver Component Header And Source File Description </b></p>
<p> </p>
<p>46 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Generation Tool Guide </b></p>
<p><b>Chapter 9</b></p>
<p> </p>
<p> </p>
<p>47 </p>
<p><b>Chapter 9 </b></p>
<p><b>Generation Tool Guide </b></p>
<p> </p>
<p> </p>
<p>For information on the SPI Driver Component Code Generation Tool, please </p>
<p>refer “R20UT3660EJ0100-AUTOSAR.pdf” document. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>48 </b></p>
<p><b>Chapter 9                                                                                                            Generation Tool Guide</b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Application Programming Interface                                                                                    Chapter 10 </b></p>
<p>49 </p>
<p> </p>
<p><b>Chapter 10 </b></p>
<p><b>Application Programming Interface </b></p>
<p> </p>
<p> </p>
<p>This section explains the Data types and APIs provided by the SPI Driver </p>
<p>Component to the Upper layers. </p>
<p> </p>
<p> </p>
<p><b>10.1. </b></p>
<p><b>Imported Types </b></p>
<p> </p>
<p>This section explains the Data types imported by the SPI Driver Component </p>
<p>and lists its dependency on other modules. </p>
<p> </p>
<p><b>10.1.1. </b></p>
<p><b>Standard Types </b></p>
<p> </p>
<p>In this section all types included from the Std_Types.h are listed: </p>
<p> </p>
<p>• </p>
<p>Std_ReturnType </p>
<p> </p>
<p>• </p>
<p>Std_VersionInfoType </p>
<p> </p>
<p><b>10.1.2. </b></p>
<p><b>Other Module Types </b></p>
<p> </p>
<p>In this chapter all types included from the Dem_types.h are listed: </p>
<p> </p>
<p>• </p>
<p>Dem_EventIdType </p>
<p> </p>
<p>• </p>
<p>Dem_EventStatusType </p>
<p> </p>
<p> </p>
<p><b>10.2. </b></p>
<p><b>Type Definitions </b></p>
<p> </p>
<p>This section explains the type definitions of SPI Driver Component according </p>
<p>to AUTOSAR Specification. </p>
<p> </p>
<p><b>10.2.1. </b></p>
<p><b>Spi_ConfigType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_ConfigType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>Structure</p>
<p> </p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>Implementation Specific</p>
<p> </p>
<p>The   contents   of   the   initialization  </p>
<p>data structure are SPI specific</p>
<p> </p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>This type of the external data structure shall contain the initialization data for the SPI </p>
<p>driver/Handler</p>
<p> </p>
<p> </p>
<p><b>10.2.2. </b></p>
<p><b>Spi_StatusType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_StatusType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>Enumeration</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>SPI_UNINIT</p>
<p> </p>
<p>The SPI Handler/Driver is not initialized or </p>
<p>not usable</p>
<p> </p>
<p>SPI_IDLE</p>
<p> </p>
<p>The SPI Handler/Driver is not </p>
<p>currently transmitting any job</p>
<p> </p>
<p>SPI_BUSY</p>
<p> </p>
<p>The SPI Handler/Driver is performing a SPI </p>
<p>job(transmit)</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>This type defines a range of specific status for SPI Handler/driver</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p>50 </p>
<p> </p>
<p><b>10.2.3. </b></p>
<p><b>Spi_JobResultType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_JobResultType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>Enumeration</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>SPI_JOB_OK</p>
<p> </p>
<p>The last transmission of the job has </p>
<p>been finished successfully</p>
<p> </p>
<p>SPI_JOB_PENDING</p>
<p> </p>
<p>The SPI Handler/Driver is performing a </p>
<p>SPI Job. The meaning of this status is </p>
<p>equal to SPI_BUSY</p>
<p> </p>
<p>SPI_JOB_FAILED</p>
<p> </p>
<p>The last transmission of the job has failed</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>This type defines a range of specific jobs status for SPI Handler/driver</p>
<p> </p>
<p><b>10.2.4. </b></p>
<p><b>Spi_SeqResultType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_SeqResultType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>Enumeration</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>SPI_SEQ_OK</p>
<p> </p>
<p>The last transmission of the Sequence </p>
<p>has been finished successfully</p>
<p> </p>
<p>SPI_SEQ_PENDING</p>
<p> </p>
<p>The SPI Handler/Driver is performing a SPI </p>
<p>Sequence The meaning of this status is </p>
<p>equal to SPI_BUSY</p>
<p> </p>
<p>SPI_SEQ_FAILED</p>
<p> </p>
<p>The last transmission of the Sequence </p>
<p>has failed</p>
<p> </p>
<p>SPI_SEQ_CANCELLED</p>
<p> </p>
<p>The last transmission of the Sequence </p>
<p>has been cancelled by user.</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>This type defines a range of specific sequences status for SPI Handler/driver</p>
<p> </p>
<p> </p>
<p><b>10.2.5. </b></p>
<p><b>Spi_DataType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_DataType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint8,uint16,uint32</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>0 to 255, 0 to 65535, </p>
<p>0 to 4294967296.</p>
<p> </p>
<p>This is implementation specific but not all </p>
<p>values may be valid within the type This type </p>
<p>shall be chosen in order to have the most </p>
<p>efficient implementation on a specific </p>
<p>microcontroller platform</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Type of application data buffer elements</p>
<p> </p>
<p> </p>
<p><b>10.2.6. </b></p>
<p><b>Spi_NumberOfDataType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_NumberOfDataType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint16</p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>0 to 65535</p>
<p> </p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Type for defining the number of data elements of the type Spi_DataType to send </p>
<p>and/or receive by channel</p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Application Programming Interface                                                                                    Chapter 10 </b></p>
<p> </p>
<p>51 </p>
<p> </p>
<p><b>10.2.7. </b></p>
<p><b>Spi_ChannelType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_ChannelType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint8</p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>0 to 255</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Specifies the identification(IdId) for a channel</p>
<p> </p>
<p><b>10.2.8. </b></p>
<p><b>Spi_JobType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_JobType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint16</p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>0 to 65535</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Specifies the identification(Id) for a Job</p>
<p> </p>
<p> </p>
<p><b>10.2.9. </b></p>
<p><b>Spi_SequenceType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_SequenceType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint8</p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>0 to 255</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Specifies the identification(Id) for a sequence of Jobs</p>
<p> </p>
<p> </p>
<p><b>10.2.10. </b></p>
<p><b>Spi_HWUnitType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_HWUnitType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint8</p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>0 to 255</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Specifies the identification(Id) for a SPI Hardware microcontroller peripheral(unit)</p>
<p> </p>
<p> </p>
<p><b>10.2.11. </b></p>
<p><b>Spi_AsyncModeType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_AsyncModeType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>Enumeration</p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>SPI_POLLING_MODE</p>
<p> </p>
<p>The asynchronous mechanism is ensured </p>
<p>by polling, so interrupts related to SPI </p>
<p>busses handled asynchronously are </p>
<p>disabled</p>
<p> </p>
<p>SPI_INTERRUPT_MODE</p>
<p> </p>
<p>Streaming access mode</p>
<p> </p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Specifies the asynchronous mechanism mode for SPI busses handled </p>
<p>asynchronously in LEVEL2.</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p>52 </p>
<p> </p>
<p> </p>
<p>Following are the internal type definitions used by the SPI Driver module. </p>
<p><b>10.2.12. </b></p>
<p><b>Spi_CommErrorType </b></p>
<p> </p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_CommErrorType</p>
<p> </p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>Structure</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Element:</b></p>
<p> </p>
<p><b>Type</b></p>
<p> </p>
<p><b>Name</b></p>
<p> </p>
<p><b>Explanation</b></p>
<p> </p>
<p>Spi_HWErrorsType </p>
<p>ErrorType </p>
<p>This is the type of the    </p>
<p>hardware error.</p>
<p> </p>
<p>Spi_HWUnitType </p>
<p>HwUnit </p>
<p>This is the hardware   </p>
<p>unit in which error is </p>
<p>reported.</p>
<p> </p>
<p>Spi_SequenceType </p>
<p>SeqID </p>
<p>This is the sequence </p>
<p>id for which error is </p>
<p>reported. </p>
<p> </p>
<p>Spi_JobType </p>
<p>JobID </p>
<p>This is the job id for </p>
<p>which error is </p>
<p>reported.</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>This type is used to provide the details regarding the type of hardware errors, hardware </p>
<p>unit, sequence and job in which the errors were reported. </p>
<p> </p>
<p><b>10.2.13. </b></p>
<p><b>Spi_HWErrorsType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_HWErrorsType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>Enumeration</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>SPI_NO_ERROR</p>
<p> </p>
<p>No hardware error has occured. </p>
<p>SPI_OVERRUN_ERROR</p>
<p> </p>
<p>Over Run Error has occured.</p>
<p> </p>
<p>SPI_PARITY_ERROR</p>
<p> </p>
<p>Parity Error has occured.</p>
<p> </p>
<p>SPI_DATA_CONSISTENCY_ERROR</p>
<p> </p>
<p>Data Consistency Error has occured</p>
<p> </p>
<p>SPI_OVERFLOW_ERROR </p>
<p>Over Flow Error has occured </p>
<p>SPI_ECC_1BIT_ERROR </p>
<p>1 Bit ECC Error has occured </p>
<p><b>Description:</b></p>
<p> </p>
<p>This type defines different types of hardware errors in SPI driver.</p>
<p> </p>
<p> </p>
<p><b>10.2.14. </b></p>
<p><b>Spi_SelfTestType </b></p>
<p> </p>
<p><b>Name:</b></p>
<p> </p>
<p>Spi_SelfTestType</p>
<p> </p>
<p><b>Type:</b></p>
<p> </p>
<p>uint8</p>
<p> </p>
<p><b>Range:</b></p>
<p> </p>
<p>0 to 255</p>
<p> </p>
<p><b>Description:</b></p>
<p> </p>
<p>Specifies the type for self-test functionality.</p>
<p> </p>
<p> </p>
<p><b>10.2.15. </b></p>
<p><b>Spi_ReturnStatus </b></p>
<p> </p>
<p><b>Name: </b></p>
<p>Spi_ReturnStatus </p>
<p><b>Type: </b></p>
<p>Enumeration </p>
<p> </p>
<p> </p>
<p><b> Range: </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Range: </b></p>
<p>SPI_SELFTEST_INVALID_MODE </p>
<p>When invalid argument other than </p>
<p>LoopBack_Init/</p>
<p> </p>
<p>LoopBack_Init_RunTime/</p>
<p> </p>
<p>ECC_Init_RunTime/</p>
<p> </p>
<p>ECC_Init are </p>
<p>passed. </p>
<p>SPI_SELFTEST_DRIVERBUSY </p>
<p>When SelfTest API is invoked during any </p>
<p>active transmission, i.e when driver is busy. </p>
<p>SPI_SELFTEST_PASS </p>
<p>SelfTest functionality is successful. </p>
<p>SPI_SELFTEST_FAILED </p>
<p>SelfTest functionality is failed. </p>
<p><b>Description: </b></p>
<p>This type defines the return status of the self-test functionality. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Application Programming Interface                                                                                    Chapter 10 </b></p>
<p> </p>
<p>53 </p>
<p><b>10.3. </b></p>
<p><b>Function Definitions </b></p>
<p> </p>
<p><b>Table 10-1 </b></p>
<p><b>The APIs provided by the SPI Driver Component </b></p>
<p> </p>
<p> </p>
<p><b>SI.No</b></p>
<p> </p>
<p><b>API’s </b></p>
<p> </p>
<p> </p>
<p> </p>
<p><b>    API’s specific</b></p>
<p> </p>
<p>1</p>
<p> </p>
<p>Spi_Init</p>
<p> </p>
<p>-</p>
<p> </p>
<p>2</p>
<p> </p>
<p>Spi_DeInit</p>
<p> </p>
<p>-</p>
<p> </p>
<p>3</p>
<p> </p>
<p>Spi_WriteIB</p>
<p> </p>
<p>-</p>
<p> </p>
<p>4</p>
<p> </p>
<p>Spi_AsyncTransmit</p>
<p> </p>
<p>-</p>
<p> </p>
<p>5</p>
<p> </p>
<p>Spi_ReadIB</p>
<p> </p>
<p>-</p>
<p> </p>
<p>6</p>
<p> </p>
<p>Spi_SetupEB</p>
<p> </p>
<p>-</p>
<p> </p>
<p>7</p>
<p> </p>
<p>Spi_GetStatus</p>
<p> </p>
<p>-</p>
<p> </p>
<p>8</p>
<p> </p>
<p>Spi_GetJobResult</p>
<p> </p>
<p>-</p>
<p> </p>
<p>9</p>
<p> </p>
<p>Spi_GetSequenceResult</p>
<p> </p>
<p>-</p>
<p> </p>
<p>10</p>
<p> </p>
<p>Spi_GetVersionInfo</p>
<p> </p>
<p>-</p>
<p> </p>
<p>11</p>
<p> </p>
<p>Spi_SyncTransmit</p>
<p> </p>
<p>-</p>
<p> </p>
<p>12</p>
<p> </p>
<p>Spi_Cancel</p>
<p> </p>
<p>-</p>
<p> </p>
<p>13</p>
<p> </p>
<p>Spi_SetAsyncMode</p>
<p> </p>
<p>-</p>
<p> </p>
<p>14</p>
<p> </p>
<p>Spi_MainFuncnction_Handling</p>
<p> </p>
<p>-</p>
<p> </p>
<p>15</p>
<p> </p>
<p>Spi_GetHWUnitStatus</p>
<p> </p>
<p>-</p>
<p> </p>
<p>16 </p>
<p>Spi_GetErrorInfo </p>
<p>- </p>
<p>17 </p>
<p>Spi_SelfTest </p>
<p>- </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 10                                                                                   Application Programming Interface </b></p>
<p>54 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Development And Production Errors  </b></p>
<p><b>Chapter 11  </b></p>
<p>55 </p>
<p> </p>
<p><b>Chapter 11 </b></p>
<p><b>Development And Production Errors </b></p>
<p> </p>
<p> </p>
<p>In this section the development errors that are reported by the SPI Driver </p>
<p>Component are tabulated. The development errors will be reported only when </p>
<p>the pre compiler option SpiDevErrorDetect is enabled in the configuration. </p>
<p>The production code errors are not supported by SPI Driver Component. </p>
<p> </p>
<p><b>11.1. </b></p>
<p><b>SPI Driver Component Development Errors </b></p>
<p> </p>
<p> </p>
<p>The following table contains the DET errors that are reported by SPI Driver </p>
<p>Component. These errors are reported to Development Error Tracer Module </p>
<p>when the SPI Driver Component APIs are invoked with wrong input </p>
<p>parameters or without initialization of the driver. </p>
<p> </p>
<p><b>Table 11-1 </b></p>
<p><b>DET Errors Of SPI Driver Component </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>1</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_PARAM_CHANNEL</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_WriteIB, SpiReadIB and Spi_SetupEB</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with invalid channel Id and if incorrect type of </p>
<p>channel </p>
<p>(IB or EB) is used with services.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_PARAM_JOB</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_GetJobResult</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with invalid job Id.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_PARAM_SEQ</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_AsyncTransmit, Spi_GetSequenceResult, Spi_SyncTransmit and Spi_Cancel.</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with invalid sequence Id.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_PARAM_LENGTH</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_SetupEB</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with length greater than the configured length.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>5</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_PARAM_UNIT</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_GetHWUnitStatus</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with invalid hardware unit Id.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>6</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_SEQ_PENDING</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_AsyncTransmit</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked in a wrong sequence.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>7</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_SEQ_IN_PROCESS</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_SyncTransmit, Spi_SelfTest</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked at wrong time.</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 11                                                                                  Development And Production Errors </b></p>
<p>56 </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>8</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_ALREADY_INITIALIZED</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_Init</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API Spi_Init is invoked when the SPI driver is already initialized.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>9</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_INVALID_DATABASE</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_Init</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the API service is invoked with invalid pointer.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>10</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_UNINIT</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_DeInit, Spi_AsyncTransmit, Spi_Cancel,</p>
<p> </p>
<p>Spi_GetStatus,  </p>
<p>Spi_GetHWUnitStatus, Spi_GetJobResult, Spi_GetSequenceResult, Spi_WriteIB, </p>
<p>Spi_ReadIB, Spi_SetupEB, Spi_SyncTransmit, Spi_SetAsyncMode, </p>
<p>Spi_MainFunction_Handling and Spi_GetErrorInfo.</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When the APIs are invoked without the initialization of  SPI Driver Component.</p>
<p> </p>
<p><b>Sl. No. </b></p>
<p><b>11 </b></p>
<p>Error Code </p>
<p>SPI_E_PARAM_POINTER </p>
<p>Related API(s) </p>
<p>  Spi_ReadIB and Spi_GetVersionInfo. </p>
<p>Source of Error </p>
<p> When the API service is invoked with null pointer. </p>
<p> Note: This error code (SPI_E_PARAM_POINTER) is applicable for  Autosar R4.0 </p>
<p>only. </p>
<p><b>Sl. No. </b></p>
<p><b>12 </b></p>
<p>Error Code </p>
<p>SPI_E_PARAM_CONFIG </p>
<p>Related API(s) </p>
<p>Spi_Init </p>
<p>Source of Error </p>
<p>When the API invoked with null config pointer. </p>
<p><b>Sl. No. </b></p>
<p><b>13 </b></p>
<p>Error Code </p>
<p>SPI_E_MAINFUNCTION_HANDLING_INVALIDMODE </p>
<p>Related API(s) </p>
<p>Spi_MainFunction_Handling </p>
<p>Source of Error </p>
<p>When the API invoked in SPI_INTERRUPT_MODE. </p>
<p> </p>
<p> </p>
<p><b>11.2. </b></p>
<p><b>SPI Driver Component Production Errors </b></p>
<p> </p>
<p> </p>
<p>In this section the DEM errors identified in the SPI Driver Component are </p>
<p>listed. SPI Driver Component reports these errors to DEM by invoking </p>
<p>Dem_ReportErrorStatus API. This API is invoked, when the processing of the </p>
<p>given API request fails. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Development And Production Errors  </b></p>
<p><b>Chapter 11  </b></p>
<p>57 </p>
<p> </p>
<p><b>Table 11-2 </b></p>
<p><b>DEM Errors Of SPI Driver Component </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>1</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_HARDWARE_ERROR</p>
<p> </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_Init , Spi_SyncTransmit, Spi_MainFunction_Handling and Spi_SelfTest.</p>
<p> </p>
<p>Source of Error</p>
<p> </p>
<p>When an overrun occurs when the next reception starts without performing a CPU </p>
<p>read of the value of the receive buffer, upon completion of the receive operation.</p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p>Error Code</p>
<p> </p>
<p>SPI_E_DATA_TX_TIMEOUT_FAILURE </p>
<p>Related API(s)</p>
<p> </p>
<p>Spi_SyncTransmit, Spi_Init and Spi_SelfTest. </p>
<p>Source of Error</p>
<p> </p>
<p>When Hardware data transmit timeout error is detected, This error will be reported to </p>
<p>DEM </p>
<p><b>Sl. No. </b></p>
<p><b>3 </b></p>
<p>Error Code </p>
<p>SPI_E_INT_INCONSISTENT </p>
<p>Related API(s) </p>
<p>All ISRs </p>
<p>Source of Error </p>
<p> DemEventParameter which shall be issued when Interrupt consistency error was </p>
<p>detected. </p>
<p><b>Sl. No. </b></p>
<p><b>4 </b></p>
<p>Error Code </p>
<p>SPI_E_ECC_SELFTEST_FAILURE </p>
<p>Related API(s) </p>
<p>Spi_Init and Spi_SelfTest </p>
<p>Source of Error </p>
<p>DemEventParameter which shall be issued when Ecc selft test error was detected. </p>
<p><b>Sl. No. </b></p>
<p><b>5 </b></p>
<p>Error Code </p>
<p>SPI_E_LOOPBACK_SELFTEST_FAILURE </p>
<p>Related API(s) </p>
<p>Spi_Init and Spi_SelfTest </p>
<p>Source of Error </p>
<p>DemEventParameter which shall be issued when loop back self-test error was </p>
<p>detected. </p>
<p><b>Sl. No. </b></p>
<p><b>6 </b></p>
<p>Error Code </p>
<p> SPI_E_REG_WRITE_VERIFY </p>
<p>Related API(s) </p>
<p>All APIs accessing the registers </p>
<p>Source of Error </p>
<p>DemEventParameter which shall be issued when loop back self-test error was </p>
<p>detected. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 11                                                                                  Development And Production Errors </b></p>
<p>58 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Memory Organization </b></p>
<p><b>Chapter 12 </b></p>
<p>59 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>X4</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Chapter 12 </b></p>
<p><b>Memory Organization </b></p>
<p> </p>
<p> </p>
<p> </p>
<p>Following picture depicts a typical memory organization, which must be met </p>
<p>for proper functioning of SPI Driver Component software. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>ROM  Section </b></p>
<p><b>SPI D rive r Component Library / </b></p>
<p><b>Object Files </b></p>
<p><b>R AM  Section </b></p>
<p> </p>
<p> </p>
<p>SPI Driver code related to APIs are placed in this </p>
<p>memory. </p>
<p>X1</p>
<p> </p>
<p>Segment Name: </p>
<p><b>SPI_PUBLIC_CODE_ROM </b></p>
<p>Global RAM of unspecific size required for SPI  </p>
<p>Driver functioning. </p>
<p>Y1 </p>
<p>Segment Name: </p>
<p><b>NOINIT_RAM_UNSPECIFIED </b></p>
<p> </p>
<p>SPI Driver code r elated to internal functions are </p>
<p>placed in this memory </p>
<p>X2 </p>
<p>Segment Name: </p>
<p><b>SPI_PRIVATE_CODE_ROM </b></p>
<p>Global RAM of unspecific size initialized by </p>
<p>Start-Up code. </p>
<p> </p>
<p>Segment Name:  </p>
<p> </p>
<p><b>RAM_UNSPECIFIED </b></p>
<p> </p>
<p>Global 1-bit RAM initialized by SPI Driver. </p>
<p> </p>
<p> </p>
<p>Segment Name:  </p>
<p>Y3 </p>
<p><b>NOINIT_RAM_1BIT </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Tool Genera ted Files</b></p>
<p> </p>
<p> </p>
<p> </p>
<p>The const section (for SPI configuration </p>
<p>Structure) in the file Spi_PBcfg.c is placed in </p>
<p> this memory. </p>
<p>X4 </p>
<p>Segment Name: </p>
<p><b>SPI_CFG_DATA_UNSPECIFIED </b></p>
<p>Globa</p>
<p>l </p>
<p>8-</p>
<p> bit </p>
<p>R</p>
<p> AM  initia</p>
<p>lize</p>
<p>d </p>
<p>b</p>
<p>y  SPI </p>
<p>D</p>
<p> </p>
<p>rive</p>
<p> </p>
<p>r.</p>
<p> </p>
<p> </p>
<p> </p>
<p>Segment </p>
<p>Name</p>
<p>: </p>
<p> </p>
<p>Y4</p>
<p> </p>
<p><b>N</b></p>
<p><b> OIN </b></p>
<p><b>IT</b></p>
<p><b> </b></p>
<p><b>_</b></p>
<p><b> </b></p>
<p><b>RA</b></p>
<p><b> </b></p>
<p><b>M</b></p>
<p><b> </b></p>
<p><b>_8</b></p>
<p><b> </b></p>
<p><b>B</b></p>
<p><b> </b></p>
<p><b>IT</b></p>
<p> </p>
<p> </p>
<p>The const section in the file Spi_Lcfg.c is placed in </p>
<p>this memory.  </p>
<p> </p>
<p> </p>
<p>X5 </p>
<p>Segment Name: </p>
<p> </p>
<p><b>CONST_ROM_UNSPECIFIED </b></p>
<p>Global 16 -bit RAM initialized by SPI Driver. </p>
<p> </p>
<p>Segment Name: </p>
<p><b>NOINIT_RAM_16 BIT</b></p>
<p><b>  </b></p>
<p>Y5</p>
<p> </p>
<p> </p>
<p>           . </p>
<p> </p>
<p>: </p>
<p> </p>
<p>Global RAM of unspecific size required for SPI Driver </p>
<p>functioning. The Generation tool  </p>
<p>X6  </p>
<p>allocates this RAM.  </p>
<p>Y6 </p>
<p> </p>
<p>Segment Name: </p>
<p><b>              SPI_CFG_RAM_UNSPECIFIED </b></p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Figure 12-1  SPI Driver Component Driver Organization </b></p>
<p> </p>
<p> </p>
<p> </p>
<p>SPI Driver code related to ISR functions </p>
<p>are placed in this memory </p>
<p>Segment Name: </p>
<p><b>SPI_FAST_CODE_ROM </b></p>
<p> </p>
<p>X3 </p>
<p>Y2 </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 12                                                                                                            Memory Organization </b></p>
<p> </p>
<p>60 </p>
<p><b>ROM Section (X1, X2, X3, X4, X5 and X6): </b></p>
<p> </p>
<p><b>SPI_PUBLIC_CODE_ROM (X1): </b>API(s) of SPI Driver Component, which can </p>
<p>be located in code memory. </p>
<p> </p>
<p><b>SPI_PRIVATE_CODE_ROM (X2): </b>Internal functions of SPI Driver </p>
<p>Component code that can be located in code memory. </p>
<p> </p>
<p><b>  SPI_FAST_CODE_ROM(X3): </b>SPI Driver code related to ISR  </p>
<p>functions are placed in this memory Segment Name. </p>
<p> </p>
<p><b>SPI_CFG_DATA_UNSPECIFIED </b></p>
<p><b>(X4): </b></p>
<p>This </p>
<p>section </p>
<p>consists </p>
<p>of </p>
<p>SPI </p>
<p>Driver Component constant configuration structures. This can be located </p>
<p>in code memory. </p>
<p> </p>
<p><b>CONST_ROM_UNSPECIFIED (X5): </b>This section consists of SPI Driver </p>
<p>Component constant structures used for function pointers in SPI Driver </p>
<p>Component. This can be located in code memory. </p>
<p> </p>
<p><b>RAM Section (Y1, Y2, Y3, Y4, Y5 and Y6): </b></p>
<p> </p>
<p><b>NOINIT_RAM_UNSPECIFIED (Y1): </b>This section consists of the global RAM </p>
<p>variables that are used internally by SPI Driver Component. This can be </p>
<p>located in data memory. </p>
<p> </p>
<p><b>RAM_UNSPECIFIED (Y2): </b>This section consists of the global RAM variables </p>
<p>of 1-bit size that are initialized by start-up code and used internally by SPI </p>
<p>Driver Component. This can be located in data memory. </p>
<p> </p>
<p><b>NOINIT_RAM_1BIT (Y3): </b>This section consists of the global RAM variables of </p>
<p>1-bit size that are used internally by SPI Driver Component. The specific </p>
<p>sections of respective software components will be merged into this RAM </p>
<p>section accordingly. </p>
<p> </p>
<p><b>NOINIT_RAM_8BIT (Y4): </b>This section consists of the global RAM variables of </p>
<p>8-bit size that are used internally by SPI Driver Component. This can be </p>
<p>located in data memory. </p>
<p> </p>
<p><b>NOINIT_RAM_16BIT (Y5): </b>This section consists of the global RAM variables </p>
<p>of 16-bit size that are used internally by SPI Driver Component. This can be </p>
<p>located in data memory. </p>
<p> </p>
<p><b>SPI_CFG_RAM_UNSPECIFIED (Y6): </b>This section consists of the global </p>
<p>RAM variables that are generated by SPI Driver Component Generation Tool. </p>
<p>This can be located in data memory.</p>
<p>  </p>
<p><b>Remark </b></p>
<p> </p>
<p></p>
<p> </p>
<p>X1, X2, Y1, Y2, Y3, Y4, Y5, Y6 pertain to only SPI Driver Component </p>
<p>and do not include memory occupied by Spi_PBcfg.c or Spi_Lcfg.c file </p>
<p>generated by SPI Driver Component Generation Tool. </p>
<p> </p>
<p></p>
<p> </p>
<p>User  must  ensure  that  none  of  the  memory  areas  overlap  with  each </p>
<p>other. Even ‘debug’ information should not overlap. </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  P1x-C Specific Information </b></p>
<p><b> </b></p>
<p><b>      Chapter 13 </b></p>
<p> </p>
<p>61 </p>
<p><b>Chapter 13 </b></p>
<p><b>P1x-C Specific Information </b></p>
<p> </p>
<p> </p>
<p>P1X-C supports following devices: </p>
<p></p>
<p> </p>
<p>R7F701370A</p>
<p>(CPU1(PE1))</p>
<p>, R7F701371</p>
<p>(CPU1(PE1))</p>
<p>, </p>
<p>R7F701372</p>
<p>(CPU1(PE1))</p>
<p>, R7F701373, R7F701374</p>
<p>.</p>
<p> </p>
<p> </p>
<p><b>13.1. Interaction Between The User And SPI Driver </b></p>
<p><b>Component </b></p>
<p> </p>
<p>The details of the services supported by the SPI Driver Component to </p>
<p>the upper layers users and the mapping of the channels to the </p>
<p>hardware units is provided in the following sections: </p>
<p> </p>
<p><b>13.1.1. ISR Function </b></p>
<p> </p>
<p>The table below provides the list of handler addresses corresponding to </p>
<p>the hardware unit ISR(s) in SPI Driver Component. The user should </p>
<p>configure the ISR functions mentioned below. </p>
<p> </p>
<p><b>Table 13-1  Interrupt Vector Table</b></p>
<p><b> </b></p>
<p><b>Interrupt Source</b></p>
<p> </p>
<p><b>Name of the ISR Function</b></p>
<p> </p>
<p>INTCSIH0IRE</p>
<p> </p>
<p>SPI_CSIH0_TIRE_ISR</p>
<p> </p>
<p>SPI_CSIH0_TIRE_CAT2_ISR</p>
<p> </p>
<p>INTCSIH0IR</p>
<p> </p>
<p>SPI_CSIH0_TIR_ISR</p>
<p> </p>
<p>SPI_CSIH0_TIR_CAT2_ISR</p>
<p> </p>
<p>INTCSIH0IC</p>
<p> </p>
<p>SPI_CSIH0_TIC_ISR</p>
<p> </p>
<p>SPI_CSIH0_TIC_CAT2_ISR</p>
<p> </p>
<p>INTCSIH0IJC</p>
<p> </p>
<p>SPI_CSIH0_TIJC_ISR</p>
<p> </p>
<p>SPI_CSIH0_TIJC_CAT2_ISR</p>
<p> </p>
<p>INTCSIH1IRE</p>
<p> </p>
<p>SPI_CSIH1_TIRE_ISR</p>
<p> </p>
<p>SPI_CSIH1_TIRE_CAT2_ISR</p>
<p> </p>
<p>INTCSIH1IR</p>
<p> </p>
<p>SPI_CSIH1_TIR_ISR</p>
<p> </p>
<p>SPI_CSIH1_TIR_CAT2_ISR</p>
<p> </p>
<p>INTCSIH1IC</p>
<p> </p>
<p>SPI_CSIH1_TIC_ISR</p>
<p> </p>
<p>SPI_CSIH1_TIC_CAT2_ISR</p>
<p> </p>
<p>INTCSIH1IJC</p>
<p> </p>
<p>SPI_CSIH1_TIJC_ISR</p>
<p> </p>
<p>SPI_CSIH1_TIJC_CAT2_ISR</p>
<p> </p>
<p>INTCSIH2IRE</p>
<p> </p>
<p>SPI_CSIH2_TIRE_ISR</p>
<p> </p>
<p>SPI_CSIH2_TIRE_CAT2_ISR</p>
<p> </p>
<p>INTCSIH2IR</p>
<p> </p>
<p>SPI_CSIH2_TIR_ISR</p>
<p> </p>
<p>SPI_CSIH2_TIR_CAT2_ISR</p>
<p> </p>
<p>INTCSIH2IC</p>
<p> </p>
<p>SPI_CSIH2_TIC_ISR</p>
<p> </p>
<p>SPI_CSIH2_TIC_CAT2_ISR</p>
<p> </p>
<p>INTCSIH2IJC</p>
<p> </p>
<p>SPI_CSIH2_TIJC_ISR</p>
<p> </p>
<p>SPI_CSIH2_TIJC_CAT2_ISR</p>
<p> </p>
<p>INTCSIH3IRE</p>
<p> </p>
<p>SPI_CSIH3_TIRE_ISR</p>
<p> </p>
<p>SPI_CSIH3_TIRE_CAT2_ISR</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>   Chapter 13                                                                   </b></p>
<p><b> </b></p>
<p><b>P1x-C Specific Information </b></p>
<p>62 </p>
<p> </p>
<p><b>Interrupt Source</b></p>
<p> </p>
<p><b>Name of the ISR Function</b></p>
<p> </p>
<p>INTCSIH3IR</p>
<p> </p>
<p>SPI_CSIH3_TIR_ISR</p>
<p> </p>
<p>SPI_CSIH3_TIR_CAT2_ISR</p>
<p> </p>
<p>INTCSIH3IC</p>
<p> </p>
<p>SPI_CSIH3_TIC_ISR</p>
<p> </p>
<p>SPI_CSIH3_TIC_CAT2_ISR</p>
<p> </p>
<p>INTCSIH3IJC</p>
<p> </p>
<p>SPI_CSIH3_TIJC_ISR</p>
<p> </p>
<p>SPI_CSIH3_TIJC_CAT2_ISR</p>
<p> </p>
<p>INTDMA00 </p>
<p>SPI_DMA00_ISR </p>
<p>SPI_DMA00_CAT2_ISR </p>
<p>INTDMA01</p>
<p> </p>
<p>SPI_DMA01_ISR </p>
<p>SPI_DMA01_CAT2_ISR </p>
<p>INTDMA02</p>
<p> </p>
<p>SPI_DMA02_ISR </p>
<p>SPI_DMA02_CAT2_ISR </p>
<p>INTDMA03</p>
<p> </p>
<p>SPI_DMA03_ISR </p>
<p>SPI_DMA03_CAT2_ISR </p>
<p>INTDMA04</p>
<p> </p>
<p>SPI_DMA04_ISR </p>
<p>SPI_DMA04_CAT2_ISR </p>
<p>INTDMA05</p>
<p> </p>
<p>SPI_DMA05_ISR </p>
<p>SPI_DMA05_CAT2_ISR </p>
<p>INTDMA06</p>
<p> </p>
<p>SPI_DMA06_ISR </p>
<p>SPI_DMA06_CAT2_ISR </p>
<p>INTDMA07</p>
<p> </p>
<p>SPI_DMA07_ISR </p>
<p>SPI_DMA07_CAT2_ISR </p>
<p>INTDMA08</p>
<p> </p>
<p>SPI_DMA08_ISR </p>
<p>SPI_DMA08_CAT2_ISR </p>
<p>INTDMA09</p>
<p> </p>
<p>SPI_DMA09_ISR </p>
<p>SPI_DMA09_CAT2_ISR </p>
<p>INTDMA10</p>
<p> </p>
<p>SPI_DMA10_ISR </p>
<p>SPI_DMA10_CAT2_ISR </p>
<p>INTDMA11</p>
<p> </p>
<p>SPI_DMA11_ISR </p>
<p>SPI_DMA11_CAT2_ISR </p>
<p>INTDMA12</p>
<p> </p>
<p>SPI_DMA12_ISR </p>
<p>SPI_DMA12_CAT2_ISR </p>
<p>INTDMA13</p>
<p> </p>
<p>SPI_DMA13_ISR </p>
<p>SPI_DMA13_CAT2_ISR </p>
<p>INTDMA14</p>
<p> </p>
<p>SPI_DMA14_ISR </p>
<p>SPI_DMA14_CAT2_ISR </p>
<p>INTDMA15</p>
<p> </p>
<p>SPI_DMA15_ISR </p>
<p>SPI_DMA15_CAT2_ISR </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  P1x-C Specific Information </b></p>
<p><b> </b></p>
<p><b>      Chapter 13 </b></p>
<p> </p>
<p>63 </p>
<p> </p>
<p><b>13.2. Sample Application </b></p>
<p> </p>
<p> </p>
<p>The Sample Application is provided as reference to the user to </p>
<p>understand the method in which the SPI APIs can be invoked from the </p>
<p>application. </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>Figure 13-1  Overview Of SPI Driver Sample Application </b></p>
<p> </p>
<p> </p>
<p><b>13.2.1. Sample Application Structure </b></p>
<p> </p>
<p>The Sample Application of the P1X-C is available in the path </p>
<p>X1X\P1x-C\modules\spi\sample_application </p>
<p> </p>
<p>The Sample Application consists of the following folder structure </p>
<p>X1X\P1x-C\modules\spi\definition\&lt;AUTOSAR_version&gt;\common\      </p>
<p>R403_SPI_P1x-C.arxml </p>
<p>X1X\P1x-C </p>
<p>\modules\spi\sample_application\&lt;SubVariant&gt;\&lt;AUTOSAR_version&gt; </p>
<p>                                                                \src\Spi_Lcfg.c </p>
<p>                                                                \src\Spi_PBcfg.c </p>
<p>                                                                \src\Spi_Hardware.c </p>
<p>                                                                \inc\Spi_Cfg.h </p>
<p>                                                                \inc\Spi_Cbk.h </p>
<p>                                                                \inc\Spi_ Hardware.h </p>
<p>\config\App_SPI_P1x-C_&lt;Device_Name&gt;_Sample.arxml </p>
<p> </p>
<p><b>               Note</b> </p>
<p>For P1x-C &lt;Device_Name&gt; can be 701370A, 701371, 701372, </p>
<p>701373, 701374. </p>
<p> </p>
<p>In the Sample Application all the SPI APIs are invoked in the </p>
<p>following sequence: </p>
<p> </p>
<p>• </p>
<p>The API Spi_Init is invoked with a valid database address for the </p>
<p>proper initialization of the SPI Driver, all the SPI Driver control registers </p>
<p>and RAM variables will get initialized after this API is called. </p>
<p> </p>
<p> </p>
<p>C O M P I L E R  </p>
<p>RH850 Types </p>
<p>Common SPI </p>
<p>sample </p>
<p>application </p>
<p>P1x-C </p>
<p>S P I</p>
<p> </p>
<p>Sample </p>
<p>application </p>
<p>STUB </p>
<p>DEM </p>
<p>ST</p>
<p>UB </p>
<p>D et</p>
<p> </p>
<p>STUB Os </p>
<p>STUB </p>
<p>SchM </p>
<p>STUB </p>
<p>MCU </p>
<p>Generic </p>
<p>AUTOSAR </p>
<h1 style="page-break-before:always; "></h1>
<p><b>   Chapter 13                                                                   </b></p>
<p><b> </b></p>
<p><b>P1x-C Specific Information </b></p>
<p>64 </p>
<p> </p>
<p>• </p>
<p>The  API  Spi_GetVersionInfo  is  invoked  to  get  the  version  of  the  SPI </p>
<p>Driver module with a variable of Std_VersionInfoType, after the call of </p>
<p>this  API  the  passed  parameter  will  get  updated  with  the  SPI  Driver </p>
<p>version details. </p>
<p> </p>
<p>• </p>
<p>The API Spi_GetHWUnitStatus will return the status of the specified </p>
<p>SPI Hardware microcontroller peripheral. </p>
<p> </p>
<p>• </p>
<p>The API Spi_SyncTransmit will transmit data on the SPI bus </p>
<p>synchronously. </p>
<p>• </p>
<p>This module will take the passed parameter and set the SPI Driver </p>
<p>status to SPI_BUSY. Also it sets the sequence result to </p>
<p>SPI_SEQ_PENDING and first job result to SPI_JOB_PENDING and </p>
<p>performs the transmission. </p>
<p> </p>
<p>• </p>
<p>The API Spi_SetAsyncMode will set the asynchronous mechanism </p>
<p>mode for SPI busses handled asynchronously. </p>
<p> </p>
<p>• </p>
<p>The API Spi_MainFunction_Driving is used for Asynchronous </p>
<p>transmission of the sequences in polling mode. This service is should </p>
<p>be invoked in a scheduler loop if the asynchronous transmission mode </p>
<p>is selected as SPI_POLLING_MODE. </p>
<p> </p>
<p>• </p>
<p>The API Spi_Cancel will cancel the specified on-going sequence </p>
<p>transmission without canceling any Job transmission and the SPI </p>
<p>Driver will set the sequence result to SPI_SEQ_CANCELLED. </p>
<p> </p>
<p>• </p>
<p>The API Spi_DeInit is invoked for de-initialization of the all the controls </p>
<p>registers and RAM variables. </p>
<p> </p>
<p>• </p>
<p>The </p>
<p>API </p>
<p>Spi_GetErrorInfo </p>
<p>copies </p>
<p>Hardware </p>
<p>Error </p>
<p>Details </p>
<p>to </p>
<p>User </p>
<p>Buffer. </p>
<p> </p>
<p> </p>
<p><b>13.2.2. Building Sample Application </b></p>
<p> </p>
<p><b>13.2.2.1. Configuration Example </b></p>
<p> </p>
<p> This section contains the typical configuration which is used for measuring  </p>
<p> RAM/ROM consumption, stack depth and throughput details. </p>
<p> <b>Configuration Details</b>:       </p>
<p>  App_SPI_&lt;SubVariant&gt;_&lt;Device_Name&gt;_Sample.arxml. </p>
<p> </p>
<p><b>                Note</b>  For P1x-C &lt;Device_Name&gt; can be 701370A, 701371, 701372,    </p>
<p>701373, 701374. </p>
<p><b>13.2.2.2. Debugging The Sample Application </b></p>
<p><b>                  Remark </b></p>
<p>GNU Make utility version 3.81 or above must be installed </p>
<p>and available in the path as defined by the environment user variable </p>
<p>“GNUMAKE” to complete the build process using the delivered sample </p>
<p>files. </p>
<p> </p>
<p>• </p>
<p>Open a Command window and change the current working directory to </p>
<p>”make” directory present as mentioned in below path: </p>
<p>   “X1X\P1x-C\common_family\make\ghs\&lt;Compiler&gt;” </p>
<p>• </p>
<p>Now execute the batch file SampleApp.bat with following parameters </p>
<p>SampleApp.bat Spi 4.0.3 &lt;Device_name&gt; </p>
<p>• </p>
<p>After this, all the object files, map file and the executable file </p>
<p>App_Spi_P1x-C_Sample.out will be available in the output folder: </p>
<p>(“X1X\P1x-C\modules\spi\sample_application\&lt;SubVariant&gt; </p>
<p>\obj\&lt;Compiler&gt;”) </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  P1x-C Specific Information </b></p>
<p><b> </b></p>
<p><b>      Chapter 13 </b></p>
<p> </p>
<p>65 </p>
<p>• </p>
<p>The executable can be loaded into the debugger and the sample </p>
<p>application can be executed. </p>
<p><b> </b></p>
<p><b>                 Remark </b></p>
<p>Executable files with ‘*.out’ extension can be </p>
<p>downloaded into the target hardware with the help of Green Hills </p>
<p>debugger. </p>
<p> </p>
<p>• </p>
<p>If any configuration changes (only post-build) are made to the ECU </p>
<p>Configuration Description files </p>
<p> </p>
<p>“X1X\P1x-C\modules\spi\sample_application\&lt;SubVariant&gt; </p>
<p>\&lt;AUTOSAR_version&gt;\config\App_SPI_P1X-C_701372_Sample.arxml” </p>
<p> </p>
<p>• </p>
<p>The database alone can be generated by using the following </p>
<p>commands. </p>
<p>make –f App_SPI_P1x-C_Sample.mak generate_spi_config </p>
<p>make –f App_SPI_P1x-C_Sample.mak App_SPI_P1x-C_Sample.s37 </p>
<p> </p>
<p>• </p>
<p>After this, a flash able Motorola S-Record file App_SPI_P1x-</p>
<p>C_Sample.s37 is available in the output folder. </p>
<p> </p>
<p><b>Note: </b>The  &lt;Device_name&gt;  indicates  the  device  to  be  compiled,  which </p>
<p>can be 701370A, 701371, 701372, 701373, 701374 and &lt;SubVariant&gt; </p>
<p>can be P1H-C, P1H-CE, P1M-C.<b>   </b></p>
<p><b>  </b></p>
<p><b>13.3. Memory And Throughput  </b></p>
<p> </p>
<p><b>Typical Configuration </b></p>
<p></p>
<p> </p>
<p>DET OFF </p>
<p></p>
<p> </p>
<p>DMA disabled </p>
<p></p>
<p> </p>
<p>All other Pre-Compile Settings ON </p>
<p></p>
<p> </p>
<p>2 16bit SPI channels </p>
<p>o</p>
<p> </p>
<p>with external buffers </p>
<p>o</p>
<p> </p>
<p>with internal buffers </p>
<p></p>
<p> </p>
<p>2 SPI jobs </p>
<p>o</p>
<p> </p>
<p>CSIH in direct access mode </p>
<p></p>
<p> </p>
<p>2 external devices configured </p>
<p></p>
<p> </p>
<p>SpiLevelDelivered configured as 2 </p>
<p> </p>
<p> </p>
<p><b>13.3.1. ROM/RAM Usage </b></p>
<p> </p>
<p>The details of memory usage for the typical configuration, with DET </p>
<p>disabled as provided in Table 13-2  </p>
<p> </p>
<p><b>Table 13-2  ROM/RAM Details Without DET </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>ROM/RAM</b></p>
<p> </p>
<p><b>Segment Name</b></p>
<p> </p>
<p><b>Size in bytes</b></p>
<p> </p>
<p>1</p>
<p> </p>
<p>ROM</p>
<p> </p>
<p>DEFAULT_CODE_ROM  </p>
<p> </p>
<p>CONST_ROM_UNSPECIFIED </p>
<p> </p>
<p>CONST_ROM_32BIT</p>
<p> </p>
<p>     7782</p>
<p> </p>
<p> </p>
<p>       456 </p>
<p> </p>
<p>         32</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>   Chapter 13                                                                   </b></p>
<p><b> </b></p>
<p><b>P1x-C Specific Information </b></p>
<p>66 </p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>ROM/RAM</b></p>
<p> </p>
<p><b>Segment Name</b></p>
<p> </p>
<p><b>Size in bytes</b></p>
<p> </p>
<p> </p>
<p>2</p>
<p> </p>
<p> </p>
<p>RAM</p>
<p> </p>
<p> </p>
<p>NOINIT_RAM_UNSPECIFIED </p>
<p> </p>
<p>RAM_UNSPECIFIED </p>
<p> </p>
<p>NOINIT_RAM_1BIT </p>
<p> </p>
<p>NOINIT_RAM_8BIT </p>
<p> </p>
<p>NOINIT_RAM_16BIT </p>
<p> </p>
<p>RAM_8BIT</p>
<p> </p>
<p>      </p>
<p>        156 </p>
<p> </p>
<p>        2 </p>
<p> </p>
<p>        8 </p>
<p> </p>
<p>        9 </p>
<p> </p>
<p>        22 </p>
<p> </p>
<p>        2 </p>
<p> </p>
<p> </p>
<p> </p>
<p>The details of memory usage for the typical configuration, with DET </p>
<p>enabled and all other configurations as provided in Table 13-3.  </p>
<p> </p>
<p> </p>
<p><b>Table 13-3  ROM/RAM Details With DET </b></p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p><b>ROM/RAM</b></p>
<p> </p>
<p><b>Segment Name</b></p>
<p> </p>
<p><b>Size in bytes</b></p>
<p> </p>
<p>1</p>
<p> </p>
<p>ROM</p>
<p> </p>
<p>DEFAULT_CODE_ROM  </p>
<p> </p>
<p>CONST_ROM_UNSPECIFIED </p>
<p> </p>
<p>CONST_ROM_32BIT</p>
<p> </p>
<p>8856 </p>
<p> </p>
<p>           456 </p>
<p> </p>
<p>           32</p>
<p> </p>
<p> </p>
<p>2</p>
<p> </p>
<p> </p>
<p>RAM</p>
<p> </p>
<p> </p>
<p>NOINIT_RAM_UNSPECIFIED </p>
<p> </p>
<p>RAM_UNSPECIFIED </p>
<p> </p>
<p>NOINIT_RAM_1BIT </p>
<p> </p>
<p>NOINIT_RAM_8BIT </p>
<p> </p>
<p>NOINIT_RAM_16BIT </p>
<p> </p>
<p>RAM_8BIT</p>
<p> </p>
<p>         </p>
<p>           156 </p>
<p> </p>
<p>            2 </p>
<p> </p>
<p>            8 </p>
<p> </p>
<p>            9 </p>
<p> </p>
<p>            22 </p>
<p> </p>
<p>            2 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>13.3.2. Stack Depth </b></p>
<p> </p>
<p>The worst-case stack depth for Driver Component is 188 bytes for the </p>
<p>typical configuration provided in Section 13.2.2.1.</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>13.3.3. Throughput Details </b></p>
<p> </p>
<p>The throughput details of the APIs for the configuration mentioned in the </p>
<p>Section13.2.2.1 <i>Configuration </i>are provided in this section. The clock </p>
<p>frequency used to measure the throughput is 240 MHz for all APIs. </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>  P1x-C Specific Information </b></p>
<p><b> </b></p>
<p><b>      Chapter 13 </b></p>
<p> </p>
<p>67 </p>
<p><b>Table 13-4  Throughput Details Of The APIs </b></p>
<p> </p>
<p> </p>
<p><b>Sl. No.</b></p>
<p> </p>
<p> </p>
<p><b>API Name</b></p>
<p> </p>
<p><b>Throughput in </b></p>
<p><b>microseconds</b></p>
<p> </p>
<p> </p>
<p><b>Remarks</b></p>
<p> </p>
<p>1</p>
<p> </p>
<p>Spi_Init</p>
<p> </p>
<p>2.137 </p>
<p>-</p>
<p> </p>
<p>2</p>
<p> </p>
<p>Spi_DeInit</p>
<p> </p>
<p>2.500 </p>
<p>-</p>
<p> </p>
<p>3</p>
<p> </p>
<p>Spi_WriteIB</p>
<p> </p>
<p>0.387 </p>
<p>-</p>
<p> </p>
<p>4</p>
<p> </p>
<p>Spi_AsyncTransmit</p>
<p> </p>
<p>5.325 </p>
<p>-</p>
<p> </p>
<p>5</p>
<p> </p>
<p>Spi_ReadIB</p>
<p> </p>
<p>0. 250 </p>
<p>-</p>
<p> </p>
<p>6</p>
<p> </p>
<p>Spi_SetupEB</p>
<p> </p>
<p>0.200 </p>
<p>-</p>
<p> </p>
<p>7</p>
<p> </p>
<p>Spi_GetStatus</p>
<p> </p>
<p>0.620 </p>
<p>-</p>
<p> </p>
<p>8</p>
<p> </p>
<p>Spi_GetJobResult</p>
<p> </p>
<p>0. 620 </p>
<p>-</p>
<p> </p>
<p>9</p>
<p> </p>
<p>Spi_GetSequenceResult</p>
<p> </p>
<p>0. 620 </p>
<p>-</p>
<p> </p>
<p>10</p>
<p> </p>
<p>Spi_GetVersionInfo</p>
<p> </p>
<p>0.100 </p>
<p>-</p>
<p> </p>
<p>11</p>
<p> </p>
<p>Spi_SyncTransmit</p>
<p> </p>
<p>    8.400 </p>
<p>-</p>
<p> </p>
<p>12</p>
<p> </p>
<p>Spi_GetHWUnitStatus</p>
<p> </p>
<p>0.187 </p>
<p>-</p>
<p> </p>
<p>13</p>
<p> </p>
<p>Spi_Cancel</p>
<p> </p>
<p>0.275 </p>
<p>-</p>
<p> </p>
<p>14</p>
<p> </p>
<p>Spi_SetAsyncMode</p>
<p> </p>
<p>1.437 </p>
<p>SPI_POLLING_MODE</p>
<p> </p>
<p>15</p>
<p> </p>
<p>Spi_SetAsyncMode</p>
<p> </p>
<p>0.175 </p>
<p>SPI_INTERRUPT_ MODE</p>
<p> </p>
<p>16</p>
<p> </p>
<p>Spi_MainFunction_Handling</p>
<p> </p>
<p>0.850 </p>
<p>-</p>
<p> </p>
<p>17 </p>
<p>Spi_SelfTest </p>
<p>649.850 </p>
<p>SPI_LOOP_BACK_SELF</p>
<p>_TEST </p>
<p>18 </p>
<p>Spi_SelfTest </p>
<p>32.150 </p>
<p>SPI_ECC_SELF_TEST </p>
<p>19 </p>
<p>Spi_GetErrorInfo </p>
<p>0.125 </p>
<p>- </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>   Chapter 13                                                                   </b></p>
<p><b> </b></p>
<p><b>P1x-C Specific Information </b></p>
<p>68 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Release Details                                                                                                                  Chapter 14</b></p>
<p> </p>
<p>69 </p>
<p><b>Chapter 14 </b></p>
<p><b>Release Details </b></p>
<p> </p>
<p> </p>
<p><b>SPI Driver Software </b></p>
<p> </p>
<p>Version: 2.0.0 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p><b>Chapter 14                                                                                                                  Release Details</b></p>
<p> </p>
<p>70 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p>71 </p>
<p> </p>
<p> </p>
<p><b>Revision History </b></p>
<p> </p>
<p><b>Sl.No.</b></p>
<p> </p>
<p><b>Description</b></p>
<p> </p>
<p><b>Version</b></p>
<p> </p>
<p><b>Date</b></p>
<p> </p>
<p>1.</p>
<p> </p>
<p>Initial Version</p>
<p> </p>
<p>1.0.0</p>
<p> </p>
<p>05-Aug-2015</p>
<p> </p>
<p>2 </p>
<p>Following changes are made: </p>
<p> </p>
<p>1. </p>
<p>Table 4-4 </p>
<p>User Mode and Supervisory Mode</p>
<p> is </p>
<p>updated. </p>
<p>2. </p>
<p>In section 4, Information for 16 bit datawidth selection is </p>
<p>added when DMA is configured. </p>
<p>3. </p>
<p>Table 6-1 Register details, 8bit and 32bit settings when </p>
<p>DMA is configured are removed. </p>
<p>4. </p>
<p>In section 4.6, Information for the limitation for CS </p>
<p>added. </p>
<p>5. </p>
<p>In section 4.2, Note about the user Configuration of </p>
<p>Module Short Name was added. </p>
<p>6. </p>
<p>In section 11.1, new development error </p>
<p>SPI_E_MAINFUNCTION_HANDLING_INVALIDMODE </p>
<p>is added for Spi_MainFunction_Handling API. </p>
<p> </p>
<p>1.0.1 </p>
<p>28-Mar-2016 </p>
<p>3 </p>
<p>Following changes are made: </p>
<p> </p>
<p>1. </p>
<p>Removed Section 13.2, Compiler, Linker and </p>
<p>Assembler. </p>
<p>2. </p>
<p>In section 4.3, Note about entries for User mode </p>
<p>dependency of Critical Section added. </p>
<p>3. </p>
<p>In section 4.5, Critical section details are updated by </p>
<p>adding Table 4-6. </p>
<p>4. </p>
<p>In section 4.1, Note added regarding the DMA access </p>
<p>for local RAM area. </p>
<p>5. </p>
<p>In section 12, Memory Organization is updated by </p>
<p>adding information about </p>
<p>SPI_START_SEC_CODE_FAST. </p>
<p>6. </p>
<p>Section 6, Register access details are updated. </p>
<p>7. </p>
<p>Updated section 13.2.1 Sample Application Structure to </p>
<p>add details about Spi_GetErrorInfo API. </p>
<p>8. </p>
<p>Added Spi_GetErrorInfo API in section 11.1 under </p>
<p>Related API(s) corresponding to the error </p>
<p>SPI_E_UNINIT. </p>
<p>9. </p>
<p>Section 3 updated R number in remarks. </p>
<p>10.  Folder Structure updated in the section 3.1.1. </p>
<p>11.  Table 4-4 User mode and Supervisory mode is updated.  </p>
<p>12.  Section 8 updated for file information. </p>
<p>13.  Section 9 updated for R number. </p>
<p>14.  Table 10-1 updated with API name.    </p>
<p>15.  Memory, Throughput and stack depth Details are </p>
<p>updated in section 13.3. </p>
<p>16.  Release details updated in section 14. </p>
<p>17.  Chapter 13, Added Processor name along with Device </p>
<p>variants. </p>
<p>18.  Figure 12-1  SPI Driver Component Driver Organization </p>
<p>has been updated in Chapter 12. </p>
<p>19.  Removed traces of .one and .html from the section 13.2 </p>
<p>Sample Application. </p>
<p> </p>
<p>1.0.2 </p>
<p>15-Feb-2017 </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>AUTOSAR MCAL R4.0.3 User's Manual </b></p>
<p><b>SPI Driver Component Ver.1.0.2 </b></p>
<p><b>Embedded User's Manual </b></p>
<p> </p>
<p>Publication Date: Rev.1.00, Feb 15, 2017 </p>
<p> </p>
<p>Published by: Renesas Electronics Corporation </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>SALES </b></p>
<p><b>OFFICES</b></p>
<p> </p>
<p>http://www.renesas.com</p>
<p> </p>
<p>Refer  to </p>
<p>&quot;http://www.renesas.com/&quot; </p>
<p>for the latest  and detailed </p>
<p>information.</p>
<p> </p>
<p><b>Renesas Electronics America Inc. </b></p>
<p>2801 Scott Boulevard Santa Clara, CA 95050-2549, U.S.A. </p>
<p>Tel: +1-408-588-6000, Fax: +1-408-588-6130 </p>
<p><b>Renesas Electronics Canada Limited</b></p>
<p><b> </b></p>
<p>9251 Yonge Street, Suite 8309 Richmond Hill, Ontario Canada L4C 9T3 </p>
<p>Tel: +1-905-237-2004 </p>
<p><b>Renesas Electronics Europe Limited </b></p>
<p>Dukes Meadow, Millboard Road, Bourne End, Buckinghamshire, SL8 5FH, U.K </p>
<p>Tel: +44-1628-585-100, Fax: +44-1628-585-900 </p>
<p><b>Renesas Electronics Europe GmbH </b></p>
<p>Arcadiastrasse 10, 40472 Düsseldorf, Germany </p>
<p>Tel: +49-211-6503-0, Fax: +49-211-6503-1327 </p>
<p><b>Renesas Electronics (China) Co., Ltd. </b></p>
<p>Room 1709, Quantum Plaza, No.27 ZhiChunLu Haidian District, Beijing 100191, P.R.China </p>
<p>Tel: +86-10-8235-1155, Fax: +86-10-8235-7679 </p>
<p><b>Renesas Electronics (Shanghai) Co., Ltd. </b></p>
<p>Unit 301, Tower A, Central Towers, 555 Langao Road, Putuo District, Shanghai, P. R. China 200333 </p>
<p>Tel: +86-21-2226-0888, Fax: +86-21-2226-0999 </p>
<p><b>Renesas Electronics Hong Kong Limited</b></p>
<p><b> </b></p>
<p>Unit 1601-1611, 16/F., Tower 2, Grand Century Place, 193 Prince Edward Road West, Mongkok, Kowloon, Hong Kong </p>
<p>Tel: +852-2265-6688, Fax: +852 2886-9022 </p>
<p><b>Renesas Electronics Taiwan Co., Ltd. </b></p>
<p>13F, No. 363, Fu Shing North Road, Taipei 10543, Taiwan </p>
<p>Tel: +886-2-8175-9600, Fax: +886 2-8175-9670 </p>
<p><b>Renesas Electronics Singapore Pte. Ltd. </b></p>
<p>80 Bendemeer Road, Unit #06-02 Hyflux Innovation Centre, Singapore 339949 </p>
<p>Tel: +65-6213-0200, Fax: +65-6213-0300 </p>
<p><b>Renesas Electronics Malaysia Sdn.Bhd. </b></p>
<p>Unit 1207, Block B, Menara Amcorp, Amcorp Trade Centre, No. 18, Jln Persiaran Barat, 46050 Petaling Jaya, Selangor Darul Ehsan, Malaysia </p>
<p>Tel: +60-3-7955-9390, Fax: +60-3-7955-9510 </p>
<p><b>Renesas Electronics India Pvt. Ltd. </b></p>
<p>No.777C, 100 Feet Road, HAL II Stage, Indiranagar, Bangalore, India </p>
<p>Tel: +91-80-67208700, Fax: +91-80-67208777 </p>
<p><b>Renesas Electronics Korea Co., Ltd. </b></p>
<p>12F., 234 Teheran-ro, Gangnam-Gu, Seoul, 135-080, Korea </p>
<p>Tel: +82-2-558-3737, Fax: +82-2-558-5141 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>© 2006-2017 Renesas Electronics Corporation. All rights reserved. </p>
<p>Colophon 4.1 </p>
<h1 style="page-break-before:always; "></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>AUTOSAR MCAL R4.0.3 </p>
<p> </p>
<p>User's Manual </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>R20UT3659EJ0100 </p>
</body>
</html>
{% endraw %}