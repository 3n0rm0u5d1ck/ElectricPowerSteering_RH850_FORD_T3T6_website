---
layout: default
title: TechnicalReference_Com
nav_order: 2
parent: COM
---
{% raw %}
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
     "http://www.w3.org/TR/html4/transitional.dtd">
<html>
<head>

  <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
  <title></title>
  <meta name="generator" content="LibreOffice 24.2.7.2 (Linux)"/>
  <meta name="created" content="00:00:00"/>
  <meta name="changed" content="00:00:00"/>
</head>
<body>
<h1></h1>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p><b>MICROSAR COM </b></p>
<p>Technical Reference </p>
<p> </p>
<p>CFG5 </p>
<p>Version 5.04.00 </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>Authors </p>
<p>Dominik  Biber,  Safiulla  Shakir,  Gunnar  Meiss,  Heiko </p>
<p>Hübler, Markus Bart, Anant Gupta, Büsra Bayrak </p>
<p>Status </p>
<p>Released </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>2 </p>
<p>based on template version 5.6.0 </p>
<p><b>Document Information </b></p>
<p><b>History </b></p>
<p><b>Author </b></p>
<p><b>Date </b></p>
<p><b>Version </b></p>
<p><b>Remarks </b></p>
<p>Safiulla Shakir </p>
<p>Dominik Biber </p>
<p>2012-02-21 </p>
<p>1.00.00 </p>
<p><b>&gt; </b></p>
<p>Adapted to Cfg5 </p>
<p>Dominik Biber </p>
<p>2012-07-19 </p>
<p>2.00.00 </p>
<p>&gt; </p>
<p>Adapted to AUTOSAR 4.0.3 </p>
<p>(ESCAN00058304) </p>
<p>Dominik Biber </p>
<p>2012-12-11 </p>
<p>2.01.00 </p>
<p>&gt; </p>
<p>Added new feature descriptions </p>
<p>&gt; </p>
<p>Invalidation Mechanism </p>
<p>(ESCAN00061795) </p>
<p>&gt; </p>
<p>Signal Reception Filtering </p>
<p>(ESCAN00061805) </p>
<p>&gt; </p>
<p>Signal Status Information </p>
<p>(ESCAN00061799) </p>
<p>Gunnar Meiss </p>
<p>2013-04-04 </p>
<p>2.02.00 </p>
<p>&gt; </p>
<p>AR4-325: Post-Build Loadable </p>
<p>(ESCAN00064360) </p>
<p>Dominik Biber </p>
<p>2013-04-12 </p>
<p>2.02.00 </p>
<p>&gt; </p>
<p>Added new feature Signal Gateway </p>
<p>(ESCAN00064081) </p>
<p>Adapted  </p>
<p>&gt; </p>
<p>Critical Sections (ESCAN00065327) </p>
<p>Dominik Biber </p>
<p>2013-06-20 </p>
<p>3.00.00 </p>
<p>&gt; </p>
<p>Changed prototype description of </p>
<p>Callout Functions (ESCAN00068096) </p>
<p>Dominik Biber </p>
<p>2013-09-03 </p>
<p>3.00.00 </p>
<p>&gt; </p>
<p>Transmission Deadline Monitoring </p>
<p>(ESCAN00070185) </p>
<p>&gt; </p>
<p>Clarified transmission context of signals </p>
<p>and signal groups (ESCAN00070200) </p>
<p>&gt; </p>
<p>Updated limitations of Callout Functions </p>
<p>(ESCAN00067146) </p>
<p>&gt; </p>
<p> Support (ESCAN00070186) </p>
<p>&gt; </p>
<p>Added support for 0-Bit signals </p>
<p>(ESCAN00069728) </p>
<p>Heiko Hübler </p>
<p>2013-09-23 </p>
<p>3.00.00 </p>
<p>&gt; </p>
<p>Added following API descriptions </p>
<p>(ESCAN00070449): </p>
<p>&gt; </p>
<p>Com_TpTxConfirmation </p>
<p>&gt; </p>
<p>Com_CopyTxData </p>
<p>&gt; </p>
<p>Com_TpRxIndication </p>
<p>&gt; </p>
<p>Com_StartOfReception </p>
<p>&gt; </p>
<p>Com_CopyRxData </p>
<p>&gt; </p>
<p>Com_SendDynSignal </p>
<p>&gt; </p>
<p>Com_ReceiveDynSignal </p>
<p>Heiko Hübler </p>
<p>2013-10-02 </p>
<p>3.00.00 </p>
<p>&gt; </p>
<p>Added Chapter Large I-PDUs and </p>
<p>Dynamic length signals </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>3 </p>
<p>based on template version 5.6.0 </p>
<p>(ESCAN00070449) </p>
<p>Heiko Hübler </p>
<p>2014-03-25 </p>
<p>3.01.00 </p>
<p>&gt; </p>
<p>Updated Com_ StartOfReception API </p>
<p>according to ASR4.1.2 </p>
<p>(ESCAN00071922) </p>
<p>Heiko Hübler </p>
<p>2014-04-16 </p>
<p>3.01.00 </p>
<p>&gt; </p>
<p>ESCAN00075083: AR4-710: Support </p>
<p>IPDUGroup relevant API like as ASR3 </p>
<p>API </p>
<p>&gt; </p>
<p>Com_IpduGroupStart </p>
<p>&gt; </p>
<p>Com_IpduGroupStop </p>
<p>&gt; </p>
<p>Com_EnableReceptionDM </p>
<p>&gt; </p>
<p>Com_DisableReceptionDM </p>
<p>Heiko Hübler </p>
<p>2014-04-25 </p>
<p>3.01.00 </p>
<p>&gt; </p>
<p>Added Chapter: Autosar 3 based I-Pdu </p>
<p>Group handling </p>
<p>Markus Bart </p>
<p>2014-06-18 </p>
<p>3.01.00 </p>
<p>&gt; </p>
<p>AR4-601: Support RfC #59936 </p>
<p>(Request Handling) </p>
<p>Heiko Hübler </p>
<p>2014-06-27 </p>
<p>3.01.00 </p>
<p>&gt; </p>
<p>Added chapter 3.1.2 Signal Processing </p>
<p>Heiko Hübler </p>
<p>2014-06-27 </p>
<p>3.01.01 </p>
<p>&gt; </p>
<p>ESCAN00076544: The type of the </p>
<p>parameter &quot;Result&quot; of the APIs  </p>
<p>Com_TpRxIndication and </p>
<p>Com_TpTxConfirmation mismatches </p>
<p>between TechRef and source </p>
<p>Heiko Hübler </p>
<p>2014-11-05 </p>
<p>3.02.00 </p>
<p>&gt; </p>
<p>ESCAN00079371: AR4-698: Post-Build </p>
<p>Selectable (Identity Manager) </p>
<p>Heiko Hübler </p>
<p>2015-05-11 </p>
<p>3.03.00 </p>
<p>&gt; </p>
<p>ESCAN00082938: FEAT-1047: </p>
<p>Gateway Rx signal timeout handling </p>
<p>without update bits [AR4-894] </p>
<p>Heiko Hübler </p>
<p>2015-05-20 </p>
<p>3.03.01 </p>
<p>&gt; </p>
<p>ESCAN00083061: The figure on page </p>
<p>11 is labelled twice. </p>
<p>Anant Gupta </p>
<p>2015-07-15 </p>
<p>4.01.00 </p>
<p>&gt; </p>
<p>ESCAN00084005: FEAT-77: COM </p>
<p>Based Transformer for </p>
<p>CONC_601_SenderReceiverSerializatio</p>
<p>n incl. E2EXf [AR4-829] </p>
<p>Anant Gupta </p>
<p>2015-12-07 </p>
<p>5.00.00 </p>
<p>&gt; </p>
<p>ESCAN00085557: FEAT-1436 </p>
<p>Gateway: Optimization for COM. </p>
<p>&gt; </p>
<p>ESCAN00087097: FEAT-1442 </p>
<p>Gateway: Routing timeout behaviour </p>
<p>Gunnar Meiss </p>
<p>2016-02-25 </p>
<p>5.01.00 </p>
<p>&gt; </p>
<p>ESCAN00088555: FEAT-1631: Trigger </p>
<p>Transmit API with SduLength In/Out </p>
<p>according to ASR4.2.2 </p>
<p>Gunnar Meiss </p>
<p>Anant Gupta </p>
<p>2016-06-05 </p>
<p>5.02.00 </p>
<p>&gt; </p>
<p>ESCAN00090302: FEAT-1688: </p>
<p>SafeBSW Step 4 </p>
<p>Büsra Bayrak </p>
<p>2016-07-13 </p>
<p>5.03.00 </p>
<p>&gt; </p>
<p>ESCAN00090995: FEAT-1818: </p>
<p>ComEnableMDTForCyclicTransmission </p>
<p>Anant Gupta </p>
<p>2016-07-13 </p>
<p>5.03.00 </p>
<p>&gt; </p>
<p>ESCAN00091008: FEAT-1640: </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>4 </p>
<p>based on template version 5.6.0 </p>
<p>&gt; </p>
<p>Notification caching and ISR Lock </p>
<p>Thresholds </p>
<p>Anant Gupta </p>
<p>2016-07-26 </p>
<p>5.03.00 </p>
<p>&gt; </p>
<p>ESCAN00091171: Missing description </p>
<p>of Com_Cot.h </p>
<p>Anant Gupta </p>
<p>2016-08-10 </p>
<p>5.03.01 </p>
<p>&gt; </p>
<p>ESCAN00091398: Update API </p>
<p>description. </p>
<p>Büsra Bayrak </p>
<p>2016-09-28 </p>
<p>5.04.00 </p>
<p>&gt; </p>
<p>ESCAN00092101: FEAT-2002: Support </p>
<p>64 Bit Signal Types for COM according </p>
<p>to ASR 4.2.2 </p>
<p>Anant Gupta </p>
<p>2016-10-26 </p>
<p>5.04.00 </p>
<p>&gt; </p>
<p>ESCAN00092539: FEAT-1890: </p>
<p>Extension of gateway description </p>
<p>routing with shifted copy and update bit </p>
<p>support. </p>
<p>Heiko Hübler </p>
<p>2016-11-07 </p>
<p>5.04.00 </p>
<p>&gt; </p>
<p>ESCAN00092684: Tx Timeout for Cyclic </p>
<p>Messages misses in &quot;Not Supported </p>
<p>AUTOSAR Standard Conform Features&quot; </p>
<p>chapter </p>
<p><b>Reference Documents </b></p>
<p><b>No. </b></p>
<p><b>Source </b></p>
<p><b>Title </b></p>
<p><b>Version </b></p>
<p>[1] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SWS_COM.pdf </p>
<p>4.2.0 </p>
<p>[2] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_SWS_DevelopmentErrorTracer.pdf </p>
<p>3.2.0 </p>
<p>[3] </p>
<p> AUTOSAR </p>
<p>AUTOSAR_TR_BSWModuleList.pdf </p>
<p>1.6.0 </p>
<p>[4] </p>
<p> Vector </p>
<p>TechnicalReference_Asr_Rte.pdf </p>
<p>3.90.00 </p>
<p>[5] </p>
<p> Vector </p>
<p>TechnicalReference_PostBuildLoadable.pdf </p>
<p>1.0.0 </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>We have configured the programs in accordance with your specifications in the </p>
<p>questionnaire. Whereas the programs do support other configurations than the one </p>
<p>specified in your questionnaire, Vector´s release of the programs delivered to your </p>
<p>company is expressly restricted to the configuration you have specified in the </p>
<p>questionnaire. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>5 </p>
<p>based on template version 5.6.0 </p>
<p><b>Contents </b></p>
<p><b>1</b></p>
<p> </p>
<p><b>Component History .................................................................................................... 11</b></p>
<p> </p>
<p><b>2</b></p>
<p> </p>
<p><b>Introduction................................................................................................................. 12</b></p>
<p> </p>
<p>2.1</p>
<p> </p>
<p>Architecture Overview ...................................................................................... 13</p>
<p> </p>
<p><b>3</b></p>
<p> </p>
<p><b>Functional Description ............................................................................................... 15</b></p>
<p> </p>
<p>3.1</p>
<p> </p>
<p>Features .......................................................................................................... 15</p>
<p> </p>
<p>3.1.1</p>
<p> </p>
<p>Signal Types .................................................................................... 16</p>
<p> </p>
<p>3.1.2</p>
<p> </p>
<p>Signal Processing ............................................................................ 17</p>
<p> </p>
<p>3.1.3</p>
<p> </p>
<p>Transmission of a Signal .................................................................. 17</p>
<p> </p>
<p>3.1.4</p>
<p> </p>
<p>Transmission of a Signal Group ....................................................... 19</p>
<p> </p>
<p>3.1.5</p>
<p> </p>
<p>Transmission Mode Selector ............................................................ 21</p>
<p> </p>
<p>3.1.6</p>
<p> </p>
<p>Explicit Transmission Mode State Switch ......................................... 21</p>
<p> </p>
<p>3.1.7</p>
<p> </p>
<p>Transmit Signal Filters ...................................................................... 22</p>
<p> </p>
<p>3.1.8</p>
<p> </p>
<p>Minimum Send Distance of an I-PDU ............................................... 23</p>
<p> </p>
<p>3.1.9</p>
<p> </p>
<p>Minimum Send Distance only for Direct Send Triggers ..................... 23</p>
<p> </p>
<p>3.1.10</p>
<p> </p>
<p>Transmission Deadline Monitoring ................................................... 24</p>
<p> </p>
<p>3.1.11</p>
<p> </p>
<p>Replication of Signal Transmission Requests ................................... 26</p>
<p> </p>
<p>3.1.12</p>
<p> </p>
<p>Reception of a Signal ....................................................................... 28</p>
<p> </p>
<p>3.1.13</p>
<p> </p>
<p>Reception of a Signal Group ............................................................ 28</p>
<p> </p>
<p>3.1.14</p>
<p> </p>
<p>Array-based access of SignalGroups ............................................... 29</p>
<p> </p>
<p>3.1.15</p>
<p> </p>
<p>Dynamic DLC ................................................................................... 30</p>
<p> </p>
<p>3.1.16</p>
<p> </p>
<p>Reception Deadline Monitoring ........................................................ 30</p>
<p> </p>
<p>3.1.17</p>
<p> </p>
<p>Invalidation Mechanism .................................................................... 31</p>
<p> </p>
<p>3.1.18</p>
<p> </p>
<p>Signal Reception Filtering ................................................................ 31</p>
<p> </p>
<p>3.1.19</p>
<p> </p>
<p>Signal Status Information ................................................................. 31</p>
<p> </p>
<p>3.1.20</p>
<p> </p>
<p>Signal Gateway ................................................................................ 32</p>
<p> </p>
<p>3.1.20.1</p>
<p> </p>
<p>Signal routing requirements ........................................... 32</p>
<p> </p>
<p>3.1.20.2</p>
<p> </p>
<p>Routing of signal groups ................................................ 32</p>
<p> </p>
<p>3.1.20.3</p>
<p> </p>
<p>Routing latency for normal Signal Gateway ................... 33</p>
<p> </p>
<p>3.1.20.4</p>
<p> </p>
<p>Gateway routing timeout ................................................ 33</p>
<p> </p>
<p>3.1.21</p>
<p> </p>
<p>Gateway Description Routing ........................................................... 33</p>
<p> </p>
<p>3.1.22</p>
<p> </p>
<p>Large I-PDUs ................................................................................... 34</p>
<p> </p>
<p>3.1.23</p>
<p> </p>
<p>Dynamic length signals .................................................................... 35</p>
<p> </p>
<p>3.1.24</p>
<p> </p>
<p>Com Optimizations ........................................................................... 35</p>
<p> </p>
<p>3.1.24.1</p>
<p> </p>
<p>Critical section threshold loop strategy ........................... 35</p>
<p> </p>
<p>3.1.24.2</p>
<p> </p>
<p>Rx Notification caching .................................................. 37</p>
<p> </p>
<p>3.1.24.3</p>
<p> </p>
<p>Deferred Event Caching ................................................. 37</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>6 </p>
<p>based on template version 5.6.0 </p>
<p>3.1.24.4</p>
<p> </p>
<p>Main Function Timing Domains ...................................... 38</p>
<p> </p>
<p>3.1.24.4.1</p>
<p> </p>
<p>Timebase for Rx-deadline monitoring </p>
<p>handling ..................................................... 39</p>
<p> </p>
<p>3.1.24.4.2</p>
<p> </p>
<p>Timebase for Tx-deadline monitoring </p>
<p>handling ..................................................... 39</p>
<p> </p>
<p>3.1.24.4.3</p>
<p> </p>
<p>Timebase for Tx-cyclic operations .............. 39</p>
<p> </p>
<p>3.1.24.5</p>
<p> </p>
<p>Handle ID ....................................................................... 39</p>
<p> </p>
<p>3.1.24.6</p>
<p> </p>
<p>Autosar 3 based I-Pdu Group handling .......................... 40</p>
<p> </p>
<p>3.2</p>
<p> </p>
<p>Initialization ...................................................................................................... 40</p>
<p> </p>
<p>3.3</p>
<p> </p>
<p>States .............................................................................................................. 41</p>
<p> </p>
<p>3.3.1</p>
<p> </p>
<p>Module States .................................................................................. 41</p>
<p> </p>
<p>3.3.2</p>
<p> </p>
<p>I-PDU States .................................................................................... 42</p>
<p> </p>
<p>3.3.3</p>
<p> </p>
<p>Reception Deadline Monitoring States ............................................. 43</p>
<p> </p>
<p>3.4</p>
<p> </p>
<p>Main Functions ................................................................................................ 44</p>
<p> </p>
<p>3.5</p>
<p> </p>
<p>Error Handling .................................................................................................. 45</p>
<p> </p>
<p>3.5.1</p>
<p> </p>
<p>Development Error Reporting ........................................................... 45</p>
<p> </p>
<p>3.5.2</p>
<p> </p>
<p>Production Code Error Reporting ..................................................... 46</p>
<p> </p>
<p><b>4</b></p>
<p> </p>
<p><b>Integration ................................................................................................................... 47</b></p>
<p> </p>
<p>4.1</p>
<p> </p>
<p>Scope of Delivery ............................................................................................. 47</p>
<p> </p>
<p>4.1.1</p>
<p> </p>
<p>Static Files ....................................................................................... 47</p>
<p> </p>
<p>4.1.2</p>
<p> </p>
<p>Dynamic Files .................................................................................. 47</p>
<p> </p>
<p>4.2</p>
<p> </p>
<p>Critical Sections ............................................................................................... 49</p>
<p> </p>
<p><b>5</b></p>
<p> </p>
<p><b>API Description ........................................................................................................... 51</b></p>
<p> </p>
<p>5.1</p>
<p> </p>
<p>Type Definitions ............................................................................................... 51</p>
<p> </p>
<p>5.2</p>
<p> </p>
<p>Services provided by COM .............................................................................. 52</p>
<p> </p>
<p>5.2.1</p>
<p> </p>
<p>Com_Init .......................................................................................... 52</p>
<p> </p>
<p>5.2.2</p>
<p> </p>
<p>Com_InitMemory .............................................................................. 52</p>
<p> </p>
<p>5.2.3</p>
<p> </p>
<p>Com_DeInit ...................................................................................... 53</p>
<p> </p>
<p>5.2.4</p>
<p> </p>
<p>Com_IpduGroupControl ................................................................... 53</p>
<p> </p>
<p>5.2.5</p>
<p> </p>
<p>Com_ReceptionDMControl .............................................................. 54</p>
<p> </p>
<p>5.2.6</p>
<p> </p>
<p>Com_IpduGroupStart ....................................................................... 54</p>
<p> </p>
<p>5.2.7</p>
<p> </p>
<p>Com_IpduGroupStop ....................................................................... 55</p>
<p> </p>
<p>5.2.8</p>
<p> </p>
<p>Com_EnableReceptionDM ............................................................... 56</p>
<p> </p>
<p>5.2.9</p>
<p> </p>
<p>Com_DisableReceptionDM .............................................................. 56</p>
<p> </p>
<p>5.2.10</p>
<p> </p>
<p>Com_GetConfigurationId ................................................................. 57</p>
<p> </p>
<p>5.2.11</p>
<p> </p>
<p>Com_GetStatus ............................................................................... 57</p>
<p> </p>
<p>5.2.12</p>
<p> </p>
<p>Com_GetVersionInfo ........................................................................ 58</p>
<p> </p>
<p>5.2.13</p>
<p> </p>
<p>Com_TriggerIPDUSend ................................................................... 58</p>
<p> </p>
<p>5.2.14</p>
<p> </p>
<p>Com_TriggerIPDUSendWithMetaData ............................................. 59</p>
<p> </p>
<p>5.2.15</p>
<p> </p>
<p>Com_ClearIpduGroupVector ............................................................ 59</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>7 </p>
<p>based on template version 5.6.0 </p>
<p>5.2.16</p>
<p> </p>
<p>Com_SetIpduGroup ......................................................................... 60</p>
<p> </p>
<p>5.2.17</p>
<p> </p>
<p>Com_ReceiveDynSignal .................................................................. 60</p>
<p> </p>
<p>5.2.18</p>
<p> </p>
<p>Com_ReceiveSignalGroup ............................................................... 61</p>
<p> </p>
<p>5.2.19</p>
<p> </p>
<p>Com_ReceiveSignalGroupArray ...................................................... 62</p>
<p> </p>
<p>5.2.20</p>
<p> </p>
<p>Com_InvalidateSignal ...................................................................... 62</p>
<p> </p>
<p>5.2.21</p>
<p> </p>
<p>Com_InvalidateSignalGroup ............................................................ 63</p>
<p> </p>
<p>5.2.22</p>
<p> </p>
<p>Com_SwitchIpduTxMode ................................................................. 63</p>
<p> </p>
<p>5.2.23</p>
<p> </p>
<p>Com_SendDynSignal ....................................................................... 64</p>
<p> </p>
<p>5.2.24</p>
<p> </p>
<p>Com_SendSignal ............................................................................. 64</p>
<p> </p>
<p>5.2.25</p>
<p> </p>
<p>Com_SendSignalGroup ................................................................... 65</p>
<p> </p>
<p>5.2.26</p>
<p> </p>
<p>Com_SendSignalGroupArray ........................................................... 66</p>
<p> </p>
<p>5.2.27</p>
<p> </p>
<p>Com_MainFunctionRx ...................................................................... 66</p>
<p> </p>
<p>5.2.28</p>
<p> </p>
<p>Com_MainFunctionTx ...................................................................... 67</p>
<p> </p>
<p>5.2.29</p>
<p> </p>
<p>Com_MainFunctionRouteSignals ..................................................... 67</p>
<p> </p>
<p>5.2.30</p>
<p> </p>
<p>Com_ReceiveSignal......................................................................... 68</p>
<p> </p>
<p>5.2.31</p>
<p> </p>
<p>Com_ReceiveShadowSignal ............................................................ 68</p>
<p> </p>
<p>5.2.32</p>
<p> </p>
<p>Com_UpdateShadowSignal ............................................................. 69</p>
<p> </p>
<p>5.2.33</p>
<p> </p>
<p>Com_InvalidateShadowSignal ......................................................... 69</p>
<p> </p>
<p>5.3</p>
<p> </p>
<p>Services used by COM .................................................................................... 70</p>
<p> </p>
<p>5.4</p>
<p> </p>
<p>Callback Functions ........................................................................................... 70</p>
<p> </p>
<p>5.4.1</p>
<p> </p>
<p>Com_RxIndication ............................................................................ 70</p>
<p> </p>
<p>5.4.2</p>
<p> </p>
<p>Com_TxConfirmation ....................................................................... 71</p>
<p> </p>
<p>5.4.3</p>
<p> </p>
<p>Com_TriggerTransmit ...................................................................... 71</p>
<p> </p>
<p>5.4.4</p>
<p> </p>
<p>Com_TpTxConfirmation ................................................................... 72</p>
<p> </p>
<p>5.4.5</p>
<p> </p>
<p>Com_CopyTxData ........................................................................... 73</p>
<p> </p>
<p>5.4.6</p>
<p> </p>
<p>Com_TpRxIndication ........................................................................ 73</p>
<p> </p>
<p>5.4.7</p>
<p> </p>
<p>Com_StartOfReception .................................................................... 74</p>
<p> </p>
<p>5.4.8</p>
<p> </p>
<p>Com_CopyRxData ........................................................................... 75</p>
<p> </p>
<p>5.5</p>
<p> </p>
<p>Configurable Interfaces .................................................................................... 75</p>
<p> </p>
<p>5.5.1</p>
<p> </p>
<p>Notifications ..................................................................................... 75</p>
<p> </p>
<p>5.5.1.1</p>
<p> </p>
<p>Indication Notification ..................................................... 75</p>
<p> </p>
<p>5.5.1.2</p>
<p> </p>
<p>Confirmation Notification ................................................ 76</p>
<p> </p>
<p>5.5.1.3</p>
<p> </p>
<p>Rx Timeout Notification .................................................. 76</p>
<p> </p>
<p>5.5.1.4</p>
<p> </p>
<p>Tx Timeout Notification .................................................. 77</p>
<p> </p>
<p>5.5.1.5</p>
<p> </p>
<p>Error Notification ............................................................ 77</p>
<p> </p>
<p>5.5.1.6</p>
<p> </p>
<p>Invalid Notification .......................................................... 78</p>
<p> </p>
<p>5.5.2</p>
<p> </p>
<p>Callout Functions ............................................................................. 78</p>
<p> </p>
<p>5.5.2.1</p>
<p> </p>
<p>Rx I-Pdu callout function ................................................ 78</p>
<p> </p>
<p>5.5.2.2</p>
<p> </p>
<p>Tx I-Pdu callout function ................................................ 80</p>
<p> </p>
<p><b>6</b></p>
<p> </p>
<p><b>Configuration .............................................................................................................. 82</b></p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>8 </p>
<p>based on template version 5.6.0 </p>
<p>6.1</p>
<p> </p>
<p>Configuration of Post-Build .............................................................................. 82</p>
<p> </p>
<p><b>7</b></p>
<p> </p>
<p><b>AUTOSAR Standard Compliance............................................................................... 83</b></p>
<p> </p>
<p>7.1</p>
<p> </p>
<p>Limitations........................................................................................................ 83</p>
<p> </p>
<p><b>8</b></p>
<p> </p>
<p><b>Glossary and Abbreviations ...................................................................................... 84</b></p>
<p> </p>
<p>8.1</p>
<p> </p>
<p>Glossary .......................................................................................................... 84</p>
<p> </p>
<p>8.2</p>
<p> </p>
<p>Abbreviations ................................................................................................... 84</p>
<p> </p>
<p><b>9</b></p>
<p> </p>
<p><b>Contact ........................................................................................................................ 85</b></p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>9 </p>
<p>based on template version 5.6.0 </p>
<p><b>Illustrations </b></p>
<p>Figure 2-1</p>
<p> </p>
<p>AUTOSAR 4.x Architecture Overview ....................................................... 13</p>
<p> </p>
<p>Figure 2-2</p>
<p> </p>
<p>Interfaces to adjacent modules of the COM .............................................. 14</p>
<p> </p>
<p>Figure 3-1</p>
<p> </p>
<p>Periodic Transmission Mode ..................................................................... 18</p>
<p> </p>
<p>Figure 3-2</p>
<p> </p>
<p>Direct Transmission Mode ........................................................................ 18</p>
<p> </p>
<p>Figure 3-3</p>
<p> </p>
<p>Minimum Delay Time ................................................................................ 23</p>
<p> </p>
<p>Figure 3-4</p>
<p> </p>
<p>Minimum Delay Time with ComEnableMDTForCyclicTransmission == </p>
<p>false .......................................................................................................... 24</p>
<p> </p>
<p>Figure 3-5</p>
<p> </p>
<p>Transmission Deadline Monitoring – Normal Mode ................................... 25</p>
<p> </p>
<p>Figure 3-6</p>
<p> </p>
<p>Transmission Deadline Monitoring – None Mode ...................................... 25</p>
<p> </p>
<p>Figure 3-7</p>
<p> </p>
<p>Replication of Signal Transmission Requests ........................................... 26</p>
<p> </p>
<p>Figure 3-8</p>
<p> </p>
<p>Reception of a periodic signal ................................................................... 28</p>
<p> </p>
<p>Figure 3-9</p>
<p> </p>
<p>Signal routing allows routing of individual signals ..................................... 32</p>
<p> </p>
<p>Figure 3-10</p>
<p> </p>
<p>Main Function Timing Domains ................................................................. 38</p>
<p> </p>
<p>Figure 3-11</p>
<p> </p>
<p>Module State Machine .............................................................................. 41</p>
<p> </p>
<p>Figure 3-12</p>
<p> </p>
<p>I-PDU State Machine ................................................................................ 42</p>
<p> </p>
<p>Figure 3-13</p>
<p> </p>
<p>Reception Deadline Monitoring State Machine ......................................... 43</p>
<p> </p>
<p><b> </b></p>
<p><b>Tables </b></p>
<p>Table 1-1 </p>
<p> </p>
<p>Component history.................................................................................... 11</p>
<p> </p>
<p>Table 3-1 </p>
<p> </p>
<p>Supported AUTOSAR standard conform features ..................................... 15</p>
<p> </p>
<p>Table 3-2 </p>
<p> </p>
<p>Not supported AUTOSAR standard conform features ............................... 16</p>
<p> </p>
<p>Table 3-3 </p>
<p> </p>
<p>Gateway mapping processing context ...................................................... 34</p>
<p> </p>
<p>Table 3-4 </p>
<p> </p>
<p>Configurable Thresholds ........................................................................... 37</p>
<p> </p>
<p>Table 3-5 </p>
<p> </p>
<p>Main functions that have to be called cyclically ......................................... 44</p>
<p> </p>
<p>Table 3-6 </p>
<p> </p>
<p>Service IDs ............................................................................................... 46</p>
<p> </p>
<p>Table 3-7 </p>
<p> </p>
<p>Errors reported to DET ............................................................................. 46</p>
<p> </p>
<p>Table 4-1 </p>
<p> </p>
<p>Static files ................................................................................................. 47</p>
<p> </p>
<p>Table 4-2 </p>
<p> </p>
<p>Generated files ......................................................................................... 48</p>
<p> </p>
<p>Table 4-3 </p>
<p> </p>
<p>Overview of used Exclusive Area per Com API ......................................... 50</p>
<p> </p>
<p>Table 5-1 </p>
<p> </p>
<p>Type definitions ......................................................................................... 51</p>
<p> </p>
<p>Table 5-2 </p>
<p> </p>
<p>Com_Init ................................................................................................... 52</p>
<p> </p>
<p>Table 5-3 </p>
<p> </p>
<p>Com_InitMemory ...................................................................................... 53</p>
<p> </p>
<p>Table 5-4 </p>
<p> </p>
<p>Com_DeInit .............................................................................................. 53</p>
<p> </p>
<p>Table 5-5 </p>
<p> </p>
<p>Com_IpduGroupControl ............................................................................ 54</p>
<p> </p>
<p>Table 5-6 </p>
<p> </p>
<p>Com_ReceptionDMControl ....................................................................... 54</p>
<p> </p>
<p>Table 5-7 </p>
<p> </p>
<p>Com_IpduGroupStart ................................................................................ 55</p>
<p> </p>
<p>Table 5-8 </p>
<p> </p>
<p>Com_IpduGroupStop ................................................................................ 55</p>
<p> </p>
<p>Table 5-9 </p>
<p> </p>
<p>Com_EnableReceptionDM ....................................................................... 56</p>
<p> </p>
<p>Table 5-10 </p>
<p> </p>
<p>Com_DisableReceptionDM ....................................................................... 57</p>
<p> </p>
<p>Table 5-11 </p>
<p> </p>
<p>Com_GetConfigurationId .......................................................................... 57</p>
<p> </p>
<p>Table 5-12 </p>
<p> </p>
<p>Com_GetStatus ........................................................................................ 58</p>
<p> </p>
<p>Table 5-13 </p>
<p> </p>
<p>Com_GetVersionInfo ................................................................................ 58</p>
<p> </p>
<p>Table 5-14 </p>
<p> </p>
<p>Com_TriggerIPDUSend ............................................................................ 59</p>
<p> </p>
<p>Table 5-15 </p>
<p> </p>
<p>Com_TriggerIPDUSendWithMetaData ...................................................... 59</p>
<p> </p>
<p>Table 5-16 </p>
<p> </p>
<p>Com_ClearIpduGroupVector ..................................................................... 60</p>
<p> </p>
<p>Table 5-17 </p>
<p> </p>
<p>Com_SetIpduGroup .................................................................................. 60</p>
<p> </p>
<p>Table 5-18 </p>
<p> </p>
<p>Com_ReceiveDynSignal ........................................................................... 61</p>
<p> </p>
<p>Table 5-19 </p>
<p> </p>
<p>Com_ReceiveSignalGroup ....................................................................... 62</p>
<p> </p>
<p>Table 5-20 </p>
<p> </p>
<p>Com_ReceiveSignalGroupArray ............................................................... 62</p>
<p> </p>
<p>Table 5-21 </p>
<p> </p>
<p>Com_InvalidateSignal ............................................................................... 63</p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>10 </p>
<p>based on template version 5.6.0 </p>
<p>Table 5-22 </p>
<p> </p>
<p>Com_InvalidateSignalGroup ..................................................................... 63</p>
<p> </p>
<p>Table 5-23 </p>
<p> </p>
<p>Com_SwitchIpduTxMode .......................................................................... 64</p>
<p> </p>
<p>Table 5-24 </p>
<p> </p>
<p>Com_SendDynSignal ............................................................................... 64</p>
<p> </p>
<p>Table 5-25 </p>
<p> </p>
<p>Com_SendSignal ...................................................................................... 65</p>
<p> </p>
<p>Table 5-26 </p>
<p> </p>
<p>Com_SendSignalGroup ............................................................................ 65</p>
<p> </p>
<p>Table 5-27 </p>
<p> </p>
<p>Com_SendSignalGroupArray ................................................................... 66</p>
<p> </p>
<p>Table 5-28 </p>
<p> </p>
<p>Com_MainFunctionRx .............................................................................. 67</p>
<p> </p>
<p>Table 5-29 </p>
<p> </p>
<p>Com_MainFunctionTx ............................................................................... 67</p>
<p> </p>
<p>Table 5-30 </p>
<p> </p>
<p>Com_MainFunctionRouteSignals .............................................................. 68</p>
<p> </p>
<p>Table 5-31 </p>
<p> </p>
<p>Com_ReceiveSignal ................................................................................. 68</p>
<p> </p>
<p>Table 5-32 </p>
<p> </p>
<p>Com_ReceiveShadowSignal .................................................................... 69</p>
<p> </p>
<p>Table 5-33 </p>
<p> </p>
<p>Com_UpdateShadowSignal ...................................................................... 69</p>
<p> </p>
<p>Table 5-34 </p>
<p> </p>
<p>Com_InvalidateShadowSignal .................................................................. 70</p>
<p> </p>
<p>Table 5-35 </p>
<p> </p>
<p>Services used by the COM ....................................................................... 70</p>
<p> </p>
<p>Table 5-36 </p>
<p> </p>
<p>Com_RxIndication .................................................................................... 71</p>
<p> </p>
<p>Table 5-37 </p>
<p> </p>
<p>Com_TxConfirmation ................................................................................ 71</p>
<p> </p>
<p>Table 5-38 </p>
<p> </p>
<p>Com_TriggerTransmit ............................................................................... 72</p>
<p> </p>
<p>Table 5-39 </p>
<p> </p>
<p>Com_TpTxConfirmation ............................................................................ 72</p>
<p> </p>
<p>Table 5-40 </p>
<p> </p>
<p>Com_CopyTxData .................................................................................... 73</p>
<p> </p>
<p>Table 5-41 </p>
<p> </p>
<p>Com_TpRxIndication ................................................................................ 74</p>
<p> </p>
<p>Table 5-42 </p>
<p> </p>
<p>Com_StartOfReception ............................................................................. 74</p>
<p> </p>
<p>Table 5-43 </p>
<p> </p>
<p>Com_CopyRxData .................................................................................... 75</p>
<p> </p>
<p>Table 5-44 </p>
<p> </p>
<p>Indication Notification ................................................................................ 76</p>
<p> </p>
<p>Table 5-45 </p>
<p> </p>
<p>Confirmation Notification ........................................................................... 76</p>
<p> </p>
<p>Table 5-46 </p>
<p> </p>
<p>Rx Timeout Notification ............................................................................. 77</p>
<p> </p>
<p>Table 5-47 </p>
<p> </p>
<p>Tx Timeout Notification ............................................................................. 77</p>
<p> </p>
<p>Table 5-48 </p>
<p> </p>
<p>Error Notification ....................................................................................... 78</p>
<p> </p>
<p>Table 5-49 </p>
<p> </p>
<p>Invalid Notification .................................................................................... 78</p>
<p> </p>
<p>Table 5-50 </p>
<p> </p>
<p>Rx I-PDU Callout with PduInfo pointer ...................................................... 79</p>
<p> </p>
<p>Table 5-51 </p>
<p> </p>
<p>Rx I-PDU Callout with data pointer ........................................................... 79</p>
<p> </p>
<p>Table 5-52 </p>
<p> </p>
<p>Tx I-PDU Callout with PduInfo pointer ...................................................... 80</p>
<p> </p>
<p>Table 5-53 </p>
<p> </p>
<p>Tx I-PDU Callout with data pointer ............................................................ 81</p>
<p> </p>
<p>Table 8-1 </p>
<p> </p>
<p>Glossary ................................................................................................... 84</p>
<p> </p>
<p>Table 8-2 </p>
<p> </p>
<p>Abbreviations ............................................................................................ 84</p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>11 </p>
<p>based on template version 5.6.0 </p>
<p><b>1 </b></p>
<p><b>Component History </b></p>
<p>The </p>
<p>component </p>
<p>history </p>
<p>gives </p>
<p>an </p>
<p>overview </p>
<p>over </p>
<p>the </p>
<p>important </p>
<p>milestones </p>
<p>that </p>
<p>are </p>
<p>supported in the different versions of the component.  </p>
<p><b>Component Version </b></p>
<p><b>New Features </b></p>
<p>1.00 </p>
<p><b>&gt; </b></p>
<p>Signal and Signal Group Access </p>
<p><b>&gt; </b></p>
<p>Notifications </p>
<p><b>&gt; </b></p>
<p>I-PDU Callout </p>
<p><b>&gt; </b></p>
<p>I-PDU Groups </p>
<p><b>&gt; </b></p>
<p>Transmission Modes </p>
<p><b>&gt; </b></p>
<p>Deferred and Immediate Signal Processing  </p>
<p>2.00 </p>
<p><b>&gt; </b></p>
<p>AUTOSAR 4.0.3 support </p>
<p><b>&gt; </b></p>
<p>Rx Deadline Monitoring </p>
<p>2.01 </p>
<p><b>&gt; </b></p>
<p>Signal Invalidation Mechanism </p>
<p><b>&gt; </b></p>
<p>Signal Status Information (update bits) </p>
<p><b>&gt; </b></p>
<p>Signal Reception Filtering </p>
<p>2.02 </p>
<p><b>&gt; </b></p>
<p>Post-Build Loadable </p>
<p><b>&gt; </b></p>
<p>Signal Gateway </p>
<p>3.00 </p>
<p><b>&gt; </b></p>
<p>Tx Deadline Monitoring </p>
<p><b>&gt; </b></p>
<p>Dynamic DLC support </p>
<p><b>&gt; </b></p>
<p>Large (TP) Pdu support </p>
<p><b>&gt; </b></p>
<p>Dynamic Length Signal support  </p>
<p>4.00 </p>
<p><b>&gt; </b></p>
<p>Post-Build Selectable </p>
<p>7.00 </p>
<p><b>&gt; </b></p>
<p>Signal Group Array Access </p>
<p>8.00 </p>
<p><b>&gt; </b></p>
<p>Mainfunction Timing Domains </p>
<p><b>&gt; </b></p>
<p>Deferred Event Caching </p>
<p><b>&gt; </b></p>
<p>Description Routing  </p>
<p><b>&gt; </b></p>
<p>Gateway Routing Timeout </p>
<p>9.00 </p>
<p><b>&gt; </b></p>
<p>Safe BSW </p>
<p>10.00 </p>
<p><b>&gt; </b></p>
<p>ComEnableMDTForCyclicTransmission </p>
<p><b>&gt; </b></p>
<p>Com Rx Indication Callouts </p>
<p>11.00 </p>
<p><b>&gt; </b></p>
<p>Support Update Bits for Gateway Description Routing </p>
<p><b>&gt; </b></p>
<p>Support copying of unaligned bits from source to destination </p>
<p>description buffer. </p>
<p><b>&gt; </b></p>
<p>Support 64 Bit SignalType. </p>
<p>Table 1-1  </p>
<p>Component history </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>12 </p>
<p>based on template version 5.6.0 </p>
<p><b>2 </b></p>
<p><b>Introduction </b></p>
<p>This document describes the functionality, API and configuration of the AUTOSAR BSW </p>
<p>module COM as specified in [1].  </p>
<p> </p>
<p><b>Supported AUTOSAR Release*: </b></p>
<p>4 </p>
<p><b>Supported Configuration Variants: </b></p>
<p>PRE-COMPILE [SELECTABLE]  </p>
<p>POST-BUILD-LOADABLE [SELECTABLE] </p>
<p><b>Vendor ID: </b></p>
<p>COM_VENDOR_ID </p>
<p>30 decimal </p>
<p>(= Vector-Informatik, </p>
<p>according to HIS) </p>
<p><b>Module ID: </b></p>
<p>COM_MODULE_ID   </p>
<p>50 decimal </p>
<p>(according to ref. [3]) </p>
<p>* For the precise AUTOSAR Release 4.x please see the release specific documentation.  </p>
<p> </p>
<p> </p>
<p>The main purpose of the AUTOSAR BSW module Com is to provide a signal-based </p>
<p>interface to the upper layer. In an AUTOSAR based system it is the RTE. In a non-</p>
<p>AUTOSAR system it is the application.  </p>
<p> </p>
<p>It is possible to use the Com layer with different underlying bus systems since they are </p>
<p>encapsulated by the PDU Router. Architecture Overview shows how the component is </p>
<p>embedded in the AUTOSAR layered architecture. </p>
<p> </p>
<p>The main features of the Com component are: </p>
<p> </p>
<p><b></b></p>
<p><b> </b></p>
<p>   Provision of interface for signed and unsigned signals to the upper layer </p>
<p><b></b></p>
<p><b> </b></p>
<p>   Packing and unpacking of signals in I-PDUs </p>
<p><b></b></p>
<p><b> </b></p>
<p>   Handling of transmission modes </p>
<p><b></b></p>
<p><b> </b></p>
<p>   Minimum delay between I-PDUs transmissions  </p>
<p><b></b></p>
<p><b> </b></p>
<p>   Communication control by starting and stopping of I-PDU groups  </p>
<p><b></b></p>
<p><b> </b></p>
<p>   Rx deadline monitoring  </p>
<p><b></b></p>
<p><b> </b></p>
<p>  Tx deadline monitoring  </p>
<p><b></b></p>
<p><b> </b></p>
<p>   Notification mechanisms  </p>
<p><b></b></p>
<p><b> </b></p>
<p> </p>
<p>Initial value support  </p>
<p><b></b></p>
<p><b> </b></p>
<p> </p>
<p>Signal Gateway  </p>
<p> </p>
<p>The implementation is based on the AUTOSAR Com specification [1]. It is assumed that </p>
<p>the reader is familiar with this document and other related AUTOSAR specifications. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>13 </p>
<p>based on template version 5.6.0 </p>
<p><b>2.1 </b></p>
<p><b>Architecture Overview </b></p>
<p>The following figure shows where the COM is located in the AUTOSAR architecture. </p>
<p> </p>
<p>Figure 2-1 </p>
<p>AUTOSAR 4.x Architecture Overview   </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>14 </p>
<p>based on template version 5.6.0 </p>
<p>The next figure shows the interfaces to adjacent modules of the  COM. These interfaces </p>
<p>are described in chapter 5.  </p>
<p> </p>
<p>Figure 2-2 </p>
<p>Interfaces to adjacent modules of the COM </p>
<p>Applications do not access the services of the BSW modules directly. They use the service </p>
<p>ports provided by the BSW modules via the RTE. </p>
<p><b>cmp Com Context View</b></p>
<p>«module»</p>
<p><b>Com</b></p>
<p>«module»</p>
<p><b>Rte::Rte</b></p>
<p>«module»</p>
<p><b>ComM::ComM</b></p>
<p><b>Com</b></p>
<p><b>Rte_ComCbk</b></p>
<p><b>Com_Cbk</b></p>
<p><i>A</i></p>
<p>«module»</p>
<p><b>Dem::Dem</b></p>
<p>«module»</p>
<p><b>Det::Det</b></p>
<p><b>Com_Init</b></p>
<p><b>Det_ReportError</b></p>
<p><b>Dem_ReportErrorStatus</b></p>
<p><b>Com_IpduGroup</b></p>
<p>«module»</p>
<p><b>BswM::BswM</b></p>
<p>«module»</p>
<p><b>PduR::PduR</b></p>
<p><b>PduR_&lt;User:Up&gt;Transmit</b></p>
<p>«realize»</p>
<p>«use»</p>
<p>«optional»</p>
<p>«realize»</p>
<p>«use»</p>
<p>«mandatory»</p>
<p>«realize»</p>
<p>«optional»</p>
<p>«realize»</p>
<p>«realize»</p>
<p>«realize»</p>
<p>«use»</p>
<p>«realize»</p>
<p>«optional»</p>
<p>«mandatory»</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>15 </p>
<p>based on template version 5.6.0 </p>
<p><b>3 </b></p>
<p><b>Functional Description </b></p>
<p><b>3.1 </b></p>
<p><b>Features </b></p>
<p>The features listed in the following tables cover the complete functionality specified for the </p>
<p>COM. </p>
<p>The AUTOSAR  standard  functionality  is  specified  in  [1],  the  corresponding  features  are </p>
<p>listed in the tables </p>
<p><b></b></p>
<p><b> </b></p>
<p>Table 3-1   Supported AUTOSAR standard conform features  </p>
<p><b></b></p>
<p><b> </b></p>
<p>Table 3-2   Not supported AUTOSAR standard conform features </p>
<p> </p>
<p>The following features specified in [1] are supported: </p>
<p><b>Supported AUTOSAR Standard Conform Features </b></p>
<p><b>General functionality </b></p>
<p>Unpacking and packing of Signals and Signal Groups  </p>
<p>Endianness conversion </p>
<p>Sign extension </p>
<p>Initialization and De-Initialization services </p>
<p>Signal invalidation mechanism </p>
<p>Signal status information (update bits) </p>
<p>Signal reception filtering </p>
<p>Signal Gateway </p>
<p>Large data types </p>
<p>Dynamic length signals </p>
<p><b>Communication Modes </b></p>
<p>Signal Transfer Property </p>
<p>I-PDU Transmission Mode </p>
<p>Selection of the Transmission Mode for one specific I-PDU </p>
<p>Replication of Signal Transmission Requests </p>
<p><b>Handling of I-PDUs </b></p>
<p>Starting and stopping of I-PDU groups </p>
<p>Minimum Delay Timer </p>
<p><b>Deadline Monitoring </b></p>
<p>Reception Deadline Monitoring </p>
<p>Transmission Deadline Monitoring </p>
<p><b>Callouts </b></p>
<p>I-PDU Callout </p>
<p>Table 3-1  </p>
<p>Supported AUTOSAR standard conform features </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>16 </p>
<p>based on template version 5.6.0 </p>
<p>The following features specified in [1] are not supported: </p>
<p><b>Not Supported AUTOSAR Standard Conform Features </b></p>
<p><b>General functionality </b></p>
<p>Float data types </p>
<p>Data sequence control </p>
<p>Communication protection </p>
<p>Tx Timeout for Cyclic Tx Modes </p>
<p>Table 3-2  </p>
<p>Not supported AUTOSAR standard conform features </p>
<p><b>3.1.1 </b></p>
<p><b>Signal Types </b></p>
<p>The following signal types are supported: </p>
<p><b></b></p>
<p><b> </b></p>
<p>boolean </p>
<p><b></b></p>
<p><b> </b></p>
<p>uint8  </p>
<p><b></b></p>
<p><b> </b></p>
<p>uint16  </p>
<p><b></b></p>
<p><b> </b></p>
<p>uint32  </p>
<p><b></b></p>
<p><b> </b></p>
<p>uint64 </p>
<p><b></b></p>
<p><b> </b></p>
<p>sint8  </p>
<p><b></b></p>
<p><b> </b></p>
<p>sint16  </p>
<p><b></b></p>
<p><b> </b></p>
<p>sint32  </p>
<p><b></b></p>
<p><b> </b></p>
<p>sint64 </p>
<p><b></b></p>
<p><b> </b></p>
<p>uint8[n]  </p>
<p> </p>
<p>For signed and unsigned integers an endianness conversion is supplied depending on the </p>
<p>endianness of the signal and the target system. </p>
<p>The support of signed signals is based on the B-complement. </p>
<p>The data type opaque is interpreted as an unsigned integer and no endianness conversion </p>
<p>is performed. The target system specific byte order is applied. </p>
<p> </p>
<p> </p>
<p><b>Caution </b></p>
<p>Only <b>unsigned and signed integer </b>values are supported. Float and the scaling </p>
<p>factors (as adjustable in the database) are not supported and have to be </p>
<p>interpreted by the application. </p>
<p> </p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>17 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.2 </b></p>
<p><b>Signal Processing </b></p>
<p>Each  Pdu  has  the  parameter  ComIPduSignalProcessing,  this  parameter  can  have  the </p>
<p>value IMMEDIATE or DEFERRED. </p>
<p><b>&gt; </b></p>
<p>IMMEDIATE  signal  processing  means  that  notification  functions  are  called  within </p>
<p>the functions Com_TxConfirmation() or Com_RxIndication(). </p>
<p>o</p>
<p> </p>
<p>The transmission of a triggered signal with signal processing IMMEDIATE will </p>
<p>be triggered within the next call of the Com_MainFunctionTx(). </p>
<p><b>&gt; </b></p>
<p>DEFERRED signal processing means that notification functions are called on task </p>
<p>level </p>
<p>during </p>
<p>the </p>
<p>next </p>
<p>call </p>
<p>cycle </p>
<p>of </p>
<p>Com_MainFunctionRx() </p>
<p>or </p>
<p>Com_MainFunctionTx(). </p>
<p>o</p>
<p> </p>
<p>Values of signals contained in an I-PDU with signal processing DEFERRED </p>
<p>will be updated on task level in the Com_MainFunctionRx(). </p>
<p> </p>
<p><b>3.1.3 </b></p>
<p><b>Transmission of a Signal </b></p>
<p>To request the transmission of a signal, the upper layer uses the API </p>
<p>Com_SendSignal</p>
<p>. </p>
<p>After performing optional parameter checks COM updates the I-PDU with the new signal </p>
<p>value and checks if the transfer property of the signal requires a direct transmission. If yes, </p>
<p>a flag is set which is evaluated later in the cyclic main function of the COM layer’s transmit </p>
<p>part. </p>
<p>Transmission modes of the I-PDU are handled in the </p>
<p>Com_MainFunctionTx</p>
<p>. This means </p>
<p>that the actual transmit request to the underlying layer is always decoupled from the upper </p>
<p>layer. In the transmission mode handler cyclic transmissions and direct transmissions are </p>
<p>processed. </p>
<p>In  the  following  figure  the  transmission  procedure  is  shown  for  I-PDUs  with  direct  and </p>
<p>periodic transmission mode. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>18 </p>
<p>based on template version 5.6.0 </p>
<p> </p>
<p>Figure 3-1 </p>
<p>Periodic Transmission Mode </p>
<p> </p>
<p>Figure 3-2 </p>
<p>Direct Transmission Mode </p>
<p>The mixed transmission mode provides a combination of periodic and direct transmission </p>
<p>mode.  </p>
<p>Periodic Transmission Mode</p>
<p>RTE</p>
<p>COM</p>
<p>PDU Router</p>
<p>IPDU</p>
<p>COM_TRANSMISSION_</p>
<p>MODE_TIME_PERIOD</p>
<p>IPDU <b>(5)</b></p>
<p>Com_SendSignal <b>(5)</b></p>
<p>asynchronous</p>
<p>writing</p>
<p>t</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Direct Transmission Mode</p>
<p>RTE</p>
<p>COM</p>
<p>PDU Router</p>
<p>Com_SendSignal_<b>(a)</b></p>
<p>IPDU  <b>(a)</b></p>
<p>COM_IPDU_MINIMUM_DELAY_TIME</p>
<p>Com_SendSignal_<b>(b)</b></p>
<p>IPDU <b>(a)</b></p>
<p>Com_SendSignal_<b>(a)</b></p>
<p><b>lost signal</b></p>
<p>t</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<p>Com_MainFunctionTx</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>19 </p>
<p>based on template version 5.6.0 </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>Signal values are not queued by COM. If the upper layer updates signals with a higher </p>
<p>rate as the I-PDU of the signal is transmitted, only the most recent signal value is sent. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>3.1.4 </b></p>
<p><b>Transmission of a Signal Group </b></p>
<p>AUTOSAR  COM  provides  signal  groups  to  send  several  signals  consistently.  Signals </p>
<p>mapped to a signal group are called group signals and should be in relationship with each </p>
<p>other. To ensure the consistency of the group signal values, a shadow buffer is provided </p>
<p>for each signal group. </p>
<p>To  request  the  transmission  of  a  signal  group  with  several  group  signals,  following </p>
<p>sequence of API calls must be followed: </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>/* Update the group signal values in the shadow buffer */ </p>
<p>Com_SendSignal(GroupSignal1, &amp;SigBuffer1); </p>
<p>Com_SendSignal(GroupSignal2, &amp;SigBuffer2); </p>
<p>/* Copy the shadow buffer to the Tx buffer */ </p>
<p>Com_SendSignalGroup(SignalGroupA);</p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>For the transmission modes DIRECT or MIXED the evaluation of the transfer property is </p>
<p>handled as follows </p>
<p><b></b></p>
<p><b> </b></p>
<p>ComSignalGroup.ComTransferProperty </p>
<p>equals</p>
<p> TRIGGERED </p>
<p>and all</p>
<p> ComGroupSignal.ComTransferProperty </p>
<p>equals</p>
<p> PENDING </p>
<p><b></b></p>
<p><b> </b></p>
<p>Com_SendSignal(ComGroupSignal) -&gt; </p>
<p>Com_SendSignalGroup(ComSignalGroup) </p>
<p>will trigger a transmission of the Tx </p>
<p>I-Pdu regardless of the group signal value. </p>
<p><b></b></p>
<p><b> </b></p>
<p>ComSignalGroup.ComTransferProperty </p>
<p>equals</p>
<p> TRIGGERED_ON_CHANGE </p>
<p>and all</p>
<p> ComGroupSignal.ComTransferProperty </p>
<p>equals</p>
<p> PENDING </p>
<p><b></b></p>
<p><b> </b></p>
<p>Com_SendSignal(ComGroupSignal) -&gt; </p>
<p>Com_SendSignalGroup(ComSignalGroup) </p>
<p>will trigger a transmission of the Tx </p>
<p>I-Pdu if at least one group signal value has changed. </p>
<p><b></b></p>
<p><b> </b></p>
<p>ComSignalGroup.ComTransferProperty </p>
<p>equals</p>
<p> PENDING </p>
<p><b></b></p>
<p><b> </b></p>
<p>ComGroupSignal.ComTransferProperty </p>
<p>equals</p>
<p> TRIGGERED </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>20 </p>
<p>based on template version 5.6.0 </p>
<p><b></b></p>
<p><b> </b></p>
<p>Com_SendSignal(ComGroupSignal) -&gt; </p>
<p>Com_SendSignalGroup(ComSignalGroup) </p>
<p>will trigger a transmission of the Tx </p>
<p>I-Pdu regardless of the group signal value.</p>
<p> </p>
<p><b></b></p>
<p><b> </b></p>
<p>ComGroupSignal.ComTransferProperty </p>
<p>equals</p>
<p> TRIGGERED_ON_CHANGE </p>
<p><b></b></p>
<p><b> </b></p>
<p>Com_SendSignal(ComGroupSignal) -&gt; </p>
<p>Com_SendSignalGroup(ComSignalGroup) </p>
<p>will trigger a  transmission of the </p>
<p>Tx I-Pdu if the group signal value has changed.</p>
<p> </p>
<p><b></b></p>
<p><b> </b></p>
<p>ComGroupSignal.ComTransferProperty </p>
<p>equals</p>
<p> PENDING </p>
<p><b></b></p>
<p><b> </b></p>
<p>Com_SendSignal(ComGroupSignal) -&gt; </p>
<p>Com_SendSignalGroup(ComSignalGroup) </p>
<p>will not trigger a transmission of </p>
<p>the Tx I-Pdu. </p>
<p><b></b></p>
<p><b> </b></p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>To guarantee data consistency of the whole signal group the complete transmission of </p>
<p>a signal group (consecutive calls of 'Com_SendSignal' and 'Com_SendSignalGroup') </p>
<p>must not be interrupted by another transmission request for the same signal group or </p>
<p>by a call of 'Com_InvalidateSignalGroup'. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>21 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.5 </b></p>
<p><b>Transmission Mode Selector </b></p>
<p>AUTOSAR  COM  allows  configuring  two  different  transmission  modes  for  each  I-PDU </p>
<p>(ComTxModeTrue  and  ComTxModeFalse).  The  transmission  mode  of  an  I-PDU  that  is </p>
<p>valid at a specific point in time is selected using only the filter states of the signals that are </p>
<p>mapped to this I-PDU. </p>
<p>If  a  filter  of  any  signal  mapped  to  a  specific  I-PDU  evaluates  to  TRUE,  this  I-PDU  is </p>
<p>transmitted with transmission mode TRUE. The transmission mode FALSE is used for an I-</p>
<p>PDU when the filters of all signals mapped to this I-PDU evaluate to FALSE. </p>
<p>If all signals mapped to a specific I-PDU have no filter assigned, the transmission mode </p>
<p>evaluates to TRUE and does never change. </p>
<p>The </p>
<p>transmission </p>
<p>mode </p>
<p>is </p>
<p>changed </p>
<p>as </p>
<p>a </p>
<p>result </p>
<p>of </p>
<p>a </p>
<p>call </p>
<p>of </p>
<p>Com_SendSignal</p>
<p> </p>
<p>or </p>
<p>Com_SendSignalGroup</p>
<p>. The value of the signal or group signal that caused the change </p>
<p>is already transmitted with the new transmission mode. </p>
<p>By a transmission mode switch to the Direct/N-times transmission mode a direct/ n-times </p>
<p>transmission to the underlying layer, respecting the minimum delay time, will be initiated, </p>
<p>even  if  the  transmission  mode  switch  was  triggered  by  a  signal  with  PENDING  transfer </p>
<p>property. </p>
<p>By a transmission mode switch to the Cyclic or Mixed transmission mode the new cycle </p>
<p>will  start  with  a  transmission  request  to  the  underlying  layers  respecting  the  minimum </p>
<p>delay time. </p>
<p>If  the  current  transmission  mode  is  configured  to  NONE,  the  COM  will  never  initiate  a </p>
<p>transmission to the underlying layer. </p>
<p><b>3.1.6 </b></p>
<p><b>Explicit Transmission Mode State Switch </b></p>
<p>By calling the </p>
<p>Com_SwitchIpduTxMode </p>
<p>API the configured transmission modes can be </p>
<p>switched explicitly (TRUE/FALSE) per Tx I-PDU.  </p>
<p>If  the  requested  transmission  mode  is  different  to  the  currently  active  mode,  the  new </p>
<p>transmission mode is immediately active.  </p>
<p><b></b></p>
<p><b> </b></p>
<p>For a new transmission mode PERIODIC or MIXED, the transmission cycle starts with </p>
<p>a transmission request, respecting the minimum delay time, and the timer for the cycle </p>
<p>time is restarted. </p>
<p><b></b></p>
<p><b> </b></p>
<p>For a new transmission mode DIRECT or NONE, no transmission of the Tx I-PDU is </p>
<p>triggered by the API call. </p>
<p>If the requested TMS is already active, the function call will silently be ignored. </p>
<p>By </p>
<p>mixing </p>
<p>the </p>
<p>signal </p>
<p>based </p>
<p>TMS </p>
<p>switch </p>
<p>and </p>
<p>explicit </p>
<p>TMS </p>
<p>switch </p>
<p>by </p>
<p>Com_SwitchIpduTxMode</p>
<p>  for  the  same  I-PDU,  the  signal  based  TMS  switches  the </p>
<p>manual set mode back, during a call to </p>
<p>Com_SendSignal</p>
<p> or </p>
<p>Com_SendSignalGroup</p>
<p> for </p>
<p>this Tx I-PDU. </p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>22 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.7 </b></p>
<p><b>Transmit Signal Filters </b></p>
<p>A signal filter can be optionally assigned to each  transmit signal. The filter of a transmit </p>
<p>signal is only used for transmission mode selection but the value of a transmit signal is </p>
<p>never filtered out. </p>
<p>The following filters are supported: </p>
<p><b></b></p>
<p><b> </b></p>
<p>F_Always   </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>(TRUE) </p>
<p><b></b></p>
<p><b> </b></p>
<p>F_Never  </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>(FALSE) </p>
<p><b></b></p>
<p><b> </b></p>
<p>F_MaskedNewDiffersMaskedOld  </p>
<p>((<i>new_value</i>&amp;<i>mask</i>) != (<i>old_value</i>&amp;<i>mask</i>)) </p>
<p><b></b></p>
<p><b> </b></p>
<p>F_MaskedNewEqualsX  </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>((<i>new_value</i>&amp;<i>mask</i>) == <i>x</i>) </p>
<p><b></b></p>
<p><b> </b></p>
<p>F_MaskedNewDiffersX   </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>((<i>new_value</i>&amp;<i>mask</i>) != <i>x</i>) </p>
<p><b></b></p>
<p><b> </b></p>
<p>F_MaskedNewIsOutside   </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>((<i>new_value</i>&lt;<i>min</i>) || (<i>max</i>&lt;<i>new_value</i>)) </p>
<p><b></b></p>
<p><b> </b></p>
<p>F_MaskedNewIsWithin  </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p> </p>
<p>((<i>min</i>&lt;=<i>new_value</i>) &amp;&amp; (<i>new_value</i>&lt;=<i>max</i>)) </p>
<p> </p>
<p>The values for <i>mask</i>, <i>x</i>, <i>min </i>and <i>max </i>can be configured for each filter. </p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>23 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.8 </b></p>
<p><b>Minimum Send Distance of an I-PDU </b></p>
<p>In the COM specification an optional mechanism is defined to achieve a delimitation of the </p>
<p>bus  load,  by  introducing  a  minimum  send  distance  for  an  I-PDU.  This  concept  is  also </p>
<p>handled in the Tx main function. </p>
<p>In the following figure an example for the mixed transmission mode is shown. Note that </p>
<p>due to the minimum send distance, cyclic transmissions can be delayed, however the base </p>
<p>cycle is not modified. Direct transmissions are drawn by solid red arrows. </p>
<p> </p>
<p>Figure 3-3 </p>
<p>Minimum Delay Time </p>
<p>The handling of the minimum send distance is based on the evaluation of the confirmation </p>
<p>by the underlying layer. </p>
<p> </p>
<p><b>3.1.9 </b></p>
<p><b>Minimum Send Distance only for Direct Send Triggers </b></p>
<p>If the parameter ComEnableMDTForCyclicTransmission is set to false, the Minimum Delay </p>
<p>Time will only be considered for event based transmissions, which can be initiated by </p>
<p>Com_InvalidateSignal()</p>
<p>,</p>
<p> Com_InvalidateSignalGroup()</p>
<p>,</p>
<p> </p>
<p>Com_SendSignal()</p>
<p>,</p>
<p> Com_SendSignalGroup()</p>
<p>, </p>
<p>Com_SendSignalGroupArray() </p>
<p>or </p>
<p>Com_TriggerIPDUSend()</p>
<p>. </p>
<p>Figure 3-4 shows that cyclic transmissions do not wind up the Minimum Delay Time. An </p>
<p>event based transmission is directly triggered after a cyclic transmission although the </p>
<p>minimum delay has not elapsed. Right after, in comparison a second event based </p>
<p>transmission request is delayed by the configured Minimum Delay Time as the first event </p>
<p>based transmission has reloaded the delay counter. </p>
<p> </p>
<p>PduR_ComTransmit()</p>
<p>Com_TxConfirmation()</p>
<p>PDU Router</p>
<p>COM</p>
<p>RTE</p>
<p>Com_MainfunctionTx()</p>
<p>Com_SendSignal()</p>
<p>Com_TxConfirmation()</p>
<p>PduR_ComTransmit()</p>
<p>COM_IPDU_MINIMUM_DELAY_TIME</p>
<p>Cyclic send </p>
<p>request</p>
<p>PduR_ComTransmit()</p>
<p>Minimum Delay Time</p>
<p>Com_TxConfirmation()</p>
<p>PduR_ComTransmit()</p>
<p>Com_TxConfirmation()</p>
<p>PDU Router</p>
<p>COM</p>
<p>RTE</p>
<p>Com_MainfunctionTx()</p>
<p>Com_SendSignal()</p>
<p>Com_TxConfirmation()</p>
<p>PduR_ComTransmit()</p>
<p>COM_IPDU_MINIMUM_DELAY_TIME</p>
<p>Cyclic send </p>
<p>request</p>
<p>PduR_ComTransmit()</p>
<p>Minimum Delay Time</p>
<p>Com_TxConfirmation()</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>24 </p>
<p>based on template version 5.6.0 </p>
<p> </p>
<p>Figure 3-4 </p>
<p>Minimum Delay Time with ComEnableMDTForCyclicTransmission == false </p>
<p><b> </b></p>
<p><b>3.1.10 </b></p>
<p><b>Transmission Deadline Monitoring </b></p>
<p>For  Tx  I-PDUs  a  deadline  monitoring  mechanism  is  provided  to  detect  failures  in  the </p>
<p>transmission mechanism of the lower layers.  </p>
<p>Two different variants are supported: </p>
<p><b></b></p>
<p><b> </b></p>
<p>Normal Mode: If the COM triggers the transmission of the I-PDU, the time between the </p>
<p>send request of a signal or signal group (</p>
<p>Com_SendSignal()</p>
<p> or</p>
<p> </p>
<p>Com_SendSignalGroup()</p>
<p>) and the next Tx confirmation </p>
<p>(</p>
<p>Com_TxConfirmation()</p>
<p>) is observed. </p>
<p><b></b></p>
<p><b> </b></p>
<p>None Mode: For I-PDUs triggered by a schedule table of a bus interface (e.g. LIN </p>
<p>schedule table), the time between two consecutive Tx confirmations </p>
<p>(</p>
<p>Com_TxConfirmation()</p>
<p>) is observed. The “None Mode” is applied for Tx I-PDU </p>
<p>with both transmission modes configured to NONE. </p>
<p> </p>
<p>The transmission deadline monitoring for the “Normal Mode”, is illustrated in  Figure 3-5. </p>
<p>Each  time  a  signal  or  signal  group  is  written,  the  timeout  timer  is  started  if  it  is  not  yet </p>
<p>running. If the timeout time (configuration parameter </p>
<p>ComTimeout</p>
<p>) is expired before the </p>
<p>next Tx confirmation is received, all configured timeout notification functions of the I-PDU </p>
<p>are called. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>25 </p>
<p>based on template version 5.6.0 </p>
<p> </p>
<p>Figure 3-5 </p>
<p>Transmission Deadline Monitoring – Normal Mode </p>
<p>In the “None Mode” the timeout timers are initially started by the start of the corresponding </p>
<p>I-PDU  group  and  are  restarted  each  time  a  Tx  confirmation  is  received.  Figure  3-6 </p>
<p>illustrates this behavior. </p>
<p> </p>
<p>Figure 3-6 </p>
<p>Transmission Deadline Monitoring – None Mode </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>26 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.11 </b></p>
<p><b>Replication of Signal Transmission Requests  </b></p>
<p>The AUTOSAR COM provides an optional feature to replicate transmission requests to the </p>
<p>lower layer for one send request by an upper layer. </p>
<p>If the attribute ComTxModeNumberOfRepetitions is configured to a value ‘n’ greater than </p>
<p>‘0’ for a transmission mode DIRECT or MIXED, the COM triggers the transmission of the </p>
<p>Tx I-PDU cyclically with a configurable ComTxModeRepetitionPeriodFactor  as long as ‘n’ </p>
<p>confirmations for this I-PDU are invoked after a send request by an upper layer. </p>
<p>Figure  3-7  illustrates  this  behavior  exemplarily  for  ‘n  =  2’  replications  with  a  repetition </p>
<p>period factor configured to ‘2’. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>Under certain conditions, if the confirmation is invoked late, the number of messages </p>
<p>send out on the bus can differ from the configured number of repetition, as the </p>
<p>confirmations and not the transmission requests are counted.  </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p> </p>
<p> </p>
<p>Figure 3-7 </p>
<p>Replication of Signal Transmission Requests </p>
<p>As the replications are an attribute of a Tx I-PDU, each send request of a mapped signal </p>
<p>or  signal  group  with  a  transfer  property  ‘TRIGGERED’  or  ‘TRIGGERED_ON_CHANGE’  </p>
<p>provokes the replications of the Tx I-PDU. </p>
<p>To enable replication control per signal following transfer properties were introduced </p>
<p>COM</p>
<p>Com_MainfunctionTx()</p>
<p>Com_SendSignal()</p>
<p>Com_TxConfirmation()</p>
<p>N = 2</p>
<p>N &gt; 0</p>
<p>N &gt; 0</p>
<p>N == 0</p>
<p>Com_TxConfirmation()</p>
<p>ComTxModeRepetitionPeriodFactor = 2</p>
<p>N--</p>
<p>N = 1</p>
<p>N--</p>
<p>N = 0</p>
<p>PduR_ComTransmit()</p>
<p>PDU Router</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>27 </p>
<p>based on template version 5.6.0 </p>
<p><b></b></p>
<p><b> </b></p>
<p>‘TRIGGERED_WITHOUT_REPETITION’  </p>
<p><b></b></p>
<p><b> </b></p>
<p>‘TRIGGERED_ON_CHANGE_WITHOUT_REPETITION’   </p>
<p><b></b></p>
<p><b> </b></p>
<p>A send request for signals with these transfer properties does only initiate one single </p>
<p>transmission requests to the lower layer even if replications are configured for the </p>
<p>current transmission mode. </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p><b>&gt; </b></p>
<p>If a *-WITHOUT-REPETITION signal and a normal triggered signal are written at the </p>
<p>same time, the repetitions are triggered. </p>
<p><b>&gt; </b></p>
<p>If a *-WITHOUT-REPETITION signal is written while repetitions of a former send </p>
<p>request are processed, the outstanding transmission repetitions are not canceled </p>
<p>and an additional transmission is triggered.<b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>28 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.12 </b></p>
<p><b>Reception of a Signal </b></p>
<p>To  receive  a  signal  the  upper  layer  uses  the  API </p>
<p>Com_ReceiveSignal</p>
<p>.  This  service </p>
<p>delivers the signal value which is contained in the latest I-PDU of the signal.  </p>
<p>As the signal processing context depends on the configuration of the corresponding Rx I-</p>
<p>PDU, </p>
<p>the </p>
<p>latest </p>
<p>signal </p>
<p>value </p>
<p>might </p>
<p>not </p>
<p>be </p>
<p>available </p>
<p>until </p>
<p>the </p>
<p>next </p>
<p>call </p>
<p>to </p>
<p>Com_MainfunctionRx. </p>
<p>The reception procedure of the signal is usually asynchronous to the reception of the I-</p>
<p>PDU.  It  is  however  possible  to  call </p>
<p>Com_ReceiveSignal</p>
<p>  in  the  reception  notification </p>
<p>callback. </p>
<p> </p>
<p>Figure 3-8 </p>
<p>Reception of a periodic signal </p>
<p>A call to </p>
<p>Com_ReceiveSignal</p>
<p> always returns the last received signal value or the initial </p>
<p>value if a timeout occurred and the Rx Data Timeout Action is set to REPLACE, even if the </p>
<p>corresponding I-PDU group is stopped.  </p>
<p><b>3.1.13 </b></p>
<p><b>Reception of a Signal Group </b></p>
<p>AUTOSAR  COM  provides  signal  groups  to  receive  several  signals  consistently.  Signals </p>
<p>mapped to a signal group are called group signals and should be in relationship with each </p>
<p>other. To ensure the consistency of the group signal values a shadow buffer is provided for </p>
<p>each signal group. </p>
<p>As the signal processing context depends on the configuration of the corresponding Rx I-</p>
<p>PDU, </p>
<p>the </p>
<p>latest </p>
<p>signal </p>
<p>group </p>
<p>value </p>
<p>might </p>
<p>not </p>
<p>be </p>
<p>available </p>
<p>until </p>
<p>the </p>
<p>next </p>
<p>call </p>
<p>to </p>
<p>Com_MainfunctionRx. </p>
<p>To receive the values of a signal group with several group signals, following sequence of </p>
<p>API calls must be followed: </p>
<p> </p>
<p>Reception of a periodic signal</p>
<p>RTE</p>
<p>COM</p>
<p>PDU Router</p>
<p>IPDU</p>
<p>IPDU <b>(5)</b></p>
<p>Com_ReceiveSignal <b>(5)</b></p>
<p>asynchronous</p>
<p>reading</p>
<p>t</p>
<p>Com_MainFunctionRx</p>
<p>Com_MainFunctionRx</p>
<p>Com_MainFunctionRx</p>
<p>Com_MainFunctionRx</p>
<p>Com_MainFunctionRx</p>
<p>Com_MainFunctionRx</p>
<p>Com_MainFunctionRx</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>29 </p>
<p>based on template version 5.6.0 </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example </b></p>
<p>/* Copy the Rx buffer to the shadow buffer */ </p>
<p>Com_ReceiveSignalGroup(SignalGroupA);</p>
<p><b> </b></p>
<p>/* Get the group signal values from the shadow buffer */ </p>
<p>Com_ReceiveSignal(GroupSignal1, &amp;SigBuffer1); </p>
<p>Com_ReceiveSignal(GroupSignal2, &amp;SigBuffer2); </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>To guarantee data consistency of the whole signal group the complete reception of a </p>
<p>signal group (consecutive calls of 'Com_ReceiveSignalGroup' and </p>
<p>'Com_ReceiveSignal') must not be interrupted by another reception request for the </p>
<p>same signal group. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>3.1.14 </b></p>
<p><b>Array-based access of SignalGroups </b></p>
<p>An array-based access of SignalGroups represents an alternative to the aforementioned </p>
<p>approaches </p>
<p>in </p>
<p>3.1.4 </p>
<p>and </p>
<p>3.1.13 </p>
<p>to </p>
<p>access </p>
<p>SignalGroups. </p>
<p>Instead </p>
<p>of </p>
<p>treating </p>
<p>all </p>
<p>GroupSignals individually, SignalGroups are accessed as serialized composite data. The </p>
<p>APIs Com_ReceiveSignalGroupArray and Com_SendSignalGroupArray are used to send </p>
<p>and receive the uint8-array based representation of the SignalGroup. Using this feature, </p>
<p>the  overhead  for  packing  and  unpacking  the  GroupSignals  individually  vanishes  and </p>
<p>further processing of the SignalGroup is left to the caller of the API. However, to permit fast </p>
<p>processing, following preconditions have to be fulfilled: </p>
<p>- </p>
<p>Only fix-sized data types are supported. </p>
<p>- </p>
<p>The SignalGroup must be byte-aligned within the containing I-PDU.  </p>
<p>- </p>
<p>All GroupSignals must be aligned consecutively within SignalGroup without leaving </p>
<p>gaps. </p>
<p>- </p>
<p>Only ALWAYS and NEVER filters are supported for TMS. </p>
<p>To activate this feature, the global COM configuration switch </p>
<p>ComEnableSignalGroupArrayApi must be enabled. Further, only SignalGroups with </p>
<p>ComSignalGroupArrayAccess being activated are permitted for the array-based access.  </p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>30 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.15 </b></p>
<p><b>Dynamic DLC </b></p>
<p>The  COM  evaluates  the  actual  received  DLC  of  the  SDU  given  from  the  lower  layer </p>
<p>interface to support the reception of Rx I-PDUs with a variable length. </p>
<p>Two cases are distinguished: </p>
<p><b></b></p>
<p><b> </b></p>
<p>Actual received DLC is greater than or equal to the statically configured </p>
<p><b></b></p>
<p><b> </b></p>
<p>Only the SDU payload data with the statically configured PDU length is processed. </p>
<p><b></b></p>
<p><b> </b></p>
<p>Normal signal processing. </p>
<p><b></b></p>
<p><b> </b></p>
<p>Actual received DLC is smaller than the statically configured </p>
<p><b></b></p>
<p><b> </b></p>
<p>Only the SDU payload data with the actual received PDU length is processed. </p>
<p><b></b></p>
<p><b> </b></p>
<p>Only completely received signals or signal groups are processed.   </p>
<p>This affects: </p>
<p><b></b></p>
<p><b> </b></p>
<p>Rx indication notifications </p>
<p><b></b></p>
<p><b> </b></p>
<p>Rx Filter </p>
<p><b></b></p>
<p><b> </b></p>
<p>Rx Invalidation </p>
<p><b></b></p>
<p><b> </b></p>
<p>Signal routing </p>
<p><b></b></p>
<p><b> </b></p>
<p>If a configured update-bit is not contained in the actual received payload, the signal is </p>
<p>processed as if the update-bit were set. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>If a signal or signal group is completely received depends on the following parameters: </p>
<p>&gt; Bit position and length </p>
<p>&gt; Endianness </p>
<p>&gt; The position of all group signals of a signal group </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>3.1.16 </b></p>
<p><b>Reception Deadline Monitoring </b></p>
<p>For Rx signals and signal groups, a deadline monitoring mechanism is provided to detect </p>
<p>failures of other ECUs. </p>
<p>The  timeout  time  can  be  configured  per  signal  and  signal  group,  but  only  signals  and </p>
<p>signal groups with a configured update-bit can be monitored separately. For signals and </p>
<p>signal group without a configured update-bit, an I-PDU based timeout is applied.  </p>
<p>If a timeout occurs, it’s configurable whether the COM shall call a timeout notification and </p>
<p>additionally  replaces  the  signal  value  with  the  configured  initial  value.  If the  Rx Timeout </p>
<p>value  should  differ the  initial value,  the  parameter “Rx  Data Timeout  Substitution  Value” </p>
<p>can be used to configure a Rx timeout substitution value.  </p>
<p>The start of the timeout monitoring can be deferred by using the first timeout time to avoid </p>
<p>timeout events in the startup time of a network. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>31 </p>
<p>based on template version 5.6.0 </p>
<p>If  no first  timeout  time  is configured,  the  deadline  monitoring  is  not  started until the first </p>
<p>reception of the Rx I-PDU or a set update-bit. After the first reception, the normal timeout </p>
<p>time is monitored. </p>
<p><b>3.1.17 </b></p>
<p><b>Invalidation Mechanism </b></p>
<p>On sender side an invalid value can be configured per signal and group signal which is set </p>
<p>by the COM invalidation APIs to indicate than no valid signal value can be provided by the </p>
<p>application. </p>
<p>For signal groups all group signals should be invalided at once, because the group signals </p>
<p>are related in a consistent manner. Thus, if one group signal is invalid, the whole signal </p>
<p>group is invalid. </p>
<p>On receiver side the COM checks the value of received signals and group signals against </p>
<p>the configured invalid value. If an invalid value is detected, the COM offers the following </p>
<p>actions: </p>
<p><b></b></p>
<p><b> </b></p>
<p>The invalid value is replaced by the initial value of the signal and normal signal </p>
<p>processing takes place </p>
<p><b></b></p>
<p><b> </b></p>
<p>A configured invalid notification is called and the invalid value is not stored in the </p>
<p>internal COM buffer </p>
<p><b></b></p>
<p><b> </b></p>
<p>For signal groups, all group signals are checked against their invalid value. If at least </p>
<p>one group signal is invalid, the invalid action is performed for all group signals of the </p>
<p>signal group. </p>
<p><b>3.1.18 </b></p>
<p><b>Signal Reception Filtering </b></p>
<p>A filter algorithm can be configured for Rx signals and group signals to filter out specific </p>
<p>signal values. If the filter algorithm is evaluated to FALSE, the complete signal processing </p>
<p>is inhibited. Thus the signal data is not stored in the internal COM buffer and a configured </p>
<p>notification function is not called. </p>
<p>For  signal  groups  the  signal  processing  is  performed,  if  at  least  one  configured  filter </p>
<p>algorithm of any of the contained group signals is evaluated to TRUE. The signal group is </p>
<p>only filtered out, if all filter algorithms are evaluated to FALSE. </p>
<p><b>3.1.19 </b></p>
<p><b>Signal Status Information </b></p>
<p>For signals and signal groups update-bits can be configured to indicate whether the signal </p>
<p>value has been updated by the application since the last transmission of the signal on the </p>
<p>bus. </p>
<p>On </p>
<p>sender </p>
<p>side </p>
<p>the </p>
<p>update-bit </p>
<p>is </p>
<p>set </p>
<p>in </p>
<p>the </p>
<p>context </p>
<p>of </p>
<p>Com_SendSignal </p>
<p>or </p>
<p>Com_SendSignalGroup. As the update-bit shall only be present on the BUS once after the </p>
<p>value is updated, the update-bit has to be cleared dependent on the send behavior of the </p>
<p>lower layer. As the COM shall be aware of the lower layer, the clear context of the update-</p>
<p>bit is configurable per Tx I-PDU. </p>
<p>If the lower layer copies the I-PDU payload in the transmit context, the update-bits shall be </p>
<p>cleared directly after the COM triggers the transmission of the I-PDU. In case the lower </p>
<p>layer  requests  the  I-PDU  payload  decoupled  by  a  call  to  Com_TriggerTransmit,  the </p>
<p>update-bits shall be cleared in this context. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>32 </p>
<p>based on template version 5.6.0 </p>
<p>The receiving ECU checks the state of an update-bit associated to a signal or signal group </p>
<p>and inhibits the complete signal processing, if the update-bit is not set. In a well-functional </p>
<p>network, the update-bit should always be set if the signal value has changed. Otherwise </p>
<p>the sending ECU is defect. </p>
<p><b>3.1.20 </b></p>
<p><b>Signal Gateway </b></p>
<p>The signal gateway allows routing of signals and signal groups from an Rx I-PDU to one or </p>
<p>several Tx I-PDU(s). To reduce interrupt runtime, signal routing is executed on task level </p>
<p>within Com_MainFunctionRouteSignals(). </p>
<p>As signals can be accessed individually by COM, it is possible to change the signal layout </p>
<p>of  I-PDUs  while  routing.  Furthermore  it  is  possible  to  change  the  byte  alignment  of  the </p>
<p>routed signals and to specify any available transmission property for the Tx signal and I-</p>
<p>PDU. </p>
<p> </p>
<p> </p>
<p>Figure 3-9 </p>
<p>Signal routing allows routing of individual signals </p>
<p><b>3.1.20.1 </b></p>
<p><b>Signal routing requirements </b></p>
<p>In  order  to  allow  routing  between  two  signals  several  requirements  must  be  fulfilled </p>
<p>regarding the compatibility of the Rx and the Tx signal: </p>
<p><b></b></p>
<p><b> </b></p>
<p>Application data type must be equal </p>
<p><b></b></p>
<p><b> </b></p>
<p>Rx signal bit count must not be larger as the Tx signal bit count </p>
<p><b></b></p>
<p><b> </b></p>
<p>When routing byte arrays (application data type is uint[8]) the byte count must be </p>
<p>equal </p>
<p><b></b></p>
<p><b> </b></p>
<p>If a Tx signal is used in multiple routing relations (n(Rx):1(Tx) routing) the routing </p>
<p>relations must be exclusive at runtime to ensure data consistency. </p>
<p><b>3.1.20.2 </b></p>
<p><b>Routing of signal groups </b></p>
<p>Signal groups are routed consistently from the Rx I-PDU to the Tx I-PDU. In order to allow </p>
<p>data  consistency  of  the  signals,  it  is  required  that  all  signals  of  the Tx  signal  group  are </p>
<p>filled with signals of one Rx signal group. If this is not given, the signal group routing is not </p>
<p>possible. </p>
<p>It is not required that all signals of an Rx signal group are routed to a Tx signal group. This </p>
<p>allows routing an Rx signal group to a Tx signal group with less group signals. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>33 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.20.3 </b></p>
<p><b>Routing latency for normal Signal Gateway </b></p>
<p>The maximum routing latency is influenced by several factors and cannot be guaranteed </p>
<p>by COM. When estimating the routing latency, the following factors have to be taken into </p>
<p>account: </p>
<p><b></b></p>
<p><b> </b></p>
<p>the cycle times of COM (main) functions </p>
<p><b></b></p>
<p><b> </b></p>
<p>the minimum delay time of the Tx I-PDU </p>
<p><b></b></p>
<p><b> </b></p>
<p>the Tx I-PDU transmission mode and cycle time </p>
<p><b></b></p>
<p><b> </b></p>
<p>the Tx signal transfer mode and filter settings </p>
<p><b></b></p>
<p><b> </b></p>
<p>delays caused by lower layers (such as bus access delay times) </p>
<p><b></b></p>
<p><b> </b></p>
<p>other factors such as interrupt events that can delay routing execution </p>
<p> </p>
<p> </p>
<p><b>Example</b> </p>
<p>Eliminating all these factors to the fastest possible configuration (minimum delay </p>
<p>time is zero, Tx I-PDU send mode is DIRECT, Tx signal transfer property is </p>
<p>‘TRIGGERED’, signal processing is immediate …) the maximum routing latency </p>
<p>is the sum of the following cycle times: </p>
<p><b>Call cycle of Com_MainFunctionRx()</b>: If the signal processing of the Rx I-PDU </p>
<p>is configured to deferred, the routing event flag is evaluated deferred by this </p>
<p>main-function. For immediate signal processing the flag is evaluated in context of </p>
<p>Com_RxIndication(). </p>
<p><b>Call cycle of Com_MainFunctionRouteSignals()</b>: This task polls the routing </p>
<p>event flag. If the flag is set the signal is copied to the destination I-PDU and the </p>
<p>transmission request flag of the Tx I-PDU is set. </p>
<p><b>Call cycle of Com_MainFunctionTx()</b>: This function is used to control the </p>
<p>transmission of I-PDUs. The function polls the transmission request flags and </p>
<p>triggers the I-PDU transmission by calling PduR_ComTransmit() of the related Tx </p>
<p>I-PDU. </p>
<p><b>3.1.20.4 </b></p>
<p><b>Gateway routing timeout </b></p>
<p>The Tx-I-PDU based gateway routing timeout describes the maximum time between two </p>
<p>routing events that refer the same Tx-I-PDU, before a timeout occurs. If a routing timeout </p>
<p>occurs,  the  cyclic  transmission of a Tx-I-PDU is  stopped. The  cyclic  transmission  of  the </p>
<p>PDU is reinitiated if any gateway mapping event occurs for the Tx-I-PDU. </p>
<p><b>3.1.21 </b></p>
<p><b>Gateway Description Routing </b></p>
<p>Description routing represents a basic routing mode, in which a portion of an incoming Rx-</p>
<p>I-PDU  is  copied  to  1…n  destination  Tx-I-PDUs  without  any  further  interpretation  and </p>
<p>processing  of  the  content.  In  this  mode,  the  normal  signal processing  path  is  bypassed </p>
<p>allowing a reduction of the routing event latency. </p>
<p>A  minimal  set  up  of  a  gateway  mapping  consists  of  one  source  and  one  destination </p>
<p>description. A source description is at least defined by a source I-PDU reference, start bit </p>
<p>position, bit size and endianness. The bit size defines the amount of bits that should be </p>
<p>copied starting from the start bit position. On the other hand, a destination description is </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>34 </p>
<p>based on template version 5.6.0 </p>
<p>defined by a destination I-PDU, a start bit position and endianness. Additionally, a transfer </p>
<p>property can be configured.   </p>
<p>The usage of this gateway mode requires several preconditions to be fulfilled: </p>
<p>- </p>
<p>Source </p>
<p>and </p>
<p>destination </p>
<p>description </p>
<p>of </p>
<p>a </p>
<p>gateway </p>
<p>mapping </p>
<p>share </p>
<p>the </p>
<p>same </p>
<p>endianness.  </p>
<p>- </p>
<p>Sign extension, endianness conversion and filtering are not supported. </p>
<p>The  call  context  and  the  point  of  time,  when  a  gateway  mapping  is  processed  after </p>
<p>reception, </p>
<p>are </p>
<p>defined </p>
<p>through </p>
<p>the </p>
<p>source </p>
<p>and </p>
<p>destination </p>
<p>I-PDU </p>
<p>signal </p>
<p>processing </p>
<p>property: </p>
<p> </p>
<p>Destination I-PDU </p>
<p>Immediate </p>
<p>Deferred </p>
<p>Source </p>
<p>I-PDU </p>
<p>Immediate </p>
<p>Rx and Tx: Com_RxIndication() </p>
<p>Rx:  Com_RxIndication()                        </p>
<p>Tx:  Com_MainFunctionTx() </p>
<p>Deferred </p>
<p>Rx and Tx: </p>
<p>Com_MainFunctionRouteSignals() </p>
<p>Rx: Com_MainFunctionRouteSignals()  </p>
<p>Tx: Com_MainFunctionTx() </p>
<p>Table 3-3  </p>
<p>Gateway mapping processing context </p>
<p>A  gateway  mapping  in  which  source  and  destination  descriptions  refer  I-PDUs  with  an </p>
<p>immediate signal processing property, have the least routing latency. In this case, copying </p>
<p>the  referred  bits  from  Rx-  to  Tx-I-PDU  buffer  and  transmit  initiation  take  place  in  the </p>
<p>context of Com_RxIndication().  </p>
<p>A further optimization for reducing the routing latency is the possibility to generate gateway </p>
<p>routing  functions  and  therefore  reduce  the  latency  which  is  introduced  by  ROM  access </p>
<p>operations. In this case, the generated embedded code is used instead of the static code. </p>
<p>This </p>
<p>optimization </p>
<p>strategy </p>
<p>can </p>
<p>be </p>
<p>enabled </p>
<p>by </p>
<p>activating </p>
<p>the </p>
<p>ComDescriptionRoutingCodeGeneration switch and is only available for a PRE-COMPILE </p>
<p>implementation variant. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>If multiple source I-PDUs have a deferred signal processing property, then the received </p>
<p>I-PDUs are processed in reverse order.  </p>
<p> </p>
<p><b>3.1.22 </b></p>
<p><b>Large I-PDUs </b></p>
<p>A  large  I-PDU  is  a  PDU  that  is  too  large  to  fit  into  a  single  L-PDU  of  the  underlying </p>
<p>communication protocol.  </p>
<p>A </p>
<p>large </p>
<p>I-PDU </p>
<p>must </p>
<p>have </p>
<p>the </p>
<p>ComIPduType </p>
<p>configured </p>
<p>to </p>
<p>TP </p>
<p>and </p>
<p>will </p>
<p>be </p>
<p>transmitted/received by a transport protocol.  </p>
<p>On  Receiver side  the COM  holds for always  a  valid  value  of  the signals  contained  in  a </p>
<p>large I-PDU.  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>35 </p>
<p>based on template version 5.6.0 </p>
<p>On </p>
<p>Transmission </p>
<p>side </p>
<p>the </p>
<p>COM </p>
<p>will </p>
<p>return </p>
<p>COM_BUSY, </p>
<p>by </p>
<p>a </p>
<p>call </p>
<p>of </p>
<p>the </p>
<p>APIs: </p>
<p>Com_SendSignal, Com_SendSignalGroup and Com_SendDynSignal when a large I-PDU </p>
<p>transmission is in progress. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>For large I-PDUs the ComTxIPduClearUpdateBit context can only be configured to </p>
<p>Confirmation. </p>
<p> </p>
<p><b>3.1.23 </b></p>
<p><b>Dynamic length signals </b></p>
<p>Dynamic  length  signals  are  ComSignals  or  ComGroupSignals  with  a  ComSignalType </p>
<p>configured to UINT8_DYN. The range of the length of a dynamic length signal is 0 to the </p>
<p>configured ComSignalLength.   </p>
<p>Dynamic length signals must be contained in an I-PDU with the ComIPduType configured </p>
<p>to TP and dynamic length signals must be placed at the end of the I-PDU.  </p>
<p>It  is  allowed  to  configure  an  update-bit  for  a  dynamic  length  signal.  In  this  case,  the  </p>
<p>update-bit must be located in front of the dynamic length signal. </p>
<p>Use the API Com_ReceiveDynSignal to receive a dynamic length signal and use the API </p>
<p>Com_SendDynSignal to send a dynamic length signal.  </p>
<p>Dynamic  length  signal  must  be  placed  to  byte  boundaries  and  must  have  the  signal </p>
<p>endianness OPAQUE. </p>
<p>Only  the  ComFilterAlgorithm  ALWAYS  and  NEVER  are  supported  for  dynamic  length </p>
<p>signals. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>The initial length of a dynamic length signal is 0.The configured ComSignalInitValue is </p>
<p>not required for the generation. </p>
<p> </p>
<p><b>3.1.24 </b></p>
<p><b>Com Optimizations </b></p>
<p><b>3.1.24.1 </b></p>
<p><b>Critical section threshold loop strategy </b></p>
<p>Critical </p>
<p>sections </p>
<p>as </p>
<p>described </p>
<p>in </p>
<p>chapter </p>
<p>4.2 </p>
<p>are </p>
<p>used </p>
<p>to </p>
<p>avoid </p>
<p>concurrency/ </p>
<p>data </p>
<p>consistency problems when shared ressources are used. However, switching the state of </p>
<p>critical sections might be an expensive operation. To optimize the relation between runtime </p>
<p>with locked interrupts and the cost introduced by entering and exiting an exclusive area a </p>
<p>threshold strategy is applied when multiple elements are processed in a loop. </p>
<p>This  strategy  locks  the  desired  exclusive  area  before  entering  loop  and  exits  it  after  all </p>
<p>elements  have  been  processed.  Further,  at  the  end  of  each  iteration  step  a  counter  is </p>
<p>incremented  and  compared  with  configured  threshold  value.  If  the  counter  exceeds  the </p>
<p>threshold the exclusive area will be temporarily be opened to allow rescheduling of waiting </p>
<p>tasks as shown in following example. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>36 </p>
<p>based on template version 5.6.0 </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Example</b> </p>
<p>Com_EnterExclusiveArea();<b> </b></p>
<p>for(; idx &lt; tableSize; idx++) </p>
<p>{ </p>
<p>  exclusiveAreaCounter++; </p>
<p>  /* Do processing */ </p>
<p>  if(exclusiveAreaCounter &gt;= exclusiveAreaThreshold) </p>
<p>  { </p>
<p>    exclusiveAreaCounter = 0; </p>
<p>    Com_ExitExclusiveArea(); </p>
<p>    Com_EnterExclusiveArea(); </p>
<p>  }   </p>
<p>}    </p>
<p>Com_ExitExclusiveArea();</p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p>Following thresholds can be configured: </p>
<p> </p>
<p><b>Threshold </b></p>
<p>(Affected Exclusive Area) </p>
<p><b>Description </b></p>
<p>ComGatewayDescriptionProcessingISRLockThreshold </p>
<p>(COM_EXCLUSIVE_AREA_BOTH) </p>
<p>Strategy is applied on gateway description processing, where </p>
<p>the source description is deferred. </p>
<p>ComGatewayProcessingISRLockThreshold </p>
<p>(COM_EXCLUSIVE_AREA_BOTH) </p>
<p>Strategy is applied in context of </p>
<p>Com_MainFunctionRouteSignals, where gateway signal </p>
<p>routing elements are being processed. </p>
<p>ComIPduGroupISRLockThreshold </p>
<p>(COM_EXCLUSIVE_AREA_RX/ </p>
<p> COM_EXCLUSIVE_AREA_TX) </p>
<p>Strategy is applied in context of Com_IpduGroupControl or </p>
<p>Com_IpduGroupStart / -Stop respectively. Threshold describes </p>
<p>the max. number of Rx or Tx I-PDU’s which are being started </p>
<p>or stopped before ISR Locks will temporarily be opened. </p>
<p>ComRxDeadlineMonitoringISRLockThreshold </p>
<p>(COM_EXCLUSIVE_AREA_RX) </p>
<p>Threshold describes the max. number of monitored Rx items (I-</p>
<p>PDU based or Signal/SignalGroup based), which are being </p>
<p>processed under locked interrupts in context of </p>
<p>Com_MainFunctionRx.  </p>
<p>Note: Threshold might be released temporarily if a timeout </p>
<p>notification callback has to be called. </p>
<p>ComRxDeferredProcessingISRLockThreshold </p>
<p>(COM_EXCLUSIVE_AREA_RX) </p>
<p>Threshold describes the max. number of Rx I-PDUs which are </p>
<p>being processed after reception in context of </p>
<p>Com_MainFunctionRx. </p>
<p>Note: Threshold might be released temporarily if a notification/ </p>
<p>or invalid notification has to be called, whenever the deferred </p>
<p>notification cache is full (see section 0). </p>
<p>ComTxCyclicProcessingISRLockThreshold </p>
<p>(COM_EXCLUSIVE_AREA_TX) </p>
<p>Threshold describes the maximum number of Tx I-PDUs </p>
<p>whose cyclic parameters are processed under locked interrupts </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>37 </p>
<p>based on template version 5.6.0 </p>
<p>before the interrupt lock will be opened temporarily. </p>
<p>ComTxDeadlineMonitoringISRLockThreshold </p>
<p>(COM_EXCLUSIVE_AREA_TX) </p>
<p>Threshold describes the max. number of monitored Tx I-PDUs, </p>
<p>which are being processed under locked interrupts in context of </p>
<p>Com_MainFunctionTx.  </p>
<p>Note: Threshold might be released temporarily if a timeout </p>
<p>notification callback has to be called. </p>
<p>ComTxProcessingISRLockThreshold </p>
<p>(COM_EXCLUSIVE_AREA_TX) </p>
<p>Threshold describes the max. number of Tx I-PDUs which are </p>
<p>processed for transmission under locked interrupts in context of </p>
<p>Com_MainFunctionTx. </p>
<p>Table 3-4  </p>
<p>Configurable Thresholds  </p>
<p><b>3.1.24.2 </b></p>
<p><b>Rx Notification caching </b></p>
<p>A RTE/ application callback must always be called with open interrupt locks, therefore it </p>
<p>might be required to temporarily exit an previously entered exclusive area. To reduce the </p>
<p>cost </p>
<p>of </p>
<p>switching </p>
<p>the </p>
<p>state </p>
<p>of </p>
<p>an </p>
<p>exclusive </p>
<p>area, </p>
<p>notification </p>
<p>callbacks </p>
<p>and </p>
<p>invalid </p>
<p>notification  callbacks  are  cached  in  a  configurable  notification  cache  while  signals  and </p>
<p>signal groups are being unpacked after reception. The idea behind this strategy is, instead </p>
<p>of </p>
<p>exiting </p>
<p>and </p>
<p>reentering </p>
<p>the </p>
<p>Rx </p>
<p>exclusive </p>
<p>area </p>
<p>multiple </p>
<p>times, </p>
<p>to </p>
<p>call </p>
<p>all </p>
<p>cached </p>
<p>notifications  afterwards  at  once,  after  all  received </p>
<p>signals/  signal  groups  have  been </p>
<p>processed.  However  caching  requires  some  amount  of  memory,  therefore  the  user  can </p>
<p>configure </p>
<p>the </p>
<p>cache </p>
<p>size. </p>
<p>Whenever, </p>
<p>the </p>
<p>cache </p>
<p>is </p>
<p>full, </p>
<p>the </p>
<p>exclusive </p>
<p>area </p>
<p>will </p>
<p>be </p>
<p>temporarily  exited  and  all  cached  notifications  and  invalid  notifications  callbacks  will  be </p>
<p>called.  </p>
<p>Depending on the configured signal processing property of the I-PDU, the callbacks will be </p>
<p>either be called in immediate or deferred notification cache: </p>
<p>- </p>
<p>Immediate </p>
<p>notification </p>
<p>cache: </p>
<p>Callbacks </p>
<p>will </p>
<p>be </p>
<p>cached </p>
<p>in </p>
<p>the </p>
<p>context </p>
<p>of </p>
<p>Com_RxIndication. Cache is reserved on the stack whenever an immediate I-PDU </p>
<p>is  being  received.  Therefore  the  cache  has  a  local  scope  for  each  received </p>
<p>immediate I-PDU. </p>
<p>- </p>
<p>Deferred </p>
<p>notification </p>
<p>cache: </p>
<p>Callbacks </p>
<p>will </p>
<p>be </p>
<p>cached </p>
<p>in </p>
<p>the </p>
<p>task </p>
<p>context </p>
<p>of </p>
<p>Com_MainFunctionRx.  One  shared  cache  is  reserved  on  the  heap  and  therefore </p>
<p>has  a  global  scope  for  all  deferred  I-PDUs.  Signal/  signal  group  callbacks  of  all </p>
<p>deferred I-PDUs will be cached before the callbacks will be called. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>User has to ensure that the configured stack size complies with the configured </p>
<p>immediate notification cache and reception rate of immediate I-PDUs. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>3.1.24.3 </b></p>
<p><b>Deferred Event Caching </b></p>
<p>This  feature  describes  one  optimization  strategy  for  reducing  the  processing  time  of </p>
<p>deferred I-PDUs. The main idea behind this feature is to cache the ID of received Rx-I-</p>
<p>PDUs that should be processed in deferred manner and therefore avoid the handling of all </p>
<p>configured  deferred </p>
<p>I-PDUs.  The </p>
<p>optional </p>
<p>parameter </p>
<p>ComRxDeferredEventCacheSize </p>
<p>describes a cache size for storing the amount of deferred I-PDUs. The maximum size of </p>
<p>the cache is limited to the number of configured I-PDUs. If the number of deferred events </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>38 </p>
<p>based on template version 5.6.0 </p>
<p>exceeds  the  cache  size,  the  deferred  I-PDUs  will  be  processed  in  normal  fashion  and </p>
<p>every configured I-PDU has to be checked if a new event has occurred. This feature can </p>
<p>be activated by enabling the ComDeferredEventCacheSupport switch. </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>If the deferred event caching strategy applies, received I-PDUs are processed in </p>
<p>reverse order.  </p>
<p> </p>
<p><b>3.1.24.4 </b></p>
<p><b>Main Function Timing Domains </b></p>
<p>In general, a timebase for reception and transmission of COM I-PDUs can be configured. </p>
<p>These  timebases  should  meet  the  call  cycle  periods  of  Com_MainFunctionRx()  and </p>
<p>Com_MainFunctionTx(), respectively. All timing operations are derived from the resolution </p>
<p>of these timebases.  </p>
<p>In order to reduce the computational overhead at runtime, separate timing domains can be </p>
<p>configured  for  Rx-/  Tx-deadline  monitoring  and  Tx-cyclic  operations.  The  resolutions  of </p>
<p>these timebases are limited to the resolution of the two basic timelines.  </p>
<p>The configured resolution of a timeline defines the granularity, how precisely a timing event </p>
<p>is measured. Figure 3-10  Main Function Timing Domains gives an example for the usage </p>
<p>of timing domains.  </p>
<p>Top most, a basic Rx-Timebase with a resolution of t</p>
<p>res</p>
<p> = 1ms is shown. In this example, </p>
<p>the reception of a signal should be monitored with a configured timeout of 3ms. In Figure </p>
<p>3-10  a)  an  Rx-Event  occurs  right  before  t  =  3ms.    Afterwards,  the  timeout  counter  is </p>
<p>decreased and checked every single tick of the Rx-Timebase until the timeout notification </p>
<p>function is called.  In Figure 3-10 b) a separate timing domain for deadline monitoring is </p>
<p>configured. This  domain  has  a  resolution  of  t</p>
<p>res</p>
<p>  =  3ms;  therefore  the  timeout  counter  is </p>
<p>decreased  and  checked  less frequently  until the  timeout notification function  is  called. If </p>
<p>many signals should be monitored, the usage of a separate timing domain can relieve the </p>
<p>computational unit. </p>
<p>However, a coarse resolution can lead to a timeline fuzziness, which is shown in Figure </p>
<p>3-10 c). Here, the timeline is configured similar to Figure 3-10 b), but this time the signal is </p>
<p>received  right  after  one  clock  cycle  of  the  deadline  monitoring  timeline.  The  timeout </p>
<p>counter  is  not  decreased  until  the  next  tick,  which  leads  to  a  worst-case  inaccuracy  of    </p>
<p>t</p>
<p>fuzz </p>
<p>= t</p>
<p>res</p>
<p>. </p>
<p> </p>
<p>Figure 3-10 </p>
<p>Main Function Timing Domains </p>
<p>To </p>
<p>activate </p>
<p>this </p>
<p>feature, </p>
<p>the </p>
<p>ComMainfunctionTimingDomainSupport </p>
<p>switch </p>
<p>must </p>
<p>be </p>
<p>enabled.  </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>39 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.1.24.4.1 </b></p>
<p><b>Timebase for Rx-deadline monitoring handling </b></p>
<p>If a Rx-deadline monitoring timebase is configured, all Rx-deadline monitoring operations </p>
<p>will rely on the resolution of this timing domain. Therefore, the configured timeout and first </p>
<p>timeout  parameters  must  be  a  multiple  of  this  resolution.  If  no  Rx-deadline  monitoring </p>
<p>timebase  is  specified,  all  deadline  monitoring  operations  are  derived  from  the  basic </p>
<p>reception timeline. </p>
<p><b>3.1.24.4.2 </b></p>
<p><b>Timebase for Tx-deadline monitoring handling </b></p>
<p>If a Tx-deadline monitoring timebase is configured, all Tx-deadline monitoring operations </p>
<p>will </p>
<p>rely </p>
<p>on </p>
<p>the </p>
<p>resolution  of </p>
<p>this </p>
<p>timing  domain.  Therefore, </p>
<p>the </p>
<p>configured </p>
<p>timeout </p>
<p>parameter must be a multiple of this resolution. If no Tx-deadline monitoring timebase is </p>
<p>specified, all deadline monitoring operation will rely on the basic transmission timeline. </p>
<p>Additionally,  if  the  gateway  functionality  is  configured,  the  I-PDU-based  gateway  routing </p>
<p>timeout is also configured within the Tx-deadline monitoring timebase. Hence, the gateway </p>
<p>routing timeout parameter must meet the above mentioned requirements. </p>
<p><b>3.1.24.4.3 </b></p>
<p><b>Timebase for Tx-cyclic operations </b></p>
<p>If  a  timebase  for Tx-cyclic  operations  is  configured,  following  operations  will  rely  on  the </p>
<p>resolution  of  this  timing  domain  and  therefore  have  to  be  a  multiple  of  the  configured </p>
<p>timebase resolution:  </p>
<p>-  Tx Mode Repetition Period </p>
<p>-  Tx Mode Time Offset </p>
<p>-  Tx Mode Time Period </p>
<p>-  Minimum Delay Time </p>
<p> </p>
<p><b>3.1.24.5 </b></p>
<p><b>Handle ID </b></p>
<p>All data unit elements (Signal, SignalGroup, GroupSignal, I-PDU, I-PDU Group) contain a </p>
<p>numerical ID which is unique for the type of the data unit. This  Handle ID is required to </p>
<p>access these elements via respective API calls. </p>
<p>However, Signals, SignalGroups and GroupSignals can be defined without being accessed </p>
<p>from outside. In this case, the assignment of a Handle ID is obsolete and can be removed </p>
<p>to reduce the computational overhead and code size. Though these unit elements cannot </p>
<p>be accessed, they are considered for the calculation of the initial values of their containing </p>
<p>I-PDU. </p>
<p>The </p>
<p>allocation </p>
<p>of </p>
<p>the </p>
<p>Handle </p>
<p>ID </p>
<p>is </p>
<p>coupled </p>
<p>to </p>
<p>the </p>
<p>values </p>
<p>of </p>
<p>parameters </p>
<p>ComSignalAccess and ComSignalGroupAccess. These parameters determine whether the </p>
<p>Handle ID is required or not: </p>
<p>ComSignalAccess/ </p>
<p>ComSignalGroupAccess </p>
<p>Description </p>
<p>Handle ID </p>
<p>ACCESS_NEEDED_BY_SWC_OR_COM </p>
<p>A data or a gateway mapping is </p>
<p>present. </p>
<p>x </p>
<p>ACCESS_NEEDED_BY_OTHER </p>
<p>A Handle ID is required by user or </p>
<p>any other module. </p>
<p>x </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>40 </p>
<p>based on template version 5.6.0 </p>
<p>ACCESS_UNCLEAR </p>
<p>It is unclear, if the data unit element </p>
<p>needs to be accessed. </p>
<p>x </p>
<p>ACCESS_NOT_NEEDED </p>
<p>Handle ID is not needed, as neither  </p>
<p>a data nor a gateway mapping could </p>
<p>be found. </p>
<p> </p>
<p> </p>
<p>It </p>
<p>should </p>
<p>be </p>
<p>noted, </p>
<p>if </p>
<p>the </p>
<p>Handle </p>
<p>ID </p>
<p>of </p>
<p>a </p>
<p>GroupSignal </p>
<p>is </p>
<p>required, </p>
<p>the </p>
<p>containing </p>
<p>SignalGroup  must  have  a  Handle  ID  as  well.  Further,  for  an  array-based  access  of </p>
<p>SignalGroups, a Handle ID for the SignalGroup and all GroupSignals is essential.   </p>
<p><b>3.1.24.6 </b></p>
<p><b>Autosar 3 based I-Pdu Group handling </b></p>
<p>If </p>
<p>the </p>
<p>switch </p>
<p>ComGeneral.ComOptimizedIPduGroupHandling </p>
<p>is </p>
<p>enabled </p>
<p>the </p>
<p>APIs </p>
<p>Com_IpduGroupControl  and  Com_ReceptionDMControl  are  replaced  by  the  Autosar  3 </p>
<p>APIs: </p>
<p>Com_IpduGroupStart, </p>
<p>Com_IpduGroupStop, </p>
<p>Com_EnableReceptionDM </p>
<p>and </p>
<p>Com_DisableReceptionDM.  These APIs  use  directly  the  I-PduGroup  Handle  Id  and  are </p>
<p>faster when one I-Pdu Group is switched at once. </p>
<p><b>3.2 </b></p>
<p><b>Initialization </b></p>
<p>Before  the  COM  layer  can  be  used  it  has  to  be  initialized  by  Com_Init().  This  function </p>
<p>performs  the  basic  initialization  but  does  not  enable  the  transmission  or  reception  of </p>
<p>signals and I-PDUs. </p>
<p>Initialization, starting and stopping of the layer and its I-PDU groups is normally driven by </p>
<p>the </p>
<p>Communication </p>
<p>Manager. </p>
<p>If </p>
<p>this </p>
<p>software </p>
<p>component </p>
<p>is </p>
<p>not </p>
<p>available </p>
<p>a </p>
<p>similar </p>
<p>component has to be provided by the integrator. </p>
<p>If </p>
<p>variables </p>
<p>exist, </p>
<p>which </p>
<p>cannot </p>
<p>be </p>
<p>initialized </p>
<p>by </p>
<p>the </p>
<p>startup </p>
<p>code, </p>
<p>the </p>
<p>function </p>
<p>Com_InitMemory() has to be called. </p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>41 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.3 </b></p>
<p><b>States </b></p>
<p><b>3.3.1 </b></p>
<p><b>Module States </b></p>
<p>The COM module has the following module states </p>
<p><b></b></p>
<p><b> </b></p>
<p>COM_UNINIT </p>
<p>The module is not initialized or not usable. </p>
<p><b></b></p>
<p><b> </b></p>
<p>COM_INIT </p>
<p>The module is initialized and usable. </p>
<p>and the possible state changes are shown in Figure 3-11. </p>
<p> </p>
<p>Figure 3-11 </p>
<p>Module State Machine </p>
<p>The current state of the COM can be accessed by the API ‘Com_GetStatus()’. </p>
<p> </p>
<p><b> </b></p>
<p><b>stm StateManager</b></p>
<p><b>Module </b></p>
<p><b>COM_UNINIT</b></p>
<p><b>Module </b></p>
<p><b>COM_INIT</b></p>
<p>Module</p>
<p>Ini ti al</p>
<p>PowerOn</p>
<p>Com_DeInit()</p>
<p>Com_Init()</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>42 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.3.2 </b></p>
<p><b>I-PDU States </b></p>
<p>Each I-PDU has the following states </p>
<p><b></b></p>
<p><b> </b></p>
<p>Activated </p>
<p><b></b></p>
<p><b> </b></p>
<p>Deactivated </p>
<p>An I-PDU is active if and only if at least one I-PDU group is active it belongs to. Thus an I-</p>
<p>PDU must belong to at least one I-PDU group in order to be able to get activated. </p>
<p>The possible state changes are shown in Figure 3-12. </p>
<p> </p>
<p>Figure 3-12 </p>
<p>I-PDU State Machine </p>
<p> </p>
<p><b> </b></p>
<p><b>stm IPduGroupHandling</b></p>
<p><b>I-PDU </b></p>
<p><b>activ ated</b></p>
<p><b>I-PDU </b></p>
<p><b>deactiv ated</b></p>
<p>I-PDU</p>
<p>Ini ti al</p>
<p>Com_Init()</p>
<p>Com_IpduGroupControl(RequestedActivationState == activated)</p>
<p>Com_IpduGroupControl(RequestedActivationState == deactivated),</p>
<p>Com_DeInit()</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>43 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.3.3 </b></p>
<p><b>Reception Deadline Monitoring States </b></p>
<p>The reception deadline monitoring of an I-PDU is enabled if and only if it is contained in an </p>
<p>I-PDU  group  that  has  reception  deadline  monitoring  enabled.  Otherwise,  the  reception </p>
<p>deadline monitoring of the I-PDU is disabled. </p>
<p>The possible state changes are shown in Figure 3-13. </p>
<p> </p>
<p>Figure 3-13 </p>
<p>Reception Deadline Monitoring State Machine </p>
<p> </p>
<p><b> </b></p>
<p><b>stm ReceptionDeadlineMonitoring</b></p>
<p><b>I-PDU DM </b></p>
<p><b>enabled</b></p>
<p><b>I-PDU DM </b></p>
<p><b>disabled</b></p>
<p>I-PDU DM</p>
<p>Ini ti al</p>
<p>Com_Init()</p>
<p>Com_IpduGroupControl(RequestedActivationState == activated) [CurrentActiveState == deactivated],</p>
<p>Com_ReceptionDMControl(RequestedActivationState == enabled), Com_EnableIPduReceptionDM()</p>
<p>Com_IpduGroupControl(RequestedActivationState == deactivated)  [CurrentActiveState == activated],</p>
<p>Com_ReceptionDMControl(RequestedActivationState == disabled), Com_DisableIPduReceptionDM()</p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>44 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.4 </b></p>
<p><b>Main Functions </b></p>
<p>COM provides following functions listed in Table 3-5 that have to be called cyclically by the </p>
<p>Basic Software Scheduler or a similar component. </p>
<p> </p>
<p><b>Main Function </b></p>
<p><b>Description </b></p>
<p>Com_MainFunctionRx() </p>
<p>This function performs the following reception </p>
<p>processings </p>
<p><b>&gt; </b></p>
<p>Reception deadline monitoring </p>
<p><b>&gt; </b></p>
<p>Deferred signal processing </p>
<p>This function must be called cyclically with a </p>
<p>cycle time identical to the configured Rx Time </p>
<p>Base. </p>
<p>Com_MainFunctionTx() </p>
<p>This function performs the following </p>
<p>transmission processings </p>
<p><b>&gt; </b></p>
<p>Transmission of I-PDUs </p>
<p><b>&gt; </b></p>
<p>Transmission deadline monitoring </p>
<p><b>&gt; </b></p>
<p>Deferred transmission notification </p>
<p>This function must be called cyclically with a </p>
<p>cycle time identical to the configured Tx Time </p>
<p>Base. </p>
<p>Com_MainFunctionRouteSignals() </p>
<p>This function performs the signal gateway </p>
<p>functionality. </p>
<p>Note that the transmission of Tx I-PDUs is </p>
<p>never triggered by this function directly. Thus </p>
<p>the Com_MainFunctionTx() is necessary for a </p>
<p>complete signal routing. </p>
<p>This function must be called cyclically with a </p>
<p>cycle time identical to the configured Gw Time </p>
<p>Base. </p>
<p>Table 3-5  </p>
<p>Main functions that have to be called cyclically </p>
<p> </p>
<p><b> </b></p>
<p><b> </b></p>
<p> </p>
<p><b>Note </b></p>
<p>To reduce the signal gateway latency, the order of the main function calls should be as </p>
<p>follows </p>
<p><b>&gt; </b></p>
<p>Com_MainFunctionRx() </p>
<p><b>&gt; </b></p>
<p>Com_MainFunctionRouteSignals() </p>
<p><b>&gt; </b></p>
<p>Com_MainFunctionTx() </p>
<p><b> </b></p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>45 </p>
<p>based on template version 5.6.0 </p>
<p><b>3.5 </b></p>
<p><b>Error Handling </b></p>
<p><b>3.5.1 </b></p>
<p><b>Development Error Reporting </b></p>
<p>By </p>
<p>default, </p>
<p>development </p>
<p>errors </p>
<p>are </p>
<p>reported </p>
<p>to </p>
<p>the </p>
<p>DET </p>
<p>using </p>
<p>the </p>
<p>service </p>
<p>Det_ReportError()</p>
<p>  as  specified  in  [2],  if development  error reporting  is  enabled  (i.e. </p>
<p>pre-compile parameter </p>
<p>COM_DEV_ERROR_DETECT==STD_ON</p>
<p>). </p>
<p>If  another  module  is  used  for  development  error  reporting,  the  function  prototype  for </p>
<p>reporting the error can be configured by the integrator, but must have the same signature </p>
<p>as the service </p>
<p>Det_ReportError()</p>
<p>. </p>
<p>The reported COM ID is 50. </p>
<p>The reported service IDs identify the services which are described in 0. The following table </p>
<p>presents the service IDs and the related services: </p>
<p><b>Service ID </b></p>
<p><b>Service </b></p>
<p>COMServiceId_Init </p>
<p>Com_Init </p>
<p>COMServiceId_DeInit </p>
<p>Com_DeInit </p>
<p>COMServiceId_IpduGroupControl </p>
<p>Com_IpduGroupControl </p>
<p>COMServiceId_ReceptionDMControl </p>
<p>Com_ReceptionDMControl </p>
<p>COMServiceId_GetStatus </p>
<p>Com_GetStatus </p>
<p>COMServiceId_GetConfigurationId </p>
<p>Com_GetConfigurationId </p>
<p>COMServiceId_GetVersionInfo </p>
<p>Com_GetVersionInfo </p>
<p>COMServiceId_SendSignal </p>
<p>Com_SendSignal </p>
<p>COMServiceId_ReceiveSignal </p>
<p>Com_ReceiveSignal </p>
<p>COMServiceId_UpdateShadowSignal </p>
<p>Com_UpdateShadowSignal </p>
<p>COMServiceId_SendSignalGroup </p>
<p>Com_SendSignalGroup </p>
<p>COMServiceId_ReceiveSignalGroup </p>
<p>Com_ReceiveSignalGroup </p>
<p>COMServiceId_ReceiveShadowSignal </p>
<p>Com_ReceiveShadowSignal </p>
<p>COMServiceId_InvalidateSignal </p>
<p>Com_InvalidateSignal </p>
<p>COMServiceId_InvalidateShadowSignal </p>
<p>Com_InvalidateShadowSignal </p>
<p>COMServiceId_TriggerIPDUSend </p>
<p>Com_TriggerIPDUSend </p>
<p>COMServiceId_MainFunctionRx </p>
<p>Com_MainFunctionRx </p>
<p>COMServiceId_MainFunctionTx </p>
<p>Com_MainFunctionTx </p>
<p>COMServiceId_MainFunctionRouteSignals </p>
<p>Com_MainFunctionRouteSignals </p>
<p>COMServiceId_InvalidateSignalGroup </p>
<p>Com_InvalidateSignalGroup </p>
<p>COMServiceId_ClearIpduGroupVector </p>
<p>Com_ClearIpduGroupVector </p>
<p>COMServiceId_SetIpduGroup </p>
<p>Com_SetIpduGroup </p>
<p>COMServiceId_SendDynSignal </p>
<p>Com_SendDynSignal </p>
<p>COMServiceId_ReceiveDynSignal </p>
<p>Com_ReceiveDynSignal </p>
<p>COMServiceId_SendSignalGroupArray </p>
<p>Com_SendSignalGroupArray </p>
<p>COMServiceId_ReceiveSignalGroupArray </p>
<p>Com_ReceiveSignalGroupArray </p>
<p>COMServiceId_SwitchIpduTxMode </p>
<p>Com_SwitchIpduTxMode </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>46 </p>
<p>based on template version 5.6.0 </p>
<p><b>Service ID </b></p>
<p><b>Service </b></p>
<p>COMServiceId_TriggerIPDUSendWithMetaD</p>
<p>ata </p>
<p>Com_TriggerIPDUSendWithMetaData </p>
<p>COMServiceId_TxConfirmation </p>
<p>Com_TxConfirmation </p>
<p>COMServiceId_TriggerTransmit </p>
<p>Com_TriggerTransmit </p>
<p>COMServiceId_RxIndication </p>
<p>Com_RxIndication </p>
<p>COMServiceId_CopyTxData </p>
<p>Com_CopyTxData </p>
<p>COMServiceId_CopyRxData </p>
<p>Com_CopyRxData </p>
<p>COMServiceId_TpRxIndication </p>
<p>Com_TpRxIndication </p>
<p>COMServiceId_StartOfReception </p>
<p>Com_StartOfReception </p>
<p>COMServiceId_TpTxConfirmation </p>
<p>Com_TpTxConfirmation </p>
<p>Table 3-6  </p>
<p>Service IDs </p>
<p>The errors reported to DET are described in the following table: </p>
<p><b>Error Code </b></p>
<p><b>Description </b></p>
<p>COM_E_PARAM  </p>
<p>The API service has been with a wrong parameter. </p>
<p>COM_E_UNINIT </p>
<p>The API service has been called before COM was initialized with </p>
<p>Com_Init() or after a call to Com_DeInit() </p>
<p>COM_E_PARAM_POINTER </p>
<p>The API service has been called with a not expected NULL </p>
<p>pointer. </p>
<p>COM_E_INIT_FAILED </p>
<p>The API service has been called with a not expected NULL </p>
<p>pointer </p>
<p>Table 3-7  </p>
<p>Errors reported to DET </p>
<p><b>3.5.2 </b></p>
<p><b>Production Code Error Reporting </b></p>
<p>No production error codes are currently defined for COM. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>47 </p>
<p>based on template version 5.6.0 </p>
<p><b>4 </b></p>
<p><b>Integration </b></p>
<p>This chapter gives necessary information for the integration of the MICROSAR COM into </p>
<p>an application environment of an ECU. </p>
<p><b>4.1 </b></p>
<p><b>Scope of Delivery </b></p>
<p>The delivery of the COM contains the files which are described in the chapters 4.1.1 and </p>
<p>4.1.2. </p>
<p><b>4.1.1 </b></p>
<p><b>Static Files </b></p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p>Com.c </p>
<p>This is the source file of the COM</p>
<p> </p>
<p>Com.h </p>
<p>This is the header file of COM </p>
<p>Table 4-1  </p>
<p>Static files </p>
<p><b>4.1.2 </b></p>
<p><b>Dynamic Files </b></p>
<p>The dynamic files are generated by the configuration tool DaVinci Configurator. </p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p>Com_Cfg.h </p>
<p>This file contains: </p>
<p><b>&gt; </b></p>
<p>global constant macros </p>
<p><b>&gt; </b></p>
<p>global function macros </p>
<p><b>&gt; </b></p>
<p>global data types and structures </p>
<p><b>&gt; </b></p>
<p>global data prototypes </p>
<p><b>&gt; </b></p>
<p>global function prototypes </p>
<p>of CONFIG-CLASS PRE-COMPILE data. </p>
<p>Com_Cbk.h </p>
<p>This is the generated header file of COM containing prototypes for lower layers. </p>
<p>Com_Cfg.c </p>
<p>This file contains: </p>
<p><b>&gt; </b></p>
<p>local constant macros </p>
<p><b>&gt; </b></p>
<p>local function macros </p>
<p><b>&gt; </b></p>
<p>local data types and structures </p>
<p><b>&gt; </b></p>
<p>local data prototypes </p>
<p><b>&gt; </b></p>
<p>local data </p>
<p><b>&gt; </b></p>
<p>global data </p>
<p>of CONFIG-CLASS PRE-COMPILE data.  </p>
<p>Com_Cot.h </p>
<p>This file contains the prototypes of: </p>
<p><b>&gt; </b></p>
<p>I-Pdu Callouts </p>
<p><b>&gt; </b></p>
<p>I-Pdu Trigger Transmit Callouts </p>
<p>This file is included by Com_Cbk.h. </p>
<p>Com_Lcfg.h </p>
<p>This file contains: </p>
<p><b>&gt; </b></p>
<p>global constant macros </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>48 </p>
<p>based on template version 5.6.0 </p>
<p><b>File Name </b></p>
<p><b>Description </b></p>
<p><b>&gt; </b></p>
<p>global function macros </p>
<p><b>&gt; </b></p>
<p>global data types and structures </p>
<p><b>&gt; </b></p>
<p>global data prototypes </p>
<p><b>&gt; </b></p>
<p>global function prototypes </p>
<p>of CONFIG-CLASS LINK data. </p>
<p>Com_Lcfg.c </p>
<p>This file contains: </p>
<p><b>&gt; </b></p>
<p>local constant macros </p>
<p><b>&gt; </b></p>
<p>local function macros </p>
<p><b>&gt; </b></p>
<p>local data types and structures </p>
<p><b>&gt; </b></p>
<p>local data prototypes </p>
<p><b>&gt; </b></p>
<p>local data </p>
<p><b>&gt; </b></p>
<p>global data </p>
<p>of CONFIG-CLASS LINK data. </p>
<p>Com_PBcfg.h </p>
<p>This file contains: </p>
<p><b>&gt; </b></p>
<p>global constant macros </p>
<p><b>&gt; </b></p>
<p>global function macros </p>
<p><b>&gt; </b></p>
<p>global data types and structures </p>
<p><b>&gt; </b></p>
<p>global data prototypes </p>
<p><b>&gt; </b></p>
<p>global function prototypes </p>
<p>of CONFIG-CLASS POST-BUILD data. </p>
<p>Com_PBcfg.c </p>
<p>This file contains: </p>
<p><b>&gt; </b></p>
<p>local constant macros </p>
<p><b>&gt; </b></p>
<p>local function macros </p>
<p><b>&gt; </b></p>
<p>local data types and structures </p>
<p><b>&gt; </b></p>
<p>local data prototypes </p>
<p><b>&gt; </b></p>
<p>local data </p>
<p><b>&gt; </b></p>
<p>global data </p>
<p>of CONFIG-CLASS POST-BUILD data. </p>
<p>Com_Types.h </p>
<p>This file contains the static type definitions. </p>
<p>Table 4-2  </p>
<p>Generated files </p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>49 </p>
<p>based on template version 5.6.0 </p>
<p><b>4.2 </b></p>
<p><b>Critical Sections </b></p>
<p>The handling of entering and leaving critical sections is provided by the RTE. The Vector </p>
<p>MICROSAR </p>
<p>COM </p>
<p>offers </p>
<p>several </p>
<p>groups  of  critical  sections  to  optimize  the  runtime </p>
<p>consumption. </p>
<p>For  a  more  detailed  description  of  the  possible  exclusive  area  implementation  variant </p>
<p>please refer to [4]. </p>
<p>Following critical sections are offered </p>
<p><b></b></p>
<p><b> </b></p>
<p>COM_EXCLUSIVE_AREA_BOTH </p>
<p>This critical section protects Rx and Tx ressources that are being accessed in context of </p>
<p>Com_MainFunctionRouteSignals for signal gateway routings or description routings with </p>
<p>configured deferred description source. Therefore the critical section enclosed with </p>
<p>COM_EXCLUSIVE_AREA_BOTH should never be interrupted by any Com API which </p>
<p>accesses Tx or Rx ressources likewise mentioned in the second and third column of </p>
<p>Table 4-3 . </p>
<p><b></b></p>
<p><b> </b></p>
<p>COM_EXCLUSIVE_AREA_TX </p>
<p>This critical section protects Tx ressources that can be accessed from various </p>
<p>contexts. Therefore the critical section enclosed with COM_EXCLUSIVE_AREA_TX </p>
<p>should never be interrupted by any Com API which accesses Tx ressources likewise </p>
<p>mentioned in the first and second column of Table 4-3 . </p>
<p><b></b></p>
<p><b> </b></p>
<p>COM_EXCLUSIVE_AREA_RX </p>
<p>This critical section protects Rx ressources that can be accessed from various </p>
<p>contexts. Therefore the critical section enclosed with COM_EXCLUSIVE_AREA_RX </p>
<p>should never be interrupted by any Com API which accesses Rx ressources likewise </p>
<p>mentioned in the first and second column of Table 4-3 . </p>
<p><b>COM_EXCLUSIVE_AREA_BOTH</b></p>
<p><b> </b></p>
<p><b>COM_EXCLUSIVE_AREA_TX</b></p>
<p><b> </b></p>
<p><b>COM_EXCLUSIVE_AREA_RX</b></p>
<p><b> </b></p>
<p>Com_MainFunctionRouteSignals</p>
<p> </p>
<p>Com_Deinit </p>
<p>Com_DeInit </p>
<p> </p>
<p>Com_Init </p>
<p>Com_Init </p>
<p> </p>
<p>Com_InvalidateSignal </p>
<p>Com_IPduGroupControl </p>
<p> </p>
<p>Com_InvalidateSignalGroup </p>
<p>Com_IPduGroupStart </p>
<p> </p>
<p>Com_IpduGroupControl </p>
<p>Com_IPduGroupStop </p>
<p> </p>
<p>Com_IpduGroupStart </p>
<p>Com_MainFunctionRx </p>
<p> </p>
<p>Com_IpduGroupStop </p>
<p>Com_ReceiveDynSignal </p>
<p> </p>
<p>Com_MainFunctionTx </p>
<p>Com_ReceiveSignal </p>
<p> </p>
<p>Com_RxIndication (UseCase: </p>
<p>Description routing with immediate </p>
<p>source description) </p>
<p>Com_ReceiveSignalGroup </p>
<p> </p>
<p>Com_SendDynSignal </p>
<p>Com_ReceiveSignalGroupArray </p>
<p> </p>
<p>Com_SendSignal </p>
<p>Com_RxIndication </p>
<p> </p>
<p>Com_SendSignalGroup </p>
<p>Com_TpRxindication </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>50 </p>
<p>based on template version 5.6.0 </p>
<p> </p>
<p>Com_SendSignalGroupArray </p>
<p> </p>
<p> </p>
<p>Com_TpRxIndication </p>
<p> </p>
<p> </p>
<p>Com_TpTxConfirmation (UseCase: </p>
<p>Description routing with immediate </p>
<p>source description) </p>
<p> </p>
<p> </p>
<p>Com_TxConfirmation </p>
<p> </p>
<p>Table 4-3  </p>
<p>Overview of used Exclusive Area per Com API </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>51 </p>
<p>based on template version 5.6.0 </p>
<p><b>5 </b></p>
<p><b>API Description </b></p>
<p>For an interfaces overview please see Figure 2-2. </p>
<p><b>5.1 </b></p>
<p><b>Type Definitions </b></p>
<p>The types defined by the COM are described in this chapter. </p>
<p><b>Type Name </b></p>
<p><b>C-Type </b></p>
<p><b>Description </b></p>
<p><b>Value Range </b></p>
<p>Com_StatusType </p>
<p>enum </p>
<p>This is a status value </p>
<p>returned by the API </p>
<p>service </p>
<p>Com_GetStatus(). </p>
<p>COM_UNINIT </p>
<p>The AUTOSAR COM module is not </p>
<p>initialized or not usable </p>
<p>COM_INIT </p>
<p>The AUTOSAR COM Module is </p>
<p>initialized and usable.</p>
<p> </p>
<p>Com_SignalIdType </p>
<p>c-type  </p>
<p>AUTOSAR COM signal </p>
<p>object identifier. </p>
<p>0..&lt;SignalIdmax&gt; </p>
<p>Zero-based integer number </p>
<p>Com_SignalGroupIdTy</p>
<p>pe </p>
<p>c-type </p>
<p>AUTOSAR COM signal </p>
<p>group object identifier. </p>
<p>0..&lt;SignalGroupIdmax&gt;  </p>
<p>Zero-based integer number </p>
<p>Com_IpduGroupIdTyp</p>
<p>e </p>
<p>c-type </p>
<p>AUTOSAR COM I-PDU </p>
<p>group object identifier. </p>
<p>0..&lt;IpduGroupIdmax&gt; </p>
<p>Zero-based integer number </p>
<p>Com_IpduGroupVector </p>
<p>byte </p>
<p>array </p>
<p>This type stores a flag </p>
<p>(bit) for each I-PDU </p>
<p>group </p>
<p>uint8[(ComSupportedIPduGroups - </p>
<p>1)/8 + 1] </p>
<p>Com_SerciveIdType </p>
<p>enum </p>
<p>Unique identifier of an </p>
<p>AUTOSAR COM service. </p>
<p>See in Table 3-6 </p>
<p> </p>
<p>Table 5-1  </p>
<p>Type definitions </p>
<p> </p>
<p><b> </b></p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>52 </p>
<p>based on template version 5.6.0 </p>
<p><b>5.2 </b></p>
<p><b>Services provided by COM </b></p>
<p><b>5.2.1 </b></p>
<p><b>Com_Init </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_Init </b>(const Com_ConfigType *config) </p>
<p><b>Parameter </b></p>
<p>config  </p>
<p>NULL_PTR if COM_USE_INIT_POINTER is STD_OFF Pointer to the Com </p>
<p>configuration data if COM_USE_INIT_POINTER is STD_ON </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This service initializes internal and external interfaces and variables of the AUTOSAR COM layer for the </p>
<p>further processing. After calling this function the inter-ECU communication is still disabled. </p>
<p><b>Particularities and Limitations </b></p>
<p>&gt; </p>
<p>Com_InitMemory() has to be executed previously, if the startup code does not initialize variables.Com is </p>
<p>not in initialized state.  </p>
<p> </p>
<p><b>Caution</b> </p>
<p>Com_Init shall not pre-empt any COM function. The rest of the system must guarantee that </p>
<p>Com_Init is not called in such a way. </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level and must not be interrupted by other administrative function </p>
<p>calls. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-2  </p>
<p>Com_Init </p>
<p> </p>
<p><b>5.2.2 </b></p>
<p><b>Com_InitMemory </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_InitMemory </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The function initializes variables, which cannot be initialized with the startup code. </p>
<p><b>Particularities and Limitations </b></p>
<p>Com_Init() is not called yet.  </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>53 </p>
<p>based on template version 5.6.0 </p>
<p>Table 5-3  </p>
<p>Com_InitMemory </p>
<p> </p>
<p><b>5.2.3 </b></p>
<p><b>Com_DeInit </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_DeInit </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This service stops the inter-ECU communication. All started I-PDU groups are stopped and have to be </p>
<p>started again, if needed, after Com_Init is called. By a call to ComDeInit COM is put into an not initialized </p>
<p>state. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p> </p>
<p><b>Caution</b> </p>
<p>Com_DeInit shall not pre-empt any COM function. The rest of the system must guarantee that </p>
<p>Com_DeInit is not called in such a way. </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level and must not be interrupted by other administrative function </p>
<p>calls. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-4  </p>
<p>Com_DeInit </p>
<p> </p>
<p><b>5.2.4 </b></p>
<p><b>Com_IpduGroupControl </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_IpduGroupControl </b>(Com_IpduGroupVector ipduGroupVector, boolean </p>
<p>initialize) </p>
<p><b>Parameter </b></p>
<p>ipduGroupVector  </p>
<p>I-PDU group vector containing the activation state (stopped = 0/ started = 1) </p>
<p>for all I-PDU groups. </p>
<p>initialize  </p>
<p>flag to request initialization of the I-PDUs which are newly started </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This service starts I-PDU groups. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>54 </p>
<p>based on template version 5.6.0 </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-5  </p>
<p>Com_IpduGroupControl </p>
<p> </p>
<p><b>5.2.5 </b></p>
<p><b>Com_ReceptionDMControl </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_ReceptionDMControl </b>(Com_IpduGroupVector ipduGroupVector) </p>
<p><b>Parameter </b></p>
<p>ipduGroupVector  </p>
<p>I-PDU group vector containing the requested deadline monitoring state </p>
<p>(disabled = 0/ enabled = 1) for all I-PDU groups. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This service enables or disables I-PDU group Deadline Monitoring. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-6  </p>
<p>Com_ReceptionDMControl </p>
<p> </p>
<p><b>5.2.6 </b></p>
<p><b>Com_IpduGroupStart </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_IpduGroupStart </b>(Com_IpduGroupIdType IpduGroupId, boolean Initialize) </p>
<p><b>Parameter </b></p>
<p>IpduGroupId  </p>
<p>ID of I-PDU group to be started </p>
<p>Initialize  </p>
<p>Flag to request initialization of the data in the I-PDUs of this I-PDU group </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Starts a preconfigured I-PDU group. For example, cyclic I-PDUs will be sent out cyclically after the call of </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>55 </p>
<p>based on template version 5.6.0 </p>
<p>Com_IpduGroupStart(). If Initialize is true all I-PDUs of the I-PDU group shall be (re-)initialized before the I-</p>
<p>PDU group is started. That means they shall behave like after a start-up of COM, for example the old_value </p>
<p>of the filter objects and shadow buffers of signal groups have to be (re-)initialized. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p> </p>
<p><b>Caution</b> </p>
<p>A call to Com_IpduGroupStart shall not be interrupted by another call to Com_IpduGroupStart, </p>
<p>Com_EnableReceptionDM, Com_DisableReceptionDM or a call to Com_IpduGroupStop. </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level and must not be interrupted by other Com_IpduGroupStart and </p>
<p>Com_IpduGroupStop calls. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-7  </p>
<p>Com_IpduGroupStart </p>
<p> </p>
<p><b>5.2.7 </b></p>
<p><b>Com_IpduGroupStop </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_IpduGroupStop </b>(Com_IpduGroupIdType IpduGroupId) </p>
<p><b>Parameter </b></p>
<p>IpduGroupId  </p>
<p>ID of I-PDU group to be stopped </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Stops a preconfigured I-PDU group. For example, cyclic I-PDUs will be stopped after the call of </p>
<p>Com_IpduGroupStop(). </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p> </p>
<p><b>Caution</b> </p>
<p>A call to Com_IpduGroupStop shall not be interrupted by another call to Com_IpduGroupStop, </p>
<p>Com_EnableReceptionDM, Com_DisableReceptionDM or a call to Com_IpduGroupStart. </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-8  </p>
<p>Com_IpduGroupStop </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>56 </p>
<p>based on template version 5.6.0 </p>
<p><b>5.2.8 </b></p>
<p><b>Com_EnableReceptionDM </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_EnableReceptionDM </b>(Com_IpduGroupIdType IpduGroupId) </p>
<p><b>Parameter </b></p>
<p>IpduGroupId  </p>
<p>ID of I-PDU group where reception DM shall be enabled. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Enables the reception deadline monitoring for the I-PDUs within the given I-PDU group. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p> </p>
<p><b>Caution</b> </p>
<p>A call to Com_EnableReceptionDM shall not be interrupted by another call to </p>
<p>Com_EnableReceptionDM, Com_IpduGroupStop, Com_DisableReceptionDM or a call to </p>
<p>Com_IpduGroupStart. </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-9  </p>
<p>Com_EnableReceptionDM </p>
<p> </p>
<p><b>5.2.9 </b></p>
<p><b>Com_DisableReceptionDM </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_DisableReceptionDM </b>(Com_IpduGroupIdType IpduGroupId) </p>
<p><b>Parameter </b></p>
<p>IpduGroupId  </p>
<p>ID of I-PDU group where reception DM shall be disabled. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Disables the reception deadline monitoring for the I-PDUs within the given I-PDU group. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p> </p>
<p><b>Caution</b> </p>
<p>A call to Com_DisableReceptionDM shall not be interrupted by another call to </p>
<p>Com_DisableReceptionDM, Com_IpduGroupStop, Com_EnableReceptionDM or a call to </p>
<p>Com_IpduGroupStart. </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>57 </p>
<p>based on template version 5.6.0 </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-10  </p>
<p>Com_DisableReceptionDM </p>
<p> </p>
<p><b>5.2.10 </b></p>
<p><b>Com_GetConfigurationId </b></p>
<p><b>Prototype </b></p>
<p>uint32 <b>Com_GetConfigurationId </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>uint32 </p>
<p>none </p>
<p>none </p>
<p>uint32 Configured ConfigurationID </p>
<p><b>Functional Description </b></p>
<p>This function shall perform the processing of the AUTOSAR COM receive processing that are not directly </p>
<p>initiated by the calls from the RTE and PDU-R. A call to Com_MainFunctionRx returns simply if COM was </p>
<p>not previously initialized with a call to Com_Init. </p>
<p><b>Particularities and Limitations </b></p>
<p>&gt; </p>
<p>-  CREQ-103161 This function shall perform the processing of the transmission activities that are not </p>
<p>directly initiated by the calls from the RTE and PDU-R. A call to Com_MainFunctionTx returns simply if </p>
<p>COM was not previously initialized with a call to Com_Init.-  CREQ-103168 Provides the unique identifier </p>
<p>of the configuration.-  </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level.  CREQ-107420 </p>
<p>Table 5-11  </p>
<p>Com_GetConfigurationId </p>
<p> </p>
<p><b>5.2.11 </b></p>
<p><b>Com_GetStatus </b></p>
<p><b>Prototype </b></p>
<p>Com_StatusType <b>Com_GetStatus </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>Com_StatusType </p>
<p>Com_StatusType </p>
<p><b>Functional Description </b></p>
<p>Returns the status of the AUTOSAR COM module. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>58 </p>
<p>based on template version 5.6.0 </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level.  CREQ-107163 </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-12  </p>
<p>Com_GetStatus </p>
<p> </p>
<p><b>5.2.12 </b></p>
<p><b>Com_GetVersionInfo </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_GetVersionInfo </b>(Std_VersionInfoType *versioninfo) </p>
<p><b>Parameter </b></p>
<p>versioninfo  </p>
<p>Pointer to where to store the version information of this module. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>Returns the version information of this module. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-13  </p>
<p>Com_GetVersionInfo </p>
<p> </p>
<p><b>5.2.13 </b></p>
<p><b>Com_TriggerIPDUSend </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_TriggerIPDUSend </b>(PduIdType PduId) </p>
<p><b>Parameter </b></p>
<p>PduId  </p>
<p>ID of Tx I-PDU. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>void </p>
<p><b>Functional Description </b></p>
<p>By a call to Com_TriggerIPDUSend the I-PDU with the given ID is triggered for transmission. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>59 </p>
<p>based on template version 5.6.0 </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-14  </p>
<p>Com_TriggerIPDUSend </p>
<p> </p>
<p><b>5.2.14 </b></p>
<p><b>Com_TriggerIPDUSendWithMetaData </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_TriggerIPDUSendWithMetaData </b>(PduIdType PduId, const uint8 *MetaData) </p>
<p><b>Parameter </b></p>
<p>PduId  </p>
<p>ID of Tx I-PDU. </p>
<p>MetaData  </p>
<p>The Meta data that shall be added to the I-PDU before sending. </p>
<p><b>Return code </b></p>
<p>void </p>
<p>void </p>
<p><b>Functional Description </b></p>
<p>By a call to Com_TriggerIPDUSendWithMetaData the given meta data is appended to the I-PDU and the I-</p>
<p>PDU with the given ID is triggered for transmission. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-15  </p>
<p>Com_TriggerIPDUSendWithMetaData </p>
<p> </p>
<p><b>5.2.15 </b></p>
<p><b>Com_ClearIpduGroupVector </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_ClearIpduGroupVector </b>(Com_IpduGroupVector ipduGroupVector) </p>
<p><b>Parameter </b></p>
<p>ipduGroupVector  </p>
<p>I-PDU group vector to be cleared </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This service sets all bits of the given Com_IpduGroupVector to 0. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>60 </p>
<p>based on template version 5.6.0 </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-16  </p>
<p>Com_ClearIpduGroupVector </p>
<p> </p>
<p><b>5.2.16 </b></p>
<p><b>Com_SetIpduGroup </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_SetIpduGroup </b>(Com_IpduGroupVector ipduGroupVector, Com_IpduGroupIdType </p>
<p>ipduGroupId, boolean bitval) </p>
<p><b>Parameter </b></p>
<p>ipduGroupVector  </p>
<p>I-PDU group vector to be modified </p>
<p>ipduGroupId  </p>
<p>ID used to identify the corresponding bit in the I-PDU group vector </p>
<p>bitval  </p>
<p>New value of the corresponding bit </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This service sets the value of a bit in an I-PDU group vector. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-17  </p>
<p>Com_SetIpduGroup </p>
<p> </p>
<p><b>5.2.17 </b></p>
<p><b>Com_ReceiveDynSignal </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_ReceiveDynSignal </b>(Com_SignalIdType SignalId, void *SignalDataPtr, </p>
<p>uint16 *Length) </p>
<p><b>Parameter </b></p>
<p>SignalId  </p>
<p>Id of signal or group signal to be received. </p>
<p>SignalDataPtr  </p>
<p>Reference to the signal data in which to store the received data. </p>
<p>Length  </p>
<p>in: maximum length that could be received out: length of the dynamic length </p>
<p>signal </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>61 </p>
<p>based on template version 5.6.0 </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted E_NOT_OK in case the Length (as in-</p>
<p>parameter) is smaller than the received length of the dynamic length signal </p>
<p>COM_SERVICE_NOT_AVAILABLE corresponding I-PDU group was stopped </p>
<p>(or service failed due to development error) COM_BUSY in case the TP-Buffer </p>
<p>is locked </p>
<p><b>Functional Description </b></p>
<p>The service Com_ReceiveDynSignal updates the signal data referenced by SignalDataPtr with the data in </p>
<p>the signal object identified by SignalId. The Length parameter indicates as &quot;in parameter&quot; the maximum </p>
<p>length that can be received and as &quot;out parameter&quot; the length of the written dynamic length signal or group </p>
<p>signal. If the signal processing of the corresponding I-Pdu is configured to DEFERRED the last received </p>
<p>signal value is available not until the next call to Com_MainfunctionRx. If a group signal is read, the data in </p>
<p>the shadow buffer should be updated before the call by a call of the service Com_ReceiveSignalGroup. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-18  </p>
<p>Com_ReceiveDynSignal </p>
<p> </p>
<p><b>5.2.18 </b></p>
<p><b>Com_ReceiveSignalGroup </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_ReceiveSignalGroup </b>(Com_SignalGroupIdType SignalGroupId) </p>
<p><b>Parameter </b></p>
<p>SignalGroupId  </p>
<p>Id of signal group to be received. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) </p>
<p><b>Functional Description </b></p>
<p>The service Com_ReceiveSignalGroup copies the received signal group to the shadow buffer. After this </p>
<p>call, the group signals could be copied from the shadow buffer to the upper layer by a call of </p>
<p>Com_ReceiveShadowSignal. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. To guarantee data consistency of the whole signal </p>
<p>group the complete reception of a signal group (consecutive calls of 'Com_ReceiveSignalGroup' and </p>
<p>'Com_ReceiveSignal') must not be interrupted by another reception request for the same signal group. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>62 </p>
<p>based on template version 5.6.0 </p>
<p>Table 5-19  </p>
<p>Com_ReceiveSignalGroup </p>
<p> </p>
<p><b>5.2.19 </b></p>
<p><b>Com_ReceiveSignalGroupArray </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_ReceiveSignalGroupArray </b>(Com_SignalGroupIdType SignalGroupId, uint8 </p>
<p>*SignalGroupArrayPtr) </p>
<p><b>Parameter </b></p>
<p>SignalGroupId  </p>
<p>Id of signal group to be received. </p>
<p>SignalGroupArrayPtr  </p>
<p>reference to the location where the received signal group array shall be stored </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) COM_BUSY in case the TP-Buffer is locked for large data types </p>
<p>handling </p>
<p><b>Functional Description </b></p>
<p>The service Com_ReceiveSignalGroupArray copies the received signal group array representation from the </p>
<p>PDU to the location designated by SignalGroupArrayPtr. </p>
<p><b>Particularities and Limitations </b></p>
<p>The configuration switch ComEnableSignalGroupArrayApi has to be enabled.  </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-20  </p>
<p>Com_ReceiveSignalGroupArray </p>
<p><b>5.2.20 </b></p>
<p><b>Com_InvalidateSignal </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_InvalidateSignal </b>(Com_SignalIdType SignalId) </p>
<p><b>Parameter </b></p>
<p>SignalId  </p>
<p>ID of signal or group signal to be invalidated. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) </p>
<p><b>Functional Description </b></p>
<p>This function invalidates the signal or group signal by calling Com_SendSignal with the configured invalid </p>
<p>value. If this function is used to invalidate a group signal, a call to Com_SendSignalGroup is needed to </p>
<p>update the signal group data. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>63 </p>
<p>based on template version 5.6.0 </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>Com_SendSignal and Com_InvalidateSignal calls for the same SignalId. </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-21  </p>
<p>Com_InvalidateSignal </p>
<p> </p>
<p><b>5.2.21 </b></p>
<p><b>Com_InvalidateSignalGroup </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_InvalidateSignalGroup </b>(Com_SignalGroupIdType SignalGroupId) </p>
<p><b>Parameter </b></p>
<p>SignalGroupId  </p>
<p>ID of signal group to be invalidated. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) </p>
<p><b>Functional Description </b></p>
<p>This function invalidates the whole signal group by calling Com_SendSignal with the configured invalid </p>
<p>value for all group signals of the signal group. After invalidation of the current signal group data </p>
<p>Com_SendSignalGroup is performed internally. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>Com_InvalidateSignalGroup calls for the same SignalGroupId and by Com_SendSignal calls for a </p>
<p>SignalId which is contained in the same signal group. </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-22  </p>
<p>Com_InvalidateSignalGroup </p>
<p><b>5.2.22 </b></p>
<p><b>Com_SwitchIpduTxMode </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_SwitchIpduTxMode </b>(PduIdType PduId, boolean Mode) </p>
<p><b>Parameter </b></p>
<p>PduId  </p>
<p>ID of Tx I-PDU. </p>
<p>Mode  </p>
<p>TX mode of the I-PDU (TRUE/FALSE) </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This method sets the TX Mode of the I-PDU referenced by PduId to Mode. In case the TX Mode changes </p>
<p>the new mode is immediately effective. In case the requested transmission mode was already active for this </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>64 </p>
<p>based on template version 5.6.0 </p>
<p>I-PDU, the call will have no effect. </p>
<p><b>Particularities and Limitations </b></p>
<p> </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-23  </p>
<p>Com_SwitchIpduTxMode </p>
<p><b>5.2.23 </b></p>
<p><b>Com_SendDynSignal </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_SendDynSignal </b>(Com_SignalIdType SignalId, const void *SignalDataPtr, </p>
<p>uint16 Length) </p>
<p><b>Parameter </b></p>
<p>SignalId  </p>
<p>ID of signal or group signal to be sent. </p>
<p>SignalDataPtr  </p>
<p>Reference to the signal data to be transmitted. </p>
<p>Length  </p>
<p>Length of the dynamic length signal. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) COM_BUSY in case the TP-Buffer is locked for large data types </p>
<p>handling </p>
<p><b>Functional Description </b></p>
<p>The service Com_SendDynSignal updates the signal or group signal object identified by SignalId with the </p>
<p>signal data referenced by the SignalDataPtr parameter. The Length parameter is evaluated for dynamic </p>
<p>length signals. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>Com_SendSignal and Com_InvalidateSignal calls for the same SignalId. </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-24  </p>
<p>Com_SendDynSignal </p>
<p> </p>
<p><b>5.2.24 </b></p>
<p><b>Com_SendSignal </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_SendSignal </b>(Com_SignalIdType SignalId, const void *SignalDataPtr) </p>
<p><b>Parameter </b></p>
<p>SignalId  </p>
<p>ID of signal or group signal to be sent. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>65 </p>
<p>based on template version 5.6.0 </p>
<p>SignalDataPtr  </p>
<p>Reference to the signal data to be transmitted. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) COM_BUSY in case the TP-Buffer is locked for large data types </p>
<p>handling </p>
<p><b>Functional Description </b></p>
<p>The service Com_SendSignal updates the signal or group signal object identified by SignalId with the signal </p>
<p>data referenced by the SignalDataPtr parameter. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>Com_SendSignal and Com_InvalidateSignal calls for the same SignalId. </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-25  </p>
<p>Com_SendSignal </p>
<p> </p>
<p><b>5.2.25 </b></p>
<p><b>Com_SendSignalGroup </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_SendSignalGroup </b>(Com_SignalGroupIdType SignalGroupId) </p>
<p><b>Parameter </b></p>
<p>SignalGroupId  </p>
<p>ID of signal group to be send. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) </p>
<p><b>Functional Description </b></p>
<p>The service Com_SendSignalGroup copies the content of the associated shadow buffer to the associated I-</p>
<p>PDU buffer. Prior to this call, all group signals should be updated in the shadow buffer by the call of </p>
<p>Com_SendSignal. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>Com_SendSignalGroup calls for the same SignalGroupId. To guarantee data consistency of the whole </p>
<p>signal group the complete transmission of a signal group (consecutive calls of 'Com_SendSignal' and </p>
<p>'Com_SendSignalGroup') must not be interrupted by another transmission request for the same signal </p>
<p>group or by a call of 'Com_InvalidateSignalGroup'. </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-26  </p>
<p>Com_SendSignalGroup </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>66 </p>
<p>based on template version 5.6.0 </p>
<p> </p>
<p><b>5.2.26 </b></p>
<p><b>Com_SendSignalGroupArray </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_SendSignalGroupArray </b>(Com_SignalGroupIdType SignalGroupId, const </p>
<p>uint8 *SignalGroupArrayPtr) </p>
<p><b>Parameter </b></p>
<p>SignalGroupId  </p>
<p>Id of signal group to be sent. </p>
<p>SignalGroupArrayPtr  </p>
<p>Reference to the signal group array. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) COM_BUSY in case the TP-Buffer is locked for large data types </p>
<p>handling </p>
<p><b>Functional Description </b></p>
<p>The service Com_SendSignalGroupArray copies the content of the provided SignalGroupArrayPtr to the </p>
<p>associated I-PDU. The provided data shall correspond to the array representation of the signal group. </p>
<p><b>Particularities and Limitations </b></p>
<p>The configuration switch ComEnableSignalGroupArrayApi has to be enabled.  </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-27  </p>
<p>Com_SendSignalGroupArray </p>
<p> </p>
<p> </p>
<p><b>5.2.27 </b></p>
<p><b>Com_MainFunctionRx </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_MainFunctionRx </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function shall perform the processing of the AUTOSAR COM receive processing that are not directly </p>
<p>initiated by the calls from the RTE and PDU-R. A call to Com_MainFunctionRx returns simply if COM was </p>
<p>not previously initialized with a call to Com_Init. </p>
<p><b>Particularities and Limitations </b></p>
<p>-  CREQ-103161 </p>
<p>Call context </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>67 </p>
<p>based on template version 5.6.0 </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>Table 5-28  </p>
<p>Com_MainFunctionRx </p>
<p> </p>
<p><b>5.2.28 </b></p>
<p><b>Com_MainFunctionTx </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_MainFunctionTx </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function shall perform the processing of the transmission activities that are not directly initiated by the </p>
<p>calls from the RTE and PDU-R. A call to Com_MainFunctionTx returns simply if COM was not previously </p>
<p>initialized with a call to Com_Init. </p>
<p><b>Particularities and Limitations </b></p>
<p>-  CREQ-103168 </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>Table 5-29  </p>
<p>Com_MainFunctionTx </p>
<p> </p>
<p><b>5.2.29 </b></p>
<p><b>Com_MainFunctionRouteSignals </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_MainFunctionRouteSignals </b>(void) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>None </p>
<p><b>Functional Description </b></p>
<p>Calls the signal gateway part of COM to forward received signals to be routed. The insertion of this call is </p>
<p>necessary for decoupling receive interrupts and signal gateway tasks. A call to </p>
<p>Com_MainFunctionRouteSignals returns simply if COM was not previously initialized with a call to </p>
<p>Com_Init. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p> </p>
<p><b>Caution</b> </p>
<p>The time between to consecutive calls (perhaps the related task/thread cycle) affects directly the </p>
<p>signal gateway latency.  CREQ-103192 </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>68 </p>
<p>based on template version 5.6.0 </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function must be called on task level. </p>
<p>Table 5-30  </p>
<p>Com_MainFunctionRouteSignals </p>
<p> </p>
<p><b>5.2.30 </b></p>
<p><b>Com_ReceiveSignal </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_ReceiveSignal </b>(Com_SignalIdType SignalId, void *SignalDataPtr) </p>
<p><b>Parameter </b></p>
<p>SignalId  </p>
<p>Id of signal or group signal to be received. </p>
<p>SignalDataPtr  </p>
<p>Reference to the signal data in which to store the received data. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>uint8 E_OK service has been accepted COM_SERVICE_NOT_AVAILABLE </p>
<p>corresponding I-PDU group was stopped (or service failed due to development </p>
<p>error) </p>
<p><b>Functional Description </b></p>
<p>The service Com_ReceiveSignal updates the signal data referenced by SignalDataPtr with the data in the </p>
<p>signal object identified by SignalId. If the signal processing of the corresponding I-Pdu is configured to </p>
<p>DEFERRED the last received signal value is available not until the next call to Com_MainfunctionRx. If a </p>
<p>group signal is read, the data in the shadow buffer should be updated before the call by a call of the service </p>
<p>Com_ReceiveSignalGroup. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-31  </p>
<p>Com_ReceiveSignal </p>
<p> </p>
<p><b>5.2.31 </b></p>
<p><b>Com_ReceiveShadowSignal </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_ReceiveShadowSignal </b>(Com_SignalIdType SignalId, void *SignalDataPtr) </p>
<p><b>Parameter </b></p>
<p>SignalId  </p>
<p>Id of group signal to be received. </p>
<p>SignalDataPtr  </p>
<p>Reference to the group signal data in which to store the received data. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>void </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>69 </p>
<p>based on template version 5.6.0 </p>
<p><b>Functional Description </b></p>
<p>The service Com_ReceiveShadowSignal updates the group signal data referenced by SignalDataPtr with </p>
<p>the data in the shadow buffer. The data in the shadow buffer should be updated before the call of </p>
<p>Com_ReceiveShadowSignal by a call of the service Com_ReceiveSignalGroup. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-32  </p>
<p>Com_ReceiveShadowSignal </p>
<p> </p>
<p><b>5.2.32 </b></p>
<p><b>Com_UpdateShadowSignal </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_UpdateShadowSignal </b>(Com_SignalIdType SignalId, const void </p>
<p>*SignalDataPtr) </p>
<p><b>Parameter </b></p>
<p>SignalId  </p>
<p>ID of group signal to be updated. </p>
<p>SignalDataPtr  </p>
<p>Reference to the group signal data to be updated. </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>void </p>
<p><b>Functional Description </b></p>
<p>The service Com_UpdateShadowSignal updates a group signal with the data, referenced by SignalDataPtr. </p>
<p>The update of the group signal data is done in the shadow buffer, not in the I-PDU. To send out the shadow </p>
<p>buffer, Com_SendSignalGroup has to be called. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Non-Reentrant </p>
<p>Table 5-33  </p>
<p>Com_UpdateShadowSignal </p>
<p><b>5.2.33 </b></p>
<p><b>Com_InvalidateShadowSignal </b></p>
<p><b>Prototype </b></p>
<p>uint8 <b>Com_InvalidateShadowSignal </b>(Com_SignalIdType SignalId) </p>
<p><b>Parameter </b></p>
<p>SignalId  </p>
<p>ID of group signal to be invalidated. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>70 </p>
<p>based on template version 5.6.0 </p>
<p><b>Return code </b></p>
<p>uint8 </p>
<p>void </p>
<p><b>Functional Description </b></p>
<p>This function invalidates the group signal by calling Com_SendSignal with the configured invalid value. An </p>
<p>additional call to Com_SendSignalGroup is needed to update the signal group data. </p>
<p><b>Particularities and Limitations </b></p>
<p>- </p>
<p>Call context </p>
<p>&gt; </p>
<p>The function can be called on interrupt and task level and has not to be interrupted by other </p>
<p>Com_SendSignal and Com_InvalidateSignal calls for the same SignalId. </p>
<p>&gt; </p>
<p>This function is Synchronous </p>
<p>&gt; </p>
<p>This function is Reentrant </p>
<p>Table 5-34  </p>
<p>Com_InvalidateShadowSignal </p>
<p><b>5.3 </b></p>
<p><b>Services used by COM </b></p>
<p>In the following table services provided by other components, which are used by the COM  </p>
<p>are listed. For details about prototype and functionality refer to the documentation of the </p>
<p>providing component. </p>
<p><b>Component </b></p>
<p><b>API </b></p>
<p>PDUR </p>
<p>PduR_ComTransmit </p>
<p>DET </p>
<p>Det_ReportError </p>
<p>Application </p>
<p>I-PDU Callout </p>
<p>RTE/Application </p>
<p>Signal and ComSignalGroup configurable </p>
<p>callback/notification functions </p>
<p>EcuM </p>
<p>EcuM_BswErrorHook </p>
<p>Table 5-35  </p>
<p>Services used by the COM </p>
<p><b>5.4 </b></p>
<p><b>Callback Functions </b></p>
<p>This chapter describes the callback functions that are implemented by the COM and can </p>
<p>be invoked by other modules. The prototypes of the callback functions are provided in the </p>
<p>header file </p>
<p>Com_Cbk.h</p>
<p> by the COM. </p>
<p><b>5.4.1 </b></p>
<p><b>Com_RxIndication </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_RxIndication </b>(PduIdType RxPduId, const PduInfoType* </p>
<p>PduInfoPtr) </p>
<p><b>Parameter </b></p>
<p>RxPduId </p>
<p>ID of AUTOSAR COM I-PDU that has been received. Identifies the data that </p>
<p>has been received. Range: 0..(maximum number of I-PDU IDs received by </p>
<p>AUTOSAR COM) - 1 </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>71 </p>
<p>based on template version 5.6.0 </p>
<p>PduInfoPtr </p>
<p>PduInfoPtr Payload information of the received I-PDU (pointer to data and </p>
<p>data length). </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function is called by the lower layer after an I-PDU has been received. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the lower layer. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. It is not allowed to use CAT1 interrupts with Rte </p>
<p>(BSW00326]). Due to this, the interrupt context shall be configured to a CAT2 interrupt if an Rte is used. </p>
<p>Table 5-36  </p>
<p>Com_RxIndication </p>
<p><b>5.4.2 </b></p>
<p><b>Com_TxConfirmation </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_TxConfirmation </b>(PduIdType TxPduId) </p>
<p><b>Parameter </b></p>
<p>TxPduId </p>
<p>ID of AUTOSAR COM I-PDU that has been transmitted. Range: 0..(maximum </p>
<p>number of I-PDU IDs transmitted by AUTOSAR COM) - 1 </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function is called by the lower layer after the PDU has been transmitted on the network. A confirmation </p>
<p>that is received for an I-PDU that does not require a confirmation is silently discarded. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the lower layer. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. It is not allowed to use CAT1 interrupts with Rte </p>
<p>(BSW00326]). Due to this, the interrupt context shall be configured to a CAT2 interrupt if an Rte is used. </p>
<p>Table 5-37  </p>
<p>Com_TxConfirmation </p>
<p><b>5.4.3 </b></p>
<p><b>Com_TriggerTransmit </b></p>
<p><b>Prototype </b></p>
<p>Std_ReturnType <b>Com_TriggerTransmit </b>(PduIdType TxPduId, PduInfoType </p>
<p>*PduInfoPtr) </p>
<p><b>Parameter </b></p>
<p>TxPduId </p>
<p>ID of AUTOSAR COM I-PDU that is requested to be transmitted by AUTOSAR </p>
<p>COM. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>72 </p>
<p>based on template version 5.6.0 </p>
<p>PduInfoPtr </p>
<p>Contains a pointer to a buffer (SduDataPtr) where the SDU data shall be </p>
<p>copied to, and the available buffer size in SduLengh. On return, the service </p>
<p>will indicate the length of the copied SDU data in SduLength. </p>
<p><b>Return code </b></p>
<p>Std_ReturnType </p>
<p>E_OK: SDU has been copied and SduLength indicates the number of copied </p>
<p>bytes. </p>
<p>E_NOT_OK: No data has been copied, because Com is not initialized or </p>
<p>TxPduId is not valid or PduInfoPtr is NULL_PTR or SduDataPtr is NULL_PTR </p>
<p>or SduLength is too small. </p>
<p><b>Functional Description </b></p>
<p>This function is called by the lower layer when an AUTOSAR COM I-PDU shall be transmitted. Within this </p>
<p>function, AUTOSAR COM shall copy the contents of its I-PDU transmit buffer to the L-PDU buffer given by </p>
<p>SduPtr. Use case: This function is used e.g. by the LIN Master for sending out a LIN frame. In this case, the </p>
<p>trigger transmit can be initiated by the Master schedule table itself or a received LIN header. This function </p>
<p>is also used by the FlexRay Interface for requesting PDUs to be sent in static part (synchronous to the </p>
<p>FlexRay global time). Once the I-PDU has been successfully sent by the lower layer (PDU-Router), the </p>
<p>lower layer must call Com_TxConfirmation(). </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the lower layer. </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. It is not allowed to use CAT1 interrupts with Rte </p>
<p>(BSW00326]). Due to this, the interrupt context shall be configured to a CAT2 interrupt if an Rte is used. </p>
<p>Table 5-38  </p>
<p>Com_TriggerTransmit </p>
<p><b>5.4.4 </b></p>
<p><b>Com_TpTxConfirmation </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_TpTxConfirmation </b>(PduIdType PduId, Std_ReturnType Result) </p>
<p><b>Parameter </b></p>
<p>PduId </p>
<p>ID of the I-PDU that has been transmitted. </p>
<p>Result </p>
<p>Result of the transmission of the I-PDU </p>
<p><b>Return Code </b></p>
<p>void </p>
<p>None. </p>
<p><b>Functional Description </b></p>
<p>This function is called by the PduR after a large I-PDU has been transmitted via the transport protocol on </p>
<p>its network. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the lower layer. </p>
<p>Pre-Conditions </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. </p>
<p>Table 5-39  </p>
<p>Com_TpTxConfirmation </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>73 </p>
<p>based on template version 5.6.0 </p>
<p> </p>
<p><b>5.4.5 </b></p>
<p><b>Com_CopyTxData </b></p>
<p><b>Prototype </b></p>
<p>BufReq_ReturnType <b>Com_CopyTxData </b>(PduIdType PduId, PduInfoType </p>
<p>*PduInfoPtr, RetryInfoType *RetryInfoPtr, PduLengthType *TxDataCntPtr) </p>
<p><b>Parameter </b></p>
<p>PduId </p>
<p>ID of Com TP I-PDU to be transmitted. </p>
<p>PduInfoPt </p>
<p>Pointer to a PduInfoType, which indicates the number of bytes to be copied </p>
<p>(SduLength) and the location where the data have to be copied to </p>
<p>(SduDataPtr). An SduLength of 0 is possible in order to poll the available </p>
<p>transmit data count. In this case no data are to be copied and SduDataPtr </p>
<p>might be invalid. </p>
<p>RetryInfoPtr </p>
<p>The COM module ignores the value of this pointer, since it always keeps the </p>
<p>complete buffer until the transmission of a large I-PDU is either confirmed or </p>
<p>aborted. </p>
<p>TxDataCntPtr </p>
<p>Out parameter: Remaining Tx data after completion of this call. </p>
<p><b>Return Code </b></p>
<p>BufReq_ReturnType </p>
<p>BufReq_ReturnType BUFREQ_OK: Data has been copied to the transmit </p>
<p>buffer completely as requested. BUFREQ_E_BUSY: The transmission buffer </p>
<p>is actually not available (implementation specific). BUFREQ_E_NOT_OK: </p>
<p>Data has not been copied. Request failed, in case the corresponding I-PDU </p>
<p>was stopped. </p>
<p><b>Functional Description </b></p>
<p>This function is called by the lower layer to copy Data from the Com TP buffer to the lower layer TP buffer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the lower layer. </p>
<p>Pre-Conditions </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. </p>
<p>Table 5-40  </p>
<p>Com_CopyTxData </p>
<p> </p>
<p><b>5.4.6 </b></p>
<p><b>Com_TpRxIndication </b></p>
<p><b>Prototype </b></p>
<p>void <b>Com_TpRxIndication </b>(PduIdType PduId, Std_ReturnType Result) </p>
<p><b>Parameter </b></p>
<p>PduId </p>
<p>ID of AUTOSAR COM I-PDU that has been received. Identifies the data that </p>
<p>has been received. Range: 0..(maximum number of I-PDU IDs received by </p>
<p>AUTOSAR COM) - 1 </p>
<p>Result </p>
<p>Indicates whether the Message was received successfully. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>74 </p>
<p>based on template version 5.6.0 </p>
<p><b>Return Code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This function is called by the lower layer after a TP I-PDU has been received. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the lower layer. </p>
<p>Pre-Conditions </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. It is not allowed to use CAT1 interrupts with Rte </p>
<p>(BSW00326]). Due to this, the interrupt context shall be configured to a CAT2 interrupt if an Rte is used. </p>
<p>Table 5-41  </p>
<p>Com_TpRxIndication </p>
<p> </p>
<p><b>5.4.7 </b></p>
<p><b>Com_StartOfReception </b></p>
<p><b>Prototype </b></p>
<p>BufReq_ReturnType <b>Com_StartOfReception </b>(PduIdType ComRxPduId, </p>
<p>PduInfoType* TpSduInfoPtr, PduLengthType TpSduLength, PduLengthType </p>
<p>*RxBufferSizePtr) </p>
<p><b>Parameter </b></p>
<p>ComRxPduId </p>
<p>ID of AUTOSAR COM I-PDU that has been received. Identifies the data that </p>
<p>has been received. </p>
<p>TpSduInfoPtr </p>
<p>Is currently not used by COM. </p>
<p>TpSduLength </p>
<p>complete length of the TP I-PDU to be received. </p>
<p>RxBufferSizePtr </p>
<p>The Com returns in this value the remaining TP buffer size to the lower layer. </p>
<p><b>Return Code </b></p>
<p>BufReq_ReturnType </p>
<p>BufReq_ReturnType BUFREQ_OK: Connection has been accepted. </p>
<p>RxBufferSizePtr indicates the available receive buffer. BUFREQ_E_NOT_OK: </p>
<p>Connection has been rejected. RxBufferSizePtr remains unchanged. </p>
<p>BUFREQ_E_OVFL: In case the configured buffer size as specified via </p>
<p>ComPduIdRef.PduLength is smaller than TpSduLength. BUFREQ_E_BUSY: </p>
<p>In case the reception buffer is actually not available for a new reception </p>
<p>(implementation specific). </p>
<p><b>Functional Description </b></p>
<p>This function is called by the lower layer to indicate the start of a incomming TP connection. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the lower layer. </p>
<p>Pre-Conditions </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. </p>
<p>Table 5-42  </p>
<p>Com_StartOfReception </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>75 </p>
<p>based on template version 5.6.0 </p>
<p> </p>
<p><b>5.4.8 </b></p>
<p><b>Com_CopyRxData </b></p>
<p><b>Prototype </b></p>
<p>BufReq_ReturnType <b>Com_CopyRxData </b>(PduIdType PduId, const PduInfoType </p>
<p>*PduInfoPointer, PduLengthType *RxBufferSizePtr) </p>
<p><b>Parameter </b></p>
<p>PduId </p>
<p>ID of AUTOSAR COM I-PDU that has been received. Identifies the data that </p>
<p>has been received. </p>
<p>PduInfoPointer </p>
<p>Payload information of the received TP segment (pointer to data and data </p>
<p>length). </p>
<p>RxBufferSizePtr </p>
<p>The Com returns in this value the remaining TP buffer size to the lower layer. </p>
<p><b>Return Code </b></p>
<p>BufReq_ReturnType </p>
<p>BufReq_ReturnType BUFREQ_OK: Connection has been accepted. </p>
<p>RxBufferSizePtr indicates the available receive buffer. BUFREQ_E_NOT_OK: </p>
<p>Connection has been rejected. RxBufferSizePtr remains unchanged. </p>
<p>BUFREQ_E_OVFL: In case the configured buffer size as specified via </p>
<p>ComPduIdRef.PduLength is smaller than TpSduLength. BUFREQ_E_BUSY: </p>
<p>In case the reception buffer is actually not available for a new reception </p>
<p>(implementation specific). </p>
<p><b>Functional Description </b></p>
<p>This function is called by the lower layer to hand a received TP segment to Com. The Com copies the </p>
<p>received segment in his internal tp buffer. </p>
<p><b>Particularities and Limitations </b></p>
<p>The function is called by the lower layer. </p>
<p>Pre-Conditions </p>
<p>Call Context </p>
<p>The function can be called on interrupt and task level. </p>
<p>Table 5-43  </p>
<p>Com_CopyRxData </p>
<p><b>5.5 </b></p>
<p><b>Configurable Interfaces </b></p>
<p><b>5.5.1 </b></p>
<p><b>Notifications </b></p>
<p>At its configurable interfaces the COM defines notifications that can be mapped to callback </p>
<p>functions provided by other modules. The mapping is not statically defined by the COM but </p>
<p>can be performed at configuration time. The function prototypes that can be used for the </p>
<p>configuration  have  to  match  the  appropriate  function  prototype  signatures,  which  are </p>
<p>described in the following sub-chapters.  </p>
<p><b>5.5.1.1 </b></p>
<p><b>Indication Notification </b></p>
<p><b>Prototype </b></p>
<p>void <b>[Indication Notification Name] </b>( void ) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>76 </p>
<p>based on template version 5.6.0 </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The notification function is called after the message has been received successfully. The function can be </p>
<p>configured for signals and signal groups with a configurable function name. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>none </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The call context depends on the configuration of the parameter ComIPduSignalProcessing for </p>
<p>the I-PDU. </p>
<p>Table 5-44  </p>
<p>Indication Notification </p>
<p><b>5.5.1.2 </b></p>
<p><b>Confirmation Notification </b></p>
<p><b>Prototype </b></p>
<p>void <b>[Confirmation Notification Name] </b>( void ) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>The notification function is called after successful transmission of the I-PDU containing the message. The </p>
<p>function can be configured for signals and signal groups with a configurable function name. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>none </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The call context depends on the configuration of the parameter ComIPduSignalProcessing for </p>
<p>the I-PDU. </p>
<p>Table 5-45  </p>
<p>Confirmation Notification </p>
<p><b>5.5.1.3 </b></p>
<p><b>Rx Timeout Notification </b></p>
<p><b>Prototype </b></p>
<p>void <b>[Rx Timeout Notification Name] </b>( void ) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>77 </p>
<p>based on template version 5.6.0 </p>
<p><b>Functional Description </b></p>
<p>It is called immediately after a message reception error has been detected by the deadline monitoring </p>
<p>mechanism. The function can be configured for signals with a configurable function name. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>none </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The function is called on task level. </p>
<p>Table 5-46  </p>
<p>Rx Timeout Notification </p>
<p><b>5.5.1.4 </b></p>
<p><b>Tx Timeout Notification </b></p>
<p><b>Prototype </b></p>
<p>void <b>[Tx Timeout Notification Name] </b>( void ) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>It is called immediately after a message transmission error has been detected by the deadline monitoring </p>
<p>mechanism. The function can be configured for signals and signal groups with a configurable function </p>
<p>name. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>none </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The function is called on task level. </p>
<p>Table 5-47  </p>
<p>Tx Timeout Notification </p>
<p><b>5.5.1.5 </b></p>
<p><b>Error Notification </b></p>
<p><b>Prototype </b></p>
<p>void <b>[Error Notification Name] </b>( void ) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>It is called immediately for outstanding, not confirmed  transmitted  signals that are contained in I-PDUs </p>
<p>that get stopped by a call to Com_IpduGroupControl. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>none </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>78 </p>
<p>based on template version 5.6.0 </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The function is in the context of Com_IpduGroupControl. </p>
<p>Table 5-48  </p>
<p>Error Notification </p>
<p><b>5.5.1.6 </b></p>
<p><b>Invalid Notification </b></p>
<p><b>Prototype </b></p>
<p>void <b>[Invalid Notification Name] </b>( void ) </p>
<p><b>Parameter </b></p>
<p>void </p>
<p>none </p>
<p><b>Return code </b></p>
<p>void </p>
<p>none </p>
<p><b>Functional Description </b></p>
<p>This notification is called, if an invalid value is received and the invalid action is configured to ‘NOTIFY’. </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>none </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>The call context depends on the configuration of the parameter ComIPduSignalProcessing for </p>
<p>the I-PDU. </p>
<p>Table 5-49  </p>
<p>Invalid Notification </p>
<p><b>5.5.2 </b></p>
<p><b>Callout Functions </b></p>
<p>At  its  configurable  interfaces the  COM  defines  callout functions. The  declarations of  the </p>
<p>callout functions are provided by the BSW module, i.e. the COM. It is the integrator's task </p>
<p>to  provide  the  corresponding  function  definitions.  The  definitions  of  the  callouts  can  be </p>
<p>adjusted to the system's needs. The  COM callout function declarations are described in </p>
<p>the following tables: </p>
<p><b>5.5.2.1 </b></p>
<p><b>Rx I-Pdu callout function </b></p>
<p>If </p>
<p>/MICROSAR/Com/ComGeneral/ComAdvancedIPduCallouts</p>
<p> is configured to TRUE, </p>
<p>the Rx I-PDU callouts are implemented as specified by AUTOSAR 4.1.1 </p>
<p><b>Prototype </b></p>
<p>boolean &lt;IPDU_CalloutName&gt; (PduIdType PduId, const PduInfoType* </p>
<p>PduInfoPtr) </p>
<p><b>Parameter </b></p>
<p>PduId </p>
<p>ID of AUTOSAR COM I-PDU that has been received. Identifies the data that </p>
<p>has been received. </p>
<p>Range: 0..(maximum number of I-PDU IDs received by AUTOSAR COM) - 1 </p>
<p>PduInfoPtr </p>
<p>Contains the length (SduLength) of the received I-PDU and a pointer to a </p>
<p>buffer (SduDataPtr) containing the I-PDU. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>79 </p>
<p>based on template version 5.6.0 </p>
<p><b>Return code </b></p>
<p>boolean </p>
<p>The return value indicates whether the processing of this I-PDU shall continue </p>
<p>(TRUE) or abandon (FALSE) after the callout returns. </p>
<p><b>Functional Description </b></p>
<p>For each I-PDU a callout function can be configured and the implementation has to be provided by the </p>
<p>application. It can be used to extend the COM functionality with application related functions (e.g. CRC or </p>
<p>sequence counter calculation).  </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>In this context, the signal access APIs could not be used to read the signal values, as the </p>
<p>internal buffer is not updated yet and the old values are returned. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>Rx I-PDU Callouts are called by COM directly after Com_RxIndication on task or interrupt </p>
<p>level. The call context depends on the configuration of the Driver. </p>
<p>Table 5-50  </p>
<p>Rx I-PDU Callout with PduInfo pointer </p>
<p>If </p>
<p>/MICROSAR/Com/ComGeneral/ComAdvancedIPduCallouts</p>
<p> </p>
<p>is </p>
<p>configured </p>
<p>to </p>
<p>FALSE, the Rx I-PDU callouts are implemented as specified by AUTOSAR 4.0.3 </p>
<p><b>Prototype </b></p>
<p>boolean &lt;IPDU_CalloutName&gt; (PduIdType Id, const uint8* IpduData) </p>
<p><b>Parameter </b></p>
<p>PduId </p>
<p>ID of AUTOSAR COM I-PDU that has been received. Identifies the data that </p>
<p>has been received. </p>
<p>Range: 0..(maximum number of I-PDU IDs received by AUTOSAR COM) - 1 </p>
<p>IpduData </p>
<p>A pointer to the data of the received I-PDU. </p>
<p><b>Return code </b></p>
<p>boolean </p>
<p>The return value indicates whether the processing of this I-PDU shall continue </p>
<p>(TRUE) or abandon (FALSE) after the callout returns. </p>
<p><b>Functional Description </b></p>
<p>For each I-PDU a callout function can be configured and the implementation has to be provided by the </p>
<p>application. It can be used to extend the COM functionality with application related functions (e.g. CRC or </p>
<p>sequence counter calculation).  </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>In this context, the signal access APIs could not be used to read the signal values, as the </p>
<p>internal buffer is not updated yet and the old values are returned. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>Rx I-PDU Callouts are called by COM directly after Com_RxIndication on task or interrupt </p>
<p>level. The call context depends on the configuration of the Driver. </p>
<p>Table 5-51  </p>
<p>Rx I-PDU Callout with data pointer </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>80 </p>
<p>based on template version 5.6.0 </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>Caution </b></p>
<p>If /MICROSAR/Com/ComGeneral/ComAdvancedIPduCallouts is configured to FALSE, </p>
<p>the current length of the PDU payload cannot be evaluated. Thus a dynamic DLC </p>
<p>cannot be handled. </p>
<p><b> </b></p>
<p><b> </b></p>
<p><b>5.5.2.2 </b></p>
<p><b>Tx I-Pdu callout function </b></p>
<p>If  /MICROSAR/Com/ComGeneral/ComAdvancedIPduCallouts  is  configured  to TRUE,  the </p>
<p>Tx I-PDU callouts are implemented as specified by AUTOSAR 4.1.1 </p>
<p><b>Prototype </b></p>
<p>boolean &lt;IPDU_CalloutName&gt; (PduIdType PduId, PduInfoType* </p>
<p>PduInfoPtr) </p>
<p><b>Parameter </b></p>
<p>PduId </p>
<p>ID of AUTOSAR COM I-PDU that should be transmitted. Identifies the data </p>
<p>that should be transmitted. </p>
<p>Range: 0..(maximum number of I-PDU IDs transmitted by AUTOSAR COM) - </p>
<p>1 </p>
<p>PduInfoPtr </p>
<p>Contains the length (SduLength) of the I-PDU to be transmitted and a pointer </p>
<p>to a buffer (SduDataPtr) containing the I-PDU. </p>
<p><b>Return code </b></p>
<p>boolean </p>
<p>The return value indicates whether the processing of this I-PDU shall continue </p>
<p>(TRUE) or abandon (FALSE) after the callout returns. </p>
<p><b>Functional Description </b></p>
<p>For each I-PDU a callout function can be configured and the implementation has to be provided by the </p>
<p>application. It can be used to extend the COM functionality with application related functions (e.g. CRC or </p>
<p>sequence counter calculation).  </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>In this context the signal access APIs can be used to update the signal values, as these APIs </p>
<p>directly updates the internal buffer. If a triggered event is caused by such a call, no additional </p>
<p>transmission of the I-PDU is triggered. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>Tx I-PDU Callouts are called by COM directly before the call of PduR_ComTransmit on task </p>
<p>level. </p>
<p><b>&gt; </b></p>
<p>Tx I-PDU Trigger Transmit Callouts are called by COM in the function Com_TriggerTransmit. </p>
<p>The call context depends on the configuration of the lower layer. </p>
<p>Table 5-52  </p>
<p>Tx I-PDU Callout with PduInfo pointer </p>
<p>If /MICROSAR/Com/ComGeneral/ComAdvancedIPduCallouts is configured to FALSE, the </p>
<p>Tx I-PDU callouts are implemented as specified by AUTOSAR 4.0.3 </p>
<p><b>Prototype </b></p>
<p>boolean &lt;IPDU_CalloutName&gt; (PduIdType Id, uint8* IpduData) </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>81 </p>
<p>based on template version 5.6.0 </p>
<p><b>Parameter </b></p>
<p>Id </p>
<p>ID of AUTOSAR COM I-PDU that should be transmitted. Identifies the data </p>
<p>that should be transmitted. </p>
<p>Range: 0..(maximum number of I-PDU IDs transmitted by AUTOSAR COM) - </p>
<p>1 </p>
<p>IpduData </p>
<p>A pointer to the data of the received I-PDU. </p>
<p><b>Return code </b></p>
<p>boolean </p>
<p>The return value indicates whether the processing of this I-PDU shall continue </p>
<p>(TRUE) or abandon (FALSE) after the callout returns. </p>
<p><b>Functional Description </b></p>
<p>For each I-PDU a callout function can be configured and the implementation has to be provided by the </p>
<p>application. It can be used to extend the COM functionality with application related functions (e.g. CRC or </p>
<p>sequence counter calculation).  </p>
<p><b>Particularities and Limitations </b></p>
<p><b>&gt; </b></p>
<p>In this context the signal access APIs can be used to update the signal values, as these APIs </p>
<p>directly updates the internal buffer. If a triggered event is caused by such a call, no additional </p>
<p>transmission of the I-PDU is triggered. </p>
<p>Call Context </p>
<p><b>&gt; </b></p>
<p>Tx I-PDU Callouts are called by COM directly before the call of PduR_ComTransmit on task </p>
<p>level. </p>
<p><b>&gt; </b></p>
<p>Tx I-PDU Trigger Transmit Callouts are called by COM in the function Com_TriggerTransmit. </p>
<p>The call context depends on the configuration of the lower layer. </p>
<p>Table 5-53  </p>
<p>Tx I-PDU Callout with data pointer </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>82 </p>
<p>based on template version 5.6.0 </p>
<p><b>6 </b></p>
<p><b>Configuration </b></p>
<p><b>6.1 </b></p>
<p><b>Configuration of Post-Build </b></p>
<p>The configuration of post-build loadable is described in [5]. </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>83 </p>
<p>based on template version 5.6.0 </p>
<p><b>7 </b></p>
<p><b>AUTOSAR Standard Compliance </b></p>
<p><b>7.1 </b></p>
<p><b>Limitations </b></p>
<p><b>Component Limitations </b></p>
<p>TRUE must be defined to (boolean) 1 </p>
<p>FALSE must be defined to (boolean) 0 </p>
<p>NULL_PTR must be defined to ((void *)0) </p>
<p> </p>
<p>Since 8-bit micro controllers are out of scope in AUTOSAR, COM has been optimized for </p>
<p>the  usage  on  16-  and  32-bit  controllers.  Therefore  the  target  system  must  be  able  to </p>
<p>provide atomic read and write accesses to 16-bit variables. </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>84 </p>
<p>based on template version 5.6.0 </p>
<p><b>8 </b></p>
<p><b>Glossary and Abbreviations </b></p>
<p><b>8.1 </b></p>
<p><b>Glossary </b></p>
<p><b>Term </b></p>
<p><b>Description </b></p>
<p>CFG5 </p>
<p>DaVinci Configurator </p>
<p>Table 8-1  </p>
<p>Glossary </p>
<p><b>8.2 </b></p>
<p><b>Abbreviations </b></p>
<p><b>Abbreviation </b></p>
<p><b>Description </b></p>
<p>API </p>
<p>Application Programming Interface </p>
<p> </p>
<p>AUTOSAR </p>
<p>Automotive Open System Architecture </p>
<p>BSW </p>
<p>Basis Software </p>
<p>DEM </p>
<p>Diagnostic Event Manager </p>
<p>DET </p>
<p>Development Error Tracer </p>
<p>EAD </p>
<p>Embedded Architecture Designer </p>
<p>ECU </p>
<p>Electronic Control Unit </p>
<p>HIS </p>
<p>Hersteller Initiative Software </p>
<p>ISR </p>
<p>Interrupt Service Routine </p>
<p>MICROSAR </p>
<p>Microcontroller Open System Architecture (the Vector AUTOSAR </p>
<p>solution) </p>
<p>RTE </p>
<p>Runtime Environment </p>
<p>SRS </p>
<p>Software Requirement Specification </p>
<p>SWC </p>
<p>Software Component </p>
<p>SWS </p>
<p>Software Specification </p>
<p>Table 8-2  </p>
<p>Abbreviations </p>
<p> </p>
<p> </p>
<h1 style="page-break-before:always; "></h1>
<p>Technical Reference MICROSAR COM </p>
<p>© 2016 Vector Informatik GmbH </p>
<p>Version 5.04.00 </p>
<p>85 </p>
<p>based on template version 5.6.0 </p>
<p><b>9 </b></p>
<p><b>Contact </b></p>
<p>Visit our website for more information on </p>
<p> </p>
<p><b></b></p>
<p><b> </b></p>
<p>News </p>
<p><b></b></p>
<p><b> </b></p>
<p>Products </p>
<p><b></b></p>
<p><b> </b></p>
<p>Demo software </p>
<p><b></b></p>
<p><b> </b></p>
<p>Support </p>
<p><b></b></p>
<p><b> </b></p>
<p>Training data </p>
<p><b></b></p>
<p><b> </b></p>
<p>Addresses </p>
<p> </p>
<p>www.vector.com </p>
<p> </p>
<p> </p>
<p> </p>
</body>
</html>
{% endraw %}